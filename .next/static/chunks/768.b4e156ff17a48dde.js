(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[768],{1876:function(e){!function(){var t={675:function(e,t){"use strict";t.byteLength=function(e){var t=A(e),i=t[0],s=t[1];return(i+s)*3/4-s},t.toByteArray=function(e){var t,i,n=A(e),a=n[0],o=n[1],l=new r((a+o)*3/4-o),h=0,u=o>0?a-4:a;for(i=0;i<u;i+=4)t=s[e.charCodeAt(i)]<<18|s[e.charCodeAt(i+1)]<<12|s[e.charCodeAt(i+2)]<<6|s[e.charCodeAt(i+3)],l[h++]=t>>16&255,l[h++]=t>>8&255,l[h++]=255&t;return 2===o&&(t=s[e.charCodeAt(i)]<<2|s[e.charCodeAt(i+1)]>>4,l[h++]=255&t),1===o&&(t=s[e.charCodeAt(i)]<<10|s[e.charCodeAt(i+1)]<<4|s[e.charCodeAt(i+2)]>>2,l[h++]=t>>8&255,l[h++]=255&t),l},t.fromByteArray=function(e){for(var t,s=e.length,r=s%3,n=[],a=0,o=s-r;a<o;a+=16383)n.push(function(e,t,s){for(var r,n=[],a=t;a<s;a+=3)n.push(i[(r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]))>>18&63]+i[r>>12&63]+i[r>>6&63]+i[63&r]);return n.join("")}(e,a,a+16383>o?o:a+16383));return 1===r?n.push(i[(t=e[s-1])>>2]+i[t<<4&63]+"=="):2===r&&n.push(i[(t=(e[s-2]<<8)+e[s-1])>>10]+i[t>>4&63]+i[t<<2&63]+"="),n.join("")};for(var i=[],s=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,o=n.length;a<o;++a)i[a]=n[a],s[n.charCodeAt(a)]=a;function A(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");-1===i&&(i=t);var s=i===t?0:4-i%4;return[i,s]}s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},72:function(e,t,i){"use strict";/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var s=i(675),r=i(783),n="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function a(e){if(e>2147483647)throw RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,o.prototype),t}function o(e,t,i){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return h(e)}return A(e,t,i)}function A(e,t,i){if("string"==typeof e)return function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!o.isEncoding(t))throw TypeError("Unknown encoding: "+t);var i=0|g(e,t),s=a(i),r=s.write(e,t);return r!==i&&(s=s.slice(0,r)),s}(e,t);if(ArrayBuffer.isView(e))return u(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(R(e,ArrayBuffer)||e&&R(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(R(e,SharedArrayBuffer)||e&&R(e.buffer,SharedArrayBuffer)))return function(e,t,i){var s;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(i||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(s=void 0===t&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,t):new Uint8Array(e,t,i),o.prototype),s}(e,t,i);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var s=e.valueOf&&e.valueOf();if(null!=s&&s!==e)return o.from(s,t,i);var r=function(e){if(o.isBuffer(e)){var t,i=0|c(e.length),s=a(i);return 0===s.length||e.copy(s,0,0,i),s}return void 0!==e.length?"number"!=typeof e.length||(t=e.length)!=t?a(0):u(e):"Buffer"===e.type&&Array.isArray(e.data)?u(e.data):void 0}(e);if(r)return r;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return o.from(e[Symbol.toPrimitive]("string"),t,i);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function h(e){return l(e),a(e<0?0:0|c(e))}function u(e){for(var t=e.length<0?0:0|c(e.length),i=a(t),s=0;s<t;s+=1)i[s]=255&e[s];return i}function c(e){if(e>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function g(e,t){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||R(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var i=e.length,s=arguments.length>2&&!0===arguments[2];if(!s&&0===i)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return v(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return S(e).length;default:if(r)return s?-1:v(e).length;t=(""+t).toLowerCase(),r=!0}}function d(e,t,i){var r,n,a=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===i||i>this.length)&&(i=this.length),i<=0||(i>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,i){var s=e.length;(!t||t<0)&&(t=0),(!i||i<0||i>s)&&(i=s);for(var r="",n=t;n<i;++n)r+=T[e[n]];return r}(this,t,i);case"utf8":case"utf-8":return I(this,t,i);case"ascii":return function(e,t,i){var s="";i=Math.min(e.length,i);for(var r=t;r<i;++r)s+=String.fromCharCode(127&e[r]);return s}(this,t,i);case"latin1":case"binary":return function(e,t,i){var s="";i=Math.min(e.length,i);for(var r=t;r<i;++r)s+=String.fromCharCode(e[r]);return s}(this,t,i);case"base64":return r=t,n=i,0===r&&n===this.length?s.fromByteArray(this):s.fromByteArray(this.slice(r,n));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,i){for(var s=e.slice(t,i),r="",n=0;n<s.length;n+=2)r+=String.fromCharCode(s[n]+256*s[n+1]);return r}(this,t,i);default:if(a)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),a=!0}}function p(e,t,i){var s=e[t];e[t]=e[i],e[i]=s}function m(e,t,i,s,r){var n;if(0===e.length)return -1;if("string"==typeof i?(s=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),(n=i=+i)!=n&&(i=r?0:e.length-1),i<0&&(i=e.length+i),i>=e.length){if(r)return -1;i=e.length-1}else if(i<0){if(!r)return -1;i=0}if("string"==typeof t&&(t=o.from(t,s)),o.isBuffer(t))return 0===t.length?-1:f(e,t,i,s,r);if("number"==typeof t)return(t&=255,"function"==typeof Uint8Array.prototype.indexOf)?r?Uint8Array.prototype.indexOf.call(e,t,i):Uint8Array.prototype.lastIndexOf.call(e,t,i):f(e,[t],i,s,r);throw TypeError("val must be string, number or Buffer")}function f(e,t,i,s,r){var n,a=1,o=e.length,A=t.length;if(void 0!==s&&("ucs2"===(s=String(s).toLowerCase())||"ucs-2"===s||"utf16le"===s||"utf-16le"===s)){if(e.length<2||t.length<2)return -1;a=2,o/=2,A/=2,i/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(r){var h=-1;for(n=i;n<o;n++)if(l(e,n)===l(t,-1===h?0:n-h)){if(-1===h&&(h=n),n-h+1===A)return h*a}else -1!==h&&(n-=n-h),h=-1}else for(i+A>o&&(i=o-A),n=i;n>=0;n--){for(var u=!0,c=0;c<A;c++)if(l(e,n+c)!==l(t,c)){u=!1;break}if(u)return n}return -1}function I(e,t,i){i=Math.min(e.length,i);for(var s=[],r=t;r<i;){var n,a,o,A,l=e[r],h=null,u=l>239?4:l>223?3:l>191?2:1;if(r+u<=i)switch(u){case 1:l<128&&(h=l);break;case 2:(192&(n=e[r+1]))==128&&(A=(31&l)<<6|63&n)>127&&(h=A);break;case 3:n=e[r+1],a=e[r+2],(192&n)==128&&(192&a)==128&&(A=(15&l)<<12|(63&n)<<6|63&a)>2047&&(A<55296||A>57343)&&(h=A);break;case 4:n=e[r+1],a=e[r+2],o=e[r+3],(192&n)==128&&(192&a)==128&&(192&o)==128&&(A=(15&l)<<18|(63&n)<<12|(63&a)<<6|63&o)>65535&&A<1114112&&(h=A)}null===h?(h=65533,u=1):h>65535&&(h-=65536,s.push(h>>>10&1023|55296),h=56320|1023&h),s.push(h),r+=u}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);for(var i="",s=0;s<t;)i+=String.fromCharCode.apply(String,e.slice(s,s+=4096));return i}(s)}function E(e,t,i){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>i)throw RangeError("Trying to access beyond buffer length")}function C(e,t,i,s,r,n){if(!o.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<n)throw RangeError('"value" argument is out of bounds');if(i+s>e.length)throw RangeError("Index out of range")}function B(e,t,i,s,r,n){if(i+s>e.length||i<0)throw RangeError("Index out of range")}function y(e,t,i,s,n){return t=+t,i>>>=0,n||B(e,t,i,4,34028234663852886e22,-34028234663852886e22),r.write(e,t,i,s,23,4),i+4}function w(e,t,i,s,n){return t=+t,i>>>=0,n||B(e,t,i,8,17976931348623157e292,-17976931348623157e292),r.write(e,t,i,s,52,8),i+8}t.Buffer=o,t.SlowBuffer=function(e){return+e!=e&&(e=0),o.alloc(+e)},t.INSPECT_MAX_BYTES=50,t.kMaxLength=2147483647,o.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(e,t,i){return A(e,t,i)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(e,t,i){return(l(e),e<=0)?a(e):void 0!==t?"string"==typeof i?a(e).fill(t,i):a(e).fill(t):a(e)},o.allocUnsafe=function(e){return h(e)},o.allocUnsafeSlow=function(e){return h(e)},o.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype},o.compare=function(e,t){if(R(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),R(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var i=e.length,s=t.length,r=0,n=Math.min(i,s);r<n;++r)if(e[r]!==t[r]){i=e[r],s=t[r];break}return i<s?-1:s<i?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);if(void 0===t)for(i=0,t=0;i<e.length;++i)t+=e[i].length;var i,s=o.allocUnsafe(t),r=0;for(i=0;i<e.length;++i){var n=e[i];if(R(n,Uint8Array)&&(n=o.from(n)),!o.isBuffer(n))throw TypeError('"list" argument must be an Array of Buffers');n.copy(s,r),r+=n.length}return s},o.byteLength=g,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)p(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)p(this,t,t+3),p(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)p(this,t,t+7),p(this,t+1,t+6),p(this,t+2,t+5),p(this,t+3,t+4);return this},o.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?I(this,0,e):d.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",i=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(e+=" ... "),"<Buffer "+e+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(e,t,i,s,r){if(R(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===i&&(i=e?e.length:0),void 0===s&&(s=0),void 0===r&&(r=this.length),t<0||i>e.length||s<0||r>this.length)throw RangeError("out of range index");if(s>=r&&t>=i)return 0;if(s>=r)return -1;if(t>=i)return 1;if(t>>>=0,i>>>=0,s>>>=0,r>>>=0,this===e)return 0;for(var n=r-s,a=i-t,A=Math.min(n,a),l=this.slice(s,r),h=e.slice(t,i),u=0;u<A;++u)if(l[u]!==h[u]){n=l[u],a=h[u];break}return n<a?-1:a<n?1:0},o.prototype.includes=function(e,t,i){return -1!==this.indexOf(e,t,i)},o.prototype.indexOf=function(e,t,i){return m(this,e,t,i,!0)},o.prototype.lastIndexOf=function(e,t,i){return m(this,e,t,i,!1)},o.prototype.write=function(e,t,i,s){if(void 0===t)s="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)s=t,i=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(i)?(i>>>=0,void 0===s&&(s="utf8")):(s=i,i=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var r,n,a,o,A,l,h,u,c,g,d,p,m=this.length-t;if((void 0===i||i>m)&&(i=m),e.length>0&&(i<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");s||(s="utf8");for(var f=!1;;)switch(s){case"hex":return function(e,t,i,s){i=Number(i)||0;var r=e.length-i;s?(s=Number(s))>r&&(s=r):s=r;var n=t.length;s>n/2&&(s=n/2);for(var a=0;a<s;++a){var o=parseInt(t.substr(2*a,2),16);if(o!=o)break;e[i+a]=o}return a}(this,e,t,i);case"utf8":case"utf-8":return A=t,l=i,x(v(e,this.length-A),this,A,l);case"ascii":return h=t,u=i,x(b(e),this,h,u);case"latin1":case"binary":return r=this,n=e,a=t,o=i,x(b(n),r,a,o);case"base64":return c=t,g=i,x(S(e),this,c,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d=t,p=i,x(function(e,t){for(var i,s,r=[],n=0;n<e.length&&!((t-=2)<0);++n)s=(i=e.charCodeAt(n))>>8,r.push(i%256),r.push(s);return r}(e,this.length-d),this,d,p);default:if(f)throw TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),f=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},o.prototype.slice=function(e,t){var i=this.length;e=~~e,t=void 0===t?i:~~t,e<0?(e+=i)<0&&(e=0):e>i&&(e=i),t<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e);var s=this.subarray(e,t);return Object.setPrototypeOf(s,o.prototype),s},o.prototype.readUIntLE=function(e,t,i){e>>>=0,t>>>=0,i||E(e,t,this.length);for(var s=this[e],r=1,n=0;++n<t&&(r*=256);)s+=this[e+n]*r;return s},o.prototype.readUIntBE=function(e,t,i){e>>>=0,t>>>=0,i||E(e,t,this.length);for(var s=this[e+--t],r=1;t>0&&(r*=256);)s+=this[e+--t]*r;return s},o.prototype.readUInt8=function(e,t){return e>>>=0,t||E(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||E(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||E(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||E(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||E(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,i){e>>>=0,t>>>=0,i||E(e,t,this.length);for(var s=this[e],r=1,n=0;++n<t&&(r*=256);)s+=this[e+n]*r;return s>=(r*=128)&&(s-=Math.pow(2,8*t)),s},o.prototype.readIntBE=function(e,t,i){e>>>=0,t>>>=0,i||E(e,t,this.length);for(var s=t,r=1,n=this[e+--s];s>0&&(r*=256);)n+=this[e+--s]*r;return n>=(r*=128)&&(n-=Math.pow(2,8*t)),n},o.prototype.readInt8=function(e,t){return(e>>>=0,t||E(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||E(e,2,this.length);var i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},o.prototype.readInt16BE=function(e,t){e>>>=0,t||E(e,2,this.length);var i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||E(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||E(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return e>>>=0,t||E(e,4,this.length),r.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||E(e,4,this.length),r.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||E(e,8,this.length),r.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||E(e,8,this.length),r.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,i,s){if(e=+e,t>>>=0,i>>>=0,!s){var r=Math.pow(2,8*i)-1;C(this,e,t,i,r,0)}var n=1,a=0;for(this[t]=255&e;++a<i&&(n*=256);)this[t+a]=e/n&255;return t+i},o.prototype.writeUIntBE=function(e,t,i,s){if(e=+e,t>>>=0,i>>>=0,!s){var r=Math.pow(2,8*i)-1;C(this,e,t,i,r,0)}var n=i-1,a=1;for(this[t+n]=255&e;--n>=0&&(a*=256);)this[t+n]=e/a&255;return t+i},o.prototype.writeUInt8=function(e,t,i){return e=+e,t>>>=0,i||C(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,i){return e=+e,t>>>=0,i||C(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUInt16BE=function(e,t,i){return e=+e,t>>>=0,i||C(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUInt32LE=function(e,t,i){return e=+e,t>>>=0,i||C(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUInt32BE=function(e,t,i){return e=+e,t>>>=0,i||C(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeIntLE=function(e,t,i,s){if(e=+e,t>>>=0,!s){var r=Math.pow(2,8*i-1);C(this,e,t,i,r-1,-r)}var n=0,a=1,o=0;for(this[t]=255&e;++n<i&&(a*=256);)e<0&&0===o&&0!==this[t+n-1]&&(o=1),this[t+n]=(e/a>>0)-o&255;return t+i},o.prototype.writeIntBE=function(e,t,i,s){if(e=+e,t>>>=0,!s){var r=Math.pow(2,8*i-1);C(this,e,t,i,r-1,-r)}var n=i-1,a=1,o=0;for(this[t+n]=255&e;--n>=0&&(a*=256);)e<0&&0===o&&0!==this[t+n+1]&&(o=1),this[t+n]=(e/a>>0)-o&255;return t+i},o.prototype.writeInt8=function(e,t,i){return e=+e,t>>>=0,i||C(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,i){return e=+e,t>>>=0,i||C(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,i){return e=+e,t>>>=0,i||C(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,i){return e=+e,t>>>=0,i||C(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,i){return e=+e,t>>>=0,i||C(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeFloatLE=function(e,t,i){return y(this,e,t,!0,i)},o.prototype.writeFloatBE=function(e,t,i){return y(this,e,t,!1,i)},o.prototype.writeDoubleLE=function(e,t,i){return w(this,e,t,!0,i)},o.prototype.writeDoubleBE=function(e,t,i){return w(this,e,t,!1,i)},o.prototype.copy=function(e,t,i,s){if(!o.isBuffer(e))throw TypeError("argument should be a Buffer");if(i||(i=0),s||0===s||(s=this.length),t>=e.length&&(t=e.length),t||(t=0),s>0&&s<i&&(s=i),s===i||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw RangeError("Index out of range");if(s<0)throw RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),e.length-t<s-i&&(s=e.length-t+i);var r=s-i;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,i,s);else if(this===e&&i<t&&t<s)for(var n=r-1;n>=0;--n)e[n+t]=this[n+i];else Uint8Array.prototype.set.call(e,this.subarray(i,s),t);return r},o.prototype.fill=function(e,t,i,s){if("string"==typeof e){if("string"==typeof t?(s=t,t=0,i=this.length):"string"==typeof i&&(s=i,i=this.length),void 0!==s&&"string"!=typeof s)throw TypeError("encoding must be a string");if("string"==typeof s&&!o.isEncoding(s))throw TypeError("Unknown encoding: "+s);if(1===e.length){var r,n=e.charCodeAt(0);("utf8"===s&&n<128||"latin1"===s)&&(e=n)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<i)throw RangeError("Out of range index");if(i<=t)return this;if(t>>>=0,i=void 0===i?this.length:i>>>0,e||(e=0),"number"==typeof e)for(r=t;r<i;++r)this[r]=e;else{var a=o.isBuffer(e)?e:o.from(e,s),A=a.length;if(0===A)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(r=0;r<i-t;++r)this[r+t]=a[r%A]}return this};var Q=/[^+/0-9A-Za-z-_]/g;function v(e,t){t=t||1/0;for(var i,s=e.length,r=null,n=[],a=0;a<s;++a){if((i=e.charCodeAt(a))>55295&&i<57344){if(!r){if(i>56319||a+1===s){(t-=3)>-1&&n.push(239,191,189);continue}r=i;continue}if(i<56320){(t-=3)>-1&&n.push(239,191,189),r=i;continue}i=(r-55296<<10|i-56320)+65536}else r&&(t-=3)>-1&&n.push(239,191,189);if(r=null,i<128){if((t-=1)<0)break;n.push(i)}else if(i<2048){if((t-=2)<0)break;n.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;n.push(i>>12|224,i>>6&63|128,63&i|128)}else if(i<1114112){if((t-=4)<0)break;n.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}else throw Error("Invalid code point")}return n}function b(e){for(var t=[],i=0;i<e.length;++i)t.push(255&e.charCodeAt(i));return t}function S(e){return s.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(Q,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function x(e,t,i,s){for(var r=0;r<s&&!(r+i>=t.length)&&!(r>=e.length);++r)t[r+i]=e[r];return r}function R(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}var T=function(){for(var e="0123456789abcdef",t=Array(256),i=0;i<16;++i)for(var s=16*i,r=0;r<16;++r)t[s+r]=e[i]+e[r];return t}()},783:function(e,t){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */t.read=function(e,t,i,s,r){var n,a,o=8*r-s-1,A=(1<<o)-1,l=A>>1,h=-7,u=i?r-1:0,c=i?-1:1,g=e[t+u];for(u+=c,n=g&(1<<-h)-1,g>>=-h,h+=o;h>0;n=256*n+e[t+u],u+=c,h-=8);for(a=n&(1<<-h)-1,n>>=-h,h+=s;h>0;a=256*a+e[t+u],u+=c,h-=8);if(0===n)n=1-l;else{if(n===A)return a?NaN:1/0*(g?-1:1);a+=Math.pow(2,s),n-=l}return(g?-1:1)*a*Math.pow(2,n-s)},t.write=function(e,t,i,s,r,n){var a,o,A,l=8*n-r-1,h=(1<<l)-1,u=h>>1,c=23===r?5960464477539062e-23:0,g=s?0:n-1,d=s?1:-1,p=t<0||0===t&&1/t<0?1:0;for(isNaN(t=Math.abs(t))||t===1/0?(o=isNaN(t)?1:0,a=h):(a=Math.floor(Math.log(t)/Math.LN2),t*(A=Math.pow(2,-a))<1&&(a--,A*=2),a+u>=1?t+=c/A:t+=c*Math.pow(2,1-u),t*A>=2&&(a++,A/=2),a+u>=h?(o=0,a=h):a+u>=1?(o=(t*A-1)*Math.pow(2,r),a+=u):(o=t*Math.pow(2,u-1)*Math.pow(2,r),a=0));r>=8;e[i+g]=255&o,g+=d,o/=256,r-=8);for(a=a<<r|o,l+=r;l>0;e[i+g]=255&a,g+=d,a/=256,l-=8);e[i+g-d]|=128*p}}},i={};function s(e){var r=i[e];if(void 0!==r)return r.exports;var n=i[e]={exports:{}},a=!0;try{t[e](n,n.exports,s),a=!1}finally{a&&delete i[e]}return n.exports}s.ab="//";var r=s(72);e.exports=r}()},2768:function(e,t,i){"use strict";let s,r,n,a,o,A,l,h,u,c,g,d,p;i.r(t),i.d(t,{CanvasTexture:function(){return eu.ROQ},FileLoader:function(){return eu.hH6},Loader:function(){return eu.aNw},ModelViewerElement:function(){return lv},NearestFilter:function(){return eu.TyD}});/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let m=(e,t)=>"method"!==t.kind||!t.descriptor||"value"in t.descriptor?{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:t.key,initializer(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher(i){i.createProperty(t.key,e)}}:{...t,finisher(i){i.createProperty(t.key,e)}},f=(e,t,i)=>{t.constructor.createProperty(i,e)};function I(e){return(t,i)=>void 0!==i?f(e,t,i):m(e,t)}null!=(null===(y=window.HTMLSlotElement)||void 0===y?void 0:y.prototype.assignedElements)||((e,t)=>e.assignedNodes(t).filter(e=>e.nodeType===Node.ELEMENT_NODE));var E,C,B,y,w,Q,v,b,S,x,R,T,M,D,L,F,k,U,_,N,G,P,O,H,q,K,V,J,Y,j,z,$,W,X,Z,ee,et,ei,es,er,en,ea,eo,eA,el,eh,eu=i(9477);/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let ec=window,eg=ec.ShadowRoot&&(void 0===ec.ShadyCSS||ec.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,ed=Symbol(),ep=new WeakMap;class em{constructor(e,t,i){if(this._$cssResult$=!0,i!==ed)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o,t=this.t;if(eg&&void 0===e){let i=void 0!==t&&1===t.length;i&&(e=ep.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),i&&ep.set(t,e))}return e}toString(){return this.cssText}}let ef=e=>new em("string"==typeof e?e:e+"",void 0,ed),eI=(e,t)=>{eg?e.adoptedStyleSheets=t.map(e=>e instanceof CSSStyleSheet?e:e.styleSheet):t.forEach(t=>{let i=document.createElement("style"),s=ec.litNonce;void 0!==s&&i.setAttribute("nonce",s),i.textContent=t.cssText,e.appendChild(i)})},eE=eg?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(let i of e.cssRules)t+=i.cssText;return ef(t)})(e):e,eC=window,eB=eC.trustedTypes,ey=eB?eB.emptyScript:"",ew=eC.reactiveElementPolyfillSupport,eQ={toAttribute(e,t){switch(t){case Boolean:e=e?ey:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let i=e;switch(t){case Boolean:i=null!==e;break;case Number:i=null===e?null:Number(e);break;case Object:case Array:try{i=JSON.parse(e)}catch(e){i=null}}return i}},ev=(e,t)=>t!==e&&(t==t||e==e),eb={attribute:!0,type:String,converter:eQ,reflect:!1,hasChanged:ev},eS="finalized";class ex extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(e){var t;this.finalize(),(null!==(t=this.h)&&void 0!==t?t:this.h=[]).push(e)}static get observedAttributes(){this.finalize();let e=[];return this.elementProperties.forEach((t,i)=>{let s=this._$Ep(i,t);void 0!==s&&(this._$Ev.set(s,i),e.push(s))}),e}static createProperty(e,t=eb){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){let i="symbol"==typeof e?Symbol():"__"+e,s=this.getPropertyDescriptor(e,i,t);void 0!==s&&Object.defineProperty(this.prototype,e,s)}}static getPropertyDescriptor(e,t,i){return{get(){return this[t]},set(s){let r=this[e];this[t]=s,this.requestUpdate(e,r,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||eb}static finalize(){if(this.hasOwnProperty(eS))return!1;this[eS]=!0;let e=Object.getPrototypeOf(this);if(e.finalize(),void 0!==e.h&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){let e=this.properties;for(let t of[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)])this.createProperty(t,e[t])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){let t=[];if(Array.isArray(e))for(let i of new Set(e.flat(1/0).reverse()))t.unshift(eE(i));else void 0!==e&&t.push(eE(e));return t}static _$Ep(e,t){let i=t.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof e?e.toLowerCase():void 0}_$Eu(){var e;this._$E_=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(e=this.constructor.h)||void 0===e||e.forEach(e=>e(this))}addController(e){var t,i;(null!==(t=this._$ES)&&void 0!==t?t:this._$ES=[]).push(e),void 0!==this.renderRoot&&this.isConnected&&(null===(i=e.hostConnected)||void 0===i||i.call(e))}removeController(e){var t;null===(t=this._$ES)||void 0===t||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])})}createRenderRoot(){var e;let t=null!==(e=this.shadowRoot)&&void 0!==e?e:this.attachShadow(this.constructor.shadowRootOptions);return eI(t,this.constructor.elementStyles),t}connectedCallback(){var e;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(e=this._$ES)||void 0===e||e.forEach(e=>{var t;return null===(t=e.hostConnected)||void 0===t?void 0:t.call(e)})}enableUpdating(e){}disconnectedCallback(){var e;null===(e=this._$ES)||void 0===e||e.forEach(e=>{var t;return null===(t=e.hostDisconnected)||void 0===t?void 0:t.call(e)})}attributeChangedCallback(e,t,i){this._$AK(e,i)}_$EO(e,t,i=eb){var s;let r=this.constructor._$Ep(e,i);if(void 0!==r&&!0===i.reflect){let n=(void 0!==(null===(s=i.converter)||void 0===s?void 0:s.toAttribute)?i.converter:eQ).toAttribute(t,i.type);this._$El=e,null==n?this.removeAttribute(r):this.setAttribute(r,n),this._$El=null}}_$AK(e,t){var i;let s=this.constructor,r=s._$Ev.get(e);if(void 0!==r&&this._$El!==r){let e=s.getPropertyOptions(r),n="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==(null===(i=e.converter)||void 0===i?void 0:i.fromAttribute)?e.converter:eQ;this._$El=r,this[r]=n.fromAttribute(t,e.type),this._$El=null}}requestUpdate(e,t,i){let s=!0;void 0!==e&&(((i=i||this.constructor.getPropertyOptions(e)).hasChanged||ev)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),!0===i.reflect&&this._$El!==e&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(e,i))):s=!1),!this.isUpdatePending&&s&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(e){Promise.reject(e)}let e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((e,t)=>this[t]=e),this._$Ei=void 0);let t=!1,i=this._$AL;try{(t=this.shouldUpdate(i))?(this.willUpdate(i),null===(e=this._$ES)||void 0===e||e.forEach(e=>{var t;return null===(t=e.hostUpdate)||void 0===t?void 0:t.call(e)}),this.update(i)):this._$Ek()}catch(e){throw t=!1,this._$Ek(),e}t&&this._$AE(i)}willUpdate(e){}_$AE(e){var t;null===(t=this._$ES)||void 0===t||t.forEach(e=>{var t;return null===(t=e.hostUpdated)||void 0===t?void 0:t.call(e)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){void 0!==this._$EC&&(this._$EC.forEach((e,t)=>this._$EO(t,this[t],e)),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}}ex[eS]=!0,ex.elementProperties=new Map,ex.elementStyles=[],ex.shadowRootOptions={mode:"open"},null==ew||ew({ReactiveElement:ex}),(null!==(w=eC.reactiveElementVersions)&&void 0!==w?w:eC.reactiveElementVersions=[]).push("1.6.3");let eR=window,eT=eR.trustedTypes,eM=eT?eT.createPolicy("lit-html",{createHTML:e=>e}):void 0,eD="$lit$",eL=`lit$${(Math.random()+"").slice(9)}$`,eF="?"+eL,ek=`<${eF}>`,eU=document,e_=()=>eU.createComment(""),eN=e=>null===e||"object"!=typeof e&&"function"!=typeof e,eG=Array.isArray,eP=e=>eG(e)||"function"==typeof(null==e?void 0:e[Symbol.iterator]),eO="[ 	\n\f\r]",eH=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,eq=/-->/g,eK=/>/g,eV=RegExp(`>|${eO}(?:([^\\s"'>=/]+)(${eO}*=${eO}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),eJ=/'/g,eY=/"/g,ej=/^(?:script|style|textarea|title)$/i,ez=e=>(t,...i)=>({_$litType$:e,strings:t,values:i}),e$=ez(1),eW=(ez(2),Symbol.for("lit-noChange")),eX=Symbol.for("lit-nothing"),eZ=new WeakMap,e0=eU.createTreeWalker(eU,129,null,!1);function e1(e,t){if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==eM?eM.createHTML(t):t}let e2=(e,t)=>{let i=e.length-1,s=[],r,n=2===t?"<svg>":"",a=eH;for(let t=0;t<i;t++){let i=e[t],o,A,l=-1,h=0;for(;h<i.length&&(a.lastIndex=h,null!==(A=a.exec(i)));)h=a.lastIndex,a===eH?"!--"===A[1]?a=eq:void 0!==A[1]?a=eK:void 0!==A[2]?(ej.test(A[2])&&(r=RegExp("</"+A[2],"g")),a=eV):void 0!==A[3]&&(a=eV):a===eV?">"===A[0]?(a=null!=r?r:eH,l=-1):void 0===A[1]?l=-2:(l=a.lastIndex-A[2].length,o=A[1],a=void 0===A[3]?eV:'"'===A[3]?eY:eJ):a===eY||a===eJ?a=eV:a===eq||a===eK?a=eH:(a=eV,r=void 0);let u=a===eV&&e[t+1].startsWith("/>")?" ":"";n+=a===eH?i+ek:l>=0?(s.push(o),i.slice(0,l)+eD+i.slice(l)+eL+u):i+eL+(-2===l?(s.push(void 0),t):u)}return[e1(e,n+(e[i]||"<?>")+(2===t?"</svg>":"")),s]};class e3{constructor({strings:e,_$litType$:t},i){let s;this.parts=[];let r=0,n=0,a=e.length-1,o=this.parts,[A,l]=e2(e,t);if(this.el=e3.createElement(A,i),e0.currentNode=this.el.content,2===t){let e=this.el.content,t=e.firstChild;t.remove(),e.append(...t.childNodes)}for(;null!==(s=e0.nextNode())&&o.length<a;){if(1===s.nodeType){if(s.hasAttributes()){let e=[];for(let t of s.getAttributeNames())if(t.endsWith(eD)||t.startsWith(eL)){let i=l[n++];if(e.push(t),void 0!==i){let e=s.getAttribute(i.toLowerCase()+eD).split(eL),t=/([.?@])?(.*)/.exec(i);o.push({type:1,index:r,name:t[2],strings:e,ctor:"."===t[1]?e9:"?"===t[1]?te:"@"===t[1]?tt:e6})}else o.push({type:6,index:r})}for(let t of e)s.removeAttribute(t)}if(ej.test(s.tagName)){let e=s.textContent.split(eL),t=e.length-1;if(t>0){s.textContent=eT?eT.emptyScript:"";for(let i=0;i<t;i++)s.append(e[i],e_()),e0.nextNode(),o.push({type:2,index:++r});s.append(e[t],e_())}}}else if(8===s.nodeType){if(s.data===eF)o.push({type:2,index:r});else{let e=-1;for(;-1!==(e=s.data.indexOf(eL,e+1));)o.push({type:7,index:r}),e+=eL.length-1}}r++}}static createElement(e,t){let i=eU.createElement("template");return i.innerHTML=e,i}}function e8(e,t,i=e,s){var r,n,a;if(t===eW)return t;let o=void 0!==s?null===(r=i._$Co)||void 0===r?void 0:r[s]:i._$Cl,A=eN(t)?void 0:t._$litDirective$;return(null==o?void 0:o.constructor)!==A&&(null===(n=null==o?void 0:o._$AO)||void 0===n||n.call(o,!1),void 0===A?o=void 0:(o=new A(e))._$AT(e,i,s),void 0!==s?(null!==(a=i._$Co)&&void 0!==a?a:i._$Co=[])[s]=o:i._$Cl=o),void 0!==o&&(t=e8(e,o._$AS(e,t.values),o,s)),t}class e4{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var t;let{el:{content:i},parts:s}=this._$AD,r=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:eU).importNode(i,!0);e0.currentNode=r;let n=e0.nextNode(),a=0,o=0,A=s[0];for(;void 0!==A;){if(a===A.index){let t;2===A.type?t=new e5(n,n.nextSibling,this,e):1===A.type?t=new A.ctor(n,A.name,A.strings,this,e):6===A.type&&(t=new ti(n,this,e)),this._$AV.push(t),A=s[++o]}a!==(null==A?void 0:A.index)&&(n=e0.nextNode(),a++)}return e0.currentNode=eU,r}v(e){let t=0;for(let i of this._$AV)void 0!==i&&(void 0!==i.strings?(i._$AI(e,i,t),t+=i.strings.length-2):i._$AI(e[t])),t++}}class e5{constructor(e,t,i,s){var r;this.type=2,this._$AH=eX,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=i,this.options=s,this._$Cp=null===(r=null==s?void 0:s.isConnected)||void 0===r||r}get _$AU(){var e,t;return null!==(t=null===(e=this._$AM)||void 0===e?void 0:e._$AU)&&void 0!==t?t:this._$Cp}get parentNode(){let e=this._$AA.parentNode,t=this._$AM;return void 0!==t&&11===(null==e?void 0:e.nodeType)&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){eN(e=e8(this,e,t))?e===eX||null==e||""===e?(this._$AH!==eX&&this._$AR(),this._$AH=eX):e!==this._$AH&&e!==eW&&this._(e):void 0!==e._$litType$?this.g(e):void 0!==e.nodeType?this.$(e):eP(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==eX&&eN(this._$AH)?this._$AA.nextSibling.data=e:this.$(eU.createTextNode(e)),this._$AH=e}g(e){var t;let{values:i,_$litType$:s}=e,r="number"==typeof s?this._$AC(e):(void 0===s.el&&(s.el=e3.createElement(e1(s.h,s.h[0]),this.options)),s);if((null===(t=this._$AH)||void 0===t?void 0:t._$AD)===r)this._$AH.v(i);else{let e=new e4(r,this),t=e.u(this.options);e.v(i),this.$(t),this._$AH=e}}_$AC(e){let t=eZ.get(e.strings);return void 0===t&&eZ.set(e.strings,t=new e3(e)),t}T(e){eG(this._$AH)||(this._$AH=[],this._$AR());let t=this._$AH,i,s=0;for(let r of e)s===t.length?t.push(i=new e5(this.k(e_()),this.k(e_()),this,this.options)):i=t[s],i._$AI(r),s++;s<t.length&&(this._$AR(i&&i._$AB.nextSibling,s),t.length=s)}_$AR(e=this._$AA.nextSibling,t){var i;for(null===(i=this._$AP)||void 0===i||i.call(this,!1,!0,t);e&&e!==this._$AB;){let t=e.nextSibling;e.remove(),e=t}}setConnected(e){var t;void 0===this._$AM&&(this._$Cp=e,null===(t=this._$AP)||void 0===t||t.call(this,e))}}class e6{constructor(e,t,i,s,r){this.type=1,this._$AH=eX,this._$AN=void 0,this.element=e,this.name=t,this._$AM=s,this.options=r,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=eX}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,i,s){let r=this.strings,n=!1;if(void 0===r)(n=!eN(e=e8(this,e,t,0))||e!==this._$AH&&e!==eW)&&(this._$AH=e);else{let s,a;let o=e;for(e=r[0],s=0;s<r.length-1;s++)(a=e8(this,o[i+s],t,s))===eW&&(a=this._$AH[s]),n||(n=!eN(a)||a!==this._$AH[s]),a===eX?e=eX:e!==eX&&(e+=(null!=a?a:"")+r[s+1]),this._$AH[s]=a}n&&!s&&this.j(e)}j(e){e===eX?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}}class e9 extends e6{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===eX?void 0:e}}let e7=eT?eT.emptyScript:"";class te extends e6{constructor(){super(...arguments),this.type=4}j(e){e&&e!==eX?this.element.setAttribute(this.name,e7):this.element.removeAttribute(this.name)}}class tt extends e6{constructor(e,t,i,s,r){super(e,t,i,s,r),this.type=5}_$AI(e,t=this){var i;if((e=null!==(i=e8(this,e,t,0))&&void 0!==i?i:eX)===eW)return;let s=this._$AH,r=e===eX&&s!==eX||e.capture!==s.capture||e.once!==s.once||e.passive!==s.passive,n=e!==eX&&(s===eX||r);r&&this.element.removeEventListener(this.name,this,s),n&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,i;"function"==typeof this._$AH?this._$AH.call(null!==(i=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==i?i:this.element,e):this._$AH.handleEvent(e)}}class ti{constructor(e,t,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){e8(this,e)}}let ts=eR.litHtmlPolyfillSupport;null==ts||ts(e3,e5),(null!==(Q=eR.litHtmlVersions)&&void 0!==Q?Q:eR.litHtmlVersions=[]).push("2.8.0");let tr=(e,t,i)=>{var s,r;let n=null!==(s=null==i?void 0:i.renderBefore)&&void 0!==s?s:t,a=n._$litPart$;if(void 0===a){let e=null!==(r=null==i?void 0:i.renderBefore)&&void 0!==r?r:null;n._$litPart$=a=new e5(t.insertBefore(e_(),e),e,void 0,null!=i?i:{})}return a._$AI(e),a};class tn extends ex{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,t;let i=super.createRenderRoot();return null!==(e=(t=this.renderOptions).renderBefore)&&void 0!==e||(t.renderBefore=i.firstChild),i}update(e){let t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=tr(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!1)}render(){return eW}}tn.finalized=!0,tn._$litElement$=!0,null===(v=globalThis.litElementHydrateSupport)||void 0===v||v.call(globalThis,{LitElement:tn});let ta=globalThis.litElementPolyfillSupport;null==ta||ta({LitElement:tn}),(null!==(b=globalThis.litElementVersions)&&void 0!==b?b:globalThis.litElementVersions=[]).push("3.3.3");/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let to=null!=navigator.xr&&null!=self.XRSession&&null!=navigator.xr.isSessionSupported,tA=to&&null!=self.XRSession.prototype.requestHitTestSource,tl=null!=self.ResizeObserver,th=null!=self.IntersectionObserver;(()=>{let e=navigator.userAgent||navigator.vendor||self.opera;/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))})(),/\bCrOS\b/.test(navigator.userAgent);let tu=/android/i.test(navigator.userAgent),tc=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!self.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1;/Safari\//.test(navigator.userAgent);let tg=/firefox/i.test(navigator.userAgent),td=/OculusBrowser/.test(navigator.userAgent);tc&&/CriOS\//.test(navigator.userAgent);let tp=tu&&!tg&&!td,tm=!!(window.webkit&&window.webkit.messageHandlers),tf=(()=>{if(!tc)return!1;if(tm)return!!/CriOS\/|EdgiOS\/|FxiOS\/|GSA\/|DuckDuckGo\//.test(navigator.userAgent);{let e=document.createElement("a");return!!(e.relList&&e.relList.supports&&e.relList.supports("ar"))}})(),tI=e=>e&&"null"!==e?tC(e):null,tE=()=>{if(tA)return;let e=[];throw to||e.push("WebXR Device API"),tA||e.push("WebXR Hit Test API"),Error(`The following APIs are required for AR, but are missing in this browser: ${e.join(", ")}`)},tC=e=>new URL(e,window.location.toString()).toString(),tB=(e,t)=>{let i=null,s=(...s)=>{null==i&&(e(...s),i=self.setTimeout(()=>i=null,t))};return s.flush=()=>{null!=i&&(self.clearTimeout(i),i=null)},s},ty=(e,t)=>{let i=null;return(...s)=>{null!=i&&self.clearTimeout(i),i=self.setTimeout(()=>{i=null,e(...s)},t)}},tw=(e,t,i)=>Math.max(t,Math.min(i,e)),tQ=(()=>{let e=(()=>{var e;if(null===(e=document.documentElement.getAttribute("itemtype"))||void 0===e?void 0:e.includes("schema.org/SearchResultsPage"))return!0;for(let e of null!=document.head?Array.from(document.head.querySelectorAll("meta")):[])if("viewport"===e.name)return!0;return!1})();return e||console.warn('No <meta name="viewport"> detected; <model-viewer> will cap pixel density at 1.'),()=>e?window.devicePixelRatio:1})(),tv=(()=>{let e=RegExp("[?&]model-viewer-debug-mode(&|$)");return()=>self.ModelViewerElement&&self.ModelViewerElement.debugMode||self.location&&self.location.search&&self.location.search.match(e)})(),tb=(e=0)=>new Promise(t=>setTimeout(t,e)),tS=(e,t,i=null)=>new Promise(s=>{e.addEventListener(t,function r(n){(!i||i(n))&&(s(n),e.removeEventListener(t,r))})});/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tx=function(e,t,i,s){var r,n=arguments.length,a=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,s);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let tR=Symbol("currentEnvironmentMap"),tT=Symbol("currentBackground"),tM=Symbol("updateEnvironment"),tD=Symbol("cancelEnvironmentUpdate");/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tL=e$`
<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="#000000">
    <!-- NOTE(cdata): This SVG filter is a stop-gap until we can implement
         support for dynamic re-coloring of UI components -->
    <defs>
      <filter id="drop-shadow" x="-100%" y="-100%" width="300%" height="300%">
        <feGaussianBlur in="SourceAlpha" stdDeviation="1"/>
        <feOffset dx="0" dy="0" result="offsetblur"/>
        <feFlood flood-color="#000000"/>
        <feComposite in2="offsetblur" operator="in"/>
        <feMerge>
          <feMergeNode/>
          <feMergeNode in="SourceGraphic"/>
        </feMerge>
      </filter>
    </defs>
    <path filter="url(#drop-shadow)" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>`,tF=e$`
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="36">
    <defs>
        <path id="A" d="M.001.232h24.997V36H.001z" />
    </defs>
    <g transform="translate(-11 -4)" fill="none" fill-rule="evenodd">
        <path fill-opacity="0" fill="#fff" d="M0 0h44v44H0z" />
        <g transform="translate(11 3)">
            <path d="M8.733 11.165c.04-1.108.766-2.027 1.743-2.307a2.54 2.54 0 0 1 .628-.089c.16 0 .314.017.463.044 1.088.2 1.9 1.092 1.9 2.16v8.88h1.26c2.943-1.39 5-4.45 5-8.025a9.01 9.01 0 0 0-1.9-5.56l-.43-.5c-.765-.838-1.683-1.522-2.712-2-1.057-.49-2.226-.77-3.46-.77s-2.4.278-3.46.77c-1.03.478-1.947 1.162-2.71 2l-.43.5a9.01 9.01 0 0 0-1.9 5.56 9.04 9.04 0 0 0 .094 1.305c.03.21.088.41.13.617l.136.624c.083.286.196.56.305.832l.124.333a8.78 8.78 0 0 0 .509.953l.065.122a8.69 8.69 0 0 0 3.521 3.191l1.11.537v-9.178z" fill-opacity=".5" fill="#e4e4e4" />
            <path d="M22.94 26.218l-2.76 7.74c-.172.485-.676.8-1.253.8H12.24c-1.606 0-3.092-.68-3.98-1.82-1.592-2.048-3.647-3.822-6.11-5.27-.095-.055-.15-.137-.152-.23-.004-.1.046-.196.193-.297.56-.393 1.234-.6 1.926-.6a3.43 3.43 0 0 1 .691.069l4.922.994V10.972c0-.663.615-1.203 1.37-1.203s1.373.54 1.373 1.203v9.882h2.953c.273 0 .533.073.757.21l6.257 3.874c.027.017.045.042.07.06.41.296.586.77.426 1.22M4.1 16.614c-.024-.04-.042-.083-.065-.122a8.69 8.69 0 0 1-.509-.953c-.048-.107-.08-.223-.124-.333l-.305-.832c-.058-.202-.09-.416-.136-.624l-.13-.617a9.03 9.03 0 0 1-.094-1.305c0-2.107.714-4.04 1.9-5.56l.43-.5c.764-.84 1.682-1.523 2.71-2 1.058-.49 2.226-.77 3.46-.77s2.402.28 3.46.77c1.03.477 1.947 1.16 2.712 2l.428.5a9 9 0 0 1 1.901 5.559c0 3.577-2.056 6.636-5 8.026h-1.26v-8.882c0-1.067-.822-1.96-1.9-2.16-.15-.028-.304-.044-.463-.044-.22 0-.427.037-.628.09-.977.28-1.703 1.198-1.743 2.306v9.178l-1.11-.537C6.18 19.098 4.96 18 4.1 16.614M22.97 24.09l-6.256-3.874c-.102-.063-.218-.098-.33-.144 2.683-1.8 4.354-4.855 4.354-8.243 0-.486-.037-.964-.104-1.43a9.97 9.97 0 0 0-1.57-4.128l-.295-.408-.066-.092a10.05 10.05 0 0 0-.949-1.078c-.342-.334-.708-.643-1.094-.922-1.155-.834-2.492-1.412-3.94-1.65l-.732-.088-.748-.03a9.29 9.29 0 0 0-1.482.119c-1.447.238-2.786.816-3.94 1.65a9.33 9.33 0 0 0-.813.686 9.59 9.59 0 0 0-.845.877l-.385.437-.36.5-.288.468-.418.778-.04.09c-.593 1.28-.93 2.71-.93 4.222 0 3.832 2.182 7.342 5.56 8.938l1.437.68v4.946L5 25.64a4.44 4.44 0 0 0-.888-.086c-.017 0-.034.003-.05.003-.252.004-.503.033-.75.08a5.08 5.08 0 0 0-.237.056c-.193.046-.382.107-.568.18-.075.03-.15.057-.225.1-.25.114-.494.244-.723.405a1.31 1.31 0 0 0-.566 1.122 1.28 1.28 0 0 0 .645 1.051C4 29.925 5.96 31.614 7.473 33.563a5.06 5.06 0 0 0 .434.491c1.086 1.082 2.656 1.713 4.326 1.715h6.697c.748-.001 1.43-.333 1.858-.872.142-.18.256-.38.336-.602l2.757-7.74c.094-.26.13-.53.112-.794s-.088-.52-.203-.76a2.19 2.19 0 0 0-.821-.91" fill-opacity=".6" fill="#000" />
            <path d="M22.444 24.94l-6.257-3.874a1.45 1.45 0 0 0-.757-.211h-2.953v-9.88c0-.663-.616-1.203-1.373-1.203s-1.37.54-1.37 1.203v16.643l-4.922-.994a3.44 3.44 0 0 0-.692-.069 3.35 3.35 0 0 0-1.925.598c-.147.102-.198.198-.194.298.004.094.058.176.153.23 2.462 1.448 4.517 3.22 6.11 5.27.887 1.14 2.373 1.82 3.98 1.82h6.686c.577 0 1.08-.326 1.253-.8l2.76-7.74c.16-.448-.017-.923-.426-1.22-.025-.02-.043-.043-.07-.06z" fill="#fff" />
            <g transform="translate(0 .769)">
                <mask id="B" fill="#fff">
                    <use xlink:href="#A" />
                </mask>
                <path d="M23.993 24.992a1.96 1.96 0 0 1-.111.794l-2.758 7.74c-.08.22-.194.423-.336.602-.427.54-1.11.87-1.857.872h-6.698c-1.67-.002-3.24-.633-4.326-1.715-.154-.154-.3-.318-.434-.49C5.96 30.846 4 29.157 1.646 27.773c-.385-.225-.626-.618-.645-1.05a1.31 1.31 0 0 1 .566-1.122 4.56 4.56 0 0 1 .723-.405l.225-.1a4.3 4.3 0 0 1 .568-.18l.237-.056c.248-.046.5-.075.75-.08.018 0 .034-.003.05-.003.303-.001.597.027.89.086l3.722.752V20.68l-1.436-.68c-3.377-1.596-5.56-5.106-5.56-8.938 0-1.51.336-2.94.93-4.222.015-.03.025-.06.04-.09.127-.267.268-.525.418-.778.093-.16.186-.316.288-.468.063-.095.133-.186.2-.277L3.773 5c.118-.155.26-.29.385-.437.266-.3.544-.604.845-.877a9.33 9.33 0 0 1 .813-.686C6.97 2.167 8.31 1.59 9.757 1.35a9.27 9.27 0 0 1 1.481-.119 8.82 8.82 0 0 1 .748.031c.247.02.49.05.733.088 1.448.238 2.786.816 3.94 1.65.387.28.752.588 1.094.922a9.94 9.94 0 0 1 .949 1.078l.066.092c.102.133.203.268.295.408a9.97 9.97 0 0 1 1.571 4.128c.066.467.103.945.103 1.43 0 3.388-1.67 6.453-4.353 8.243.11.046.227.08.33.144l6.256 3.874c.37.23.645.55.82.9.115.24.185.498.203.76m.697-1.195c-.265-.55-.677-1.007-1.194-1.326l-5.323-3.297c2.255-2.037 3.564-4.97 3.564-8.114 0-2.19-.637-4.304-1.84-6.114-.126-.188-.26-.37-.4-.552-.645-.848-1.402-1.6-2.252-2.204C15.472.91 13.393.232 11.238.232A10.21 10.21 0 0 0 5.23 2.19c-.848.614-1.606 1.356-2.253 2.205-.136.18-.272.363-.398.55C1.374 6.756.737 8.87.737 11.06c0 4.218 2.407 8.08 6.133 9.842l.863.41v3.092l-2.525-.51c-.356-.07-.717-.106-1.076-.106a5.45 5.45 0 0 0-3.14.996c-.653.46-1.022 1.202-.99 1.983a2.28 2.28 0 0 0 1.138 1.872c2.24 1.318 4.106 2.923 5.543 4.772 1.26 1.62 3.333 2.59 5.55 2.592h6.698c1.42-.001 2.68-.86 3.134-2.138l2.76-7.74c.272-.757.224-1.584-.134-2.325" fill-opacity=".05" fill="#000" mask="url(#B)" />
            </g>
        </g>
    </g>
</svg>`,tk=e$`
<svg version="1.1" id="view_x5F_in_x5F_AR_x5F_icon"
	 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px"
	 viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
<rect id="Bounding_Box" x="0" y="0" fill="none" width="24" height="24"/>
<g id="Art_layer">
	<path d="M3,4c0-0.55,0.45-1,1-1h2V1H4C2.35,1,1,2.35,1,4v2h2V4z"/>
	<path d="M20,3c0.55,0,1,0.45,1,1v2h2V4c0-1.65-1.35-3-3-3h-2v2H20z"/>
	<path d="M4,21c-0.55,0-1-0.45-1-1v-2H1v2c0,1.65,1.35,3,3,3h2v-2H4z"/>
	<path d="M20,21c0.55,0,1-0.45,1-1v-2h2v2c0,1.65-1.35,3-3,3h-2v-2H20z"/>
	<g>
		<path d="M18.25,7.6l-5.5-3.18c-0.46-0.27-1.04-0.27-1.5,0L5.75,7.6C5.29,7.87,5,8.36,5,8.9v6.35c0,0.54,0.29,1.03,0.75,1.3
			l5.5,3.18c0.46,0.27,1.04,0.27,1.5,0l5.5-3.18c0.46-0.27,0.75-0.76,0.75-1.3V8.9C19,8.36,18.71,7.87,18.25,7.6z M7,14.96v-4.62
			l4,2.32v4.61L7,14.96z M12,10.93L8,8.61l4-2.31l4,2.31L12,10.93z M13,17.27v-4.61l4-2.32v4.62L13,17.27z"/>
	</g>
</g>
</svg>`;/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tU=e$`
<style>
:host {
  display: block;
  position: relative;
  contain: strict;
  width: 300px;
  height: 150px;
}

.container {
  position: relative;
  overflow: hidden;
}

.userInput {
  width: 100%;
  height: 100%;
  display: none;
  position: relative;
  outline-offset: -1px;
  outline-width: 1px;
}

canvas {
  position: absolute;
  display: none;
  pointer-events: none;
  /* NOTE(cdata): Chrome 76 and below apparently have a bug
   * that causes our canvas not to display pixels unless it is
   * on its own render layer
   * @see https://github.com/google/model-viewer/pull/755#issuecomment-536597893
   */
  transform: translateZ(0);
}

.show {
  display: block;
}

/* Adapted from HTML5 Boilerplate
 *
 * @see https://github.com/h5bp/html5-boilerplate/blob/ceb4620c78fc82e13534fc44202a3f168754873f/dist/css/main.css#L122-L133 */
.screen-reader-only {
  border: 0;
  left: 0;
  top: 0;
  clip: rect(0, 0, 0, 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  white-space: nowrap;
  width: 1px;
  pointer-events: none;
}

.slot {
  position: absolute;
  pointer-events: none;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.slot > * {
  pointer-events: initial;
}

.annotation-wrapper ::slotted(*) {
  opacity: var(--max-hotspot-opacity, 1);
  transition: opacity 0.3s;
}

.pointer-tumbling .annotation-wrapper ::slotted(*) {
  pointer-events: none;
}

.annotation-wrapper ::slotted(*) {
  pointer-events: initial;
}

.annotation-wrapper.hide ::slotted(*) {
  opacity: var(--min-hotspot-opacity, 0.25);
}

.slot.poster {
  display: none;
  background-color: inherit;
}

.slot.poster.show {
  display: inherit;
}

.slot.poster > * {
  pointer-events: initial;
}

.slot.poster:not(.show) > * {
  pointer-events: none;
}

#default-poster {
  width: 100%;
  height: 100%;
  /* The default poster is a <button> so we need to set display
   * to prevent it from being affected by text-align: */
  display: block;
  position: absolute;
  border: none;
  padding: 0;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  background-color: #fff0;
}

#default-progress-bar {
  display: block;
  position: relative;
  width: 100%;
  height: 100%;
  pointer-events: none;
  overflow: hidden;
}

#default-progress-bar > .bar {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--progress-bar-height, 5px);
  background-color: var(--progress-bar-color, rgba(0, 0, 0, 0.4));
  transition: transform 0.09s;
  transform-origin: top left;
  transform: scaleX(0);
  overflow: hidden;
}

#default-progress-bar > .bar.hide {
  transition: opacity 0.3s 1s;
  opacity: 0;
}

.centered {
  align-items: center;
  justify-content: center;
}

.cover {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.slot.interaction-prompt {
  display: var(--interaction-prompt-display, flex);
  overflow: hidden;
  opacity: 0;
  will-change: opacity;
  transition: opacity 0.3s;
}

.slot.interaction-prompt.visible {
  opacity: 1;
}

.animated-container {
  will-change: transform, opacity;
  opacity: 0;
  transition: opacity 0.3s;
}

.slot.interaction-prompt > * {
  pointer-events: none;
}

.slot.ar-button {
  -moz-user-select: none;
  -webkit-tap-highlight-color: transparent;
  user-select: none;

  display: var(--ar-button-display, block);
}

.slot.ar-button:not(.enabled) {
  display: none;
}

.fab {
  display: flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  width: 40px;
  height: 40px;
  cursor: pointer;
  background-color: #fff;
  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.15);
  border-radius: 100px;
}

.fab > * {
  opacity: 0.87;
}

#default-ar-button {
  position: absolute;
  bottom: 16px;
  right: 16px;
  transform: scale(var(--ar-button-scale, 1));
  transform-origin: bottom right;
}

.slot.pan-target {
  display: block;
  position: absolute;
  width: 0;
  height: 0;
  left: 50%;
  top: 50%;
  transform: translate3d(-50%, -50%, 0);
  background-color: transparent;
  opacity: 0;
  transition: opacity 0.3s;
}

#default-pan-target {
  width: 6px;
  height: 6px;
  border-radius: 6px;
  border: 1px solid white;
  box-shadow: 0px 0px 2px 1px rgba(0, 0, 0, 0.8);
}

.slot.default {
  pointer-events: none;
}

.slot.progress-bar {
  pointer-events: none;
}

.slot.exit-webxr-ar-button {
  pointer-events: none;
}

.slot.exit-webxr-ar-button:not(.enabled) {
  display: none;
}

#default-exit-webxr-ar-button {
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  top: env(safe-area-inset-top, 16px);
  right: 16px;
  width: 40px;
  height: 40px;
  box-sizing: border-box;
}

#default-exit-webxr-ar-button > svg {
  fill: #fff;
}
</style>
<div class="container">
  <div class="userInput" tabindex="0" role="img"
      aria-label="3D model">
      <div class="slot canvas">
        <slot name="canvas">
          <canvas></canvas>
        </slot>
      </div>

  </div>

  <!-- NOTE(cdata): We need to wrap slots because browsers without ShadowDOM
        will have their <slot> elements removed by ShadyCSS -->
  <div class="slot poster">
    <slot name="poster">
      <button type="button" id="default-poster" aria-hidden="true" aria-label="Loading 3D model"></button>
    </slot>
  </div>

  <div class="slot ar-button">
    <slot name="ar-button">
      <a id="default-ar-button" part="default-ar-button" class="fab"
          tabindex="2"
          aria-label="View in your space">
        ${tk}
      </a>
    </slot>
  </div>

  <div class="slot pan-target">
    <slot name="pan-target">
      <div id="default-pan-target">
      </div>
    </slot>
  </div>

  <div class="slot interaction-prompt cover centered">
    <div id="prompt" class="animated-container">
      <slot name="interaction-prompt" aria-hidden="true">
        ${tF}
      </slot>
    </div>
  </div>

  <div id="finger0" class="animated-container cover">
    <slot name="finger0" aria-hidden="true">
    </slot>
  </div>
  <div id="finger1" class="animated-container cover">
    <slot name="finger1" aria-hidden="true">
    </slot>
  </div>

  <div class="slot default">
    <slot></slot>

    <div class="slot progress-bar">
      <slot name="progress-bar">
        <div id="default-progress-bar" aria-hidden="true">
          <div class="bar" part="default-progress-bar"></div>
        </div>
      </slot>
    </div>

    <div class="slot exit-webxr-ar-button">
      <slot name="exit-webxr-ar-button">
        <a id="default-exit-webxr-ar-button" part="default-exit-webxr-ar-button"
            tabindex="3"
            aria-label="Exit AR"
            aria-hidden="true">
          ${tL}
        </a>
      </slot>
    </div>
  </div>
</div>
<div class="screen-reader-only" role="region" aria-label="Live announcements">
  <span id="status" role="status"></span>
</div>`,t_=e=>{tr(tU,e)},tN=new WeakMap;class tG extends eu.aNw{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,s){let r=new eu.hH6(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,e=>{this.parse(e,t,s)},i,s)}parse(e,t,i){this.decodeDracoFile(e,t,null,null,eu.KI_).catch(i)}decodeDracoFile(e,t,i,s,r=eu.GUF){let n={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!i,vertexColorSpace:r};return this.decodeGeometry(e,n).then(t)}decodeGeometry(e,t){let i;let s=JSON.stringify(t);if(tN.has(e)){let t=tN.get(e);if(t.key===s)return t.promise;if(0===e.byteLength)throw Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r=this.workerNextTaskID++,n=e.byteLength,a=this._getWorker(r,n).then(s=>(i=s,new Promise((s,n)=>{i._callbacks[r]={resolve:s,reject:n},i.postMessage({type:"decode",id:r,taskConfig:t,buffer:e},[e])}))).then(e=>this._createGeometry(e.geometry));return a.catch(()=>!0).then(()=>{i&&r&&this._releaseTask(i,r)}),tN.set(e,{key:s,promise:a}),a}_createGeometry(e){let t=new eu.u9r;e.index&&t.setIndex(new eu.TlE(e.index.array,1));for(let i=0;i<e.attributes.length;i++){let s=e.attributes[i],r=s.name,n=s.array,a=s.itemSize,o=new eu.TlE(n,a);"color"===r&&(this._assignVertexColorSpace(o,s.vertexColorSpace),o.normalized=n instanceof Float32Array==!1),t.setAttribute(r,o)}return t}_assignVertexColorSpace(e,t){if(t!==eu.KI_)return;let i=new eu.Ilk;for(let t=0,s=e.count;t<s;t++)i.fromBufferAttribute(e,t).convertSRGBToLinear(),e.setXYZ(t,i.r,i.g,i.b)}_loadLibrary(e,t){let i=new eu.hH6(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((t,s)=>{i.load(e,t,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let e="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(t=>{let i=t[0];e||(this.decoderConfig.wasmBinary=t[1]);let s=tP.toString(),r=["/* draco decoder */",i,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([r]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let e=new Worker(this.workerSourceURL);e._callbacks={},e._taskCosts={},e._taskLoad=0,e.postMessage({type:"init",decoderConfig:this.decoderConfig}),e.onmessage=function(t){let i=t.data;switch(i.type){case"decode":e._callbacks[i.id].resolve(i);break;case"error":e._callbacks[i.id].reject(i);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+i.type+'"')}},this.workerPool.push(e)}else this.workerPool.sort(function(e,t){return e._taskLoad>t._taskLoad?-1:1});let i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,""!==this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),this}}function tP(){let e,t;onmessage=function(i){let s=i.data;switch(s.type){case"init":e=s.decoderConfig,t=new Promise(function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)});break;case"decode":let r=s.buffer,n=s.taskConfig;t.then(e=>{let t=e.draco,i=new t.Decoder;try{let e=function(e,t,i,s){let r,n;let a=s.attributeIDs,o=s.attributeTypes,A=t.GetEncodedGeometryType(i);if(A===e.TRIANGULAR_MESH)r=new e.Mesh,n=t.DecodeArrayToMesh(i,i.byteLength,r);else if(A===e.POINT_CLOUD)r=new e.PointCloud,n=t.DecodeArrayToPointCloud(i,i.byteLength,r);else throw Error("THREE.DRACOLoader: Unexpected geometry type.");if(!n.ok()||0===r.ptr)throw Error("THREE.DRACOLoader: Decoding failed: "+n.error_msg());let l={index:null,attributes:[]};for(let i in a){let n,A;let h=self[o[i]];if(s.useUniqueIDs)A=a[i],n=t.GetAttributeByUniqueId(r,A);else{if(-1===(A=t.GetAttributeId(r,e[a[i]])))continue;n=t.GetAttribute(r,A)}let u=function(e,t,i,s,r,n){let a=n.num_components(),o=i.num_points()*a,A=o*r.BYTES_PER_ELEMENT,l=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,r),h=e._malloc(A);t.GetAttributeDataArrayForAllPoints(i,n,l,A,h);let u=new r(e.HEAPF32.buffer,h,o).slice();return e._free(h),{name:s,array:u,itemSize:a}}(e,t,r,i,h,n);"color"===i&&(u.vertexColorSpace=s.vertexColorSpace),l.attributes.push(u)}return A===e.TRIANGULAR_MESH&&(l.index=function(e,t,i){let s=3*i.num_faces(),r=4*s,n=e._malloc(r);t.GetTrianglesUInt32Array(i,r,n);let a=new Uint32Array(e.HEAPF32.buffer,n,s).slice();return e._free(n),{array:a,itemSize:1}}(e,t,r)),e.destroy(r),l}(t,i,new Int8Array(r),n),a=e.attributes.map(e=>e.array.buffer);e.index&&a.push(e.index.array.buffer),self.postMessage({type:"decode",id:s.id,geometry:e},a)}catch(e){console.error(e),self.postMessage({type:"error",id:s.id,error:e.message})}finally{t.destroy(i)}})}}}function tO(e,t){if(t===eu.WwZ)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t!==eu.z$h&&t!==eu.UlW)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e;{let i=e.getIndex();if(null===i){let t=[],s=e.getAttribute("position");if(void 0===s)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<s.count;e++)t.push(e);e.setIndex(t),i=e.getIndex()}let s=i.count-2,r=[];if(t===eu.z$h)for(let e=1;e<=s;e++)r.push(i.getX(0)),r.push(i.getX(e)),r.push(i.getX(e+1));else for(let e=0;e<s;e++)e%2==0?(r.push(i.getX(e)),r.push(i.getX(e+1)),r.push(i.getX(e+2))):(r.push(i.getX(e+2)),r.push(i.getX(e+1)),r.push(i.getX(e)));r.length/3!==s&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");let n=e.clone();return n.setIndex(r),n.clearGroups(),n}}class tH extends eu.aNw{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new tj(e)}),this.register(function(e){return new t2(e)}),this.register(function(e){return new t3(e)}),this.register(function(e){return new t8(e)}),this.register(function(e){return new t$(e)}),this.register(function(e){return new tW(e)}),this.register(function(e){return new tX(e)}),this.register(function(e){return new tZ(e)}),this.register(function(e){return new tY(e)}),this.register(function(e){return new t0(e)}),this.register(function(e){return new tz(e)}),this.register(function(e){return new t1(e)}),this.register(function(e){return new tV(e)}),this.register(function(e){return new t4(e)}),this.register(function(e){return new t5(e)})}load(e,t,i,s){let r;let n=this;r=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:eu.Zp0.extractUrlBase(e),this.manager.itemStart(e);let a=function(t){s?s(t):console.error(t),n.manager.itemError(e),n.manager.itemEnd(e)},o=new eu.hH6(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(i){try{n.parse(i,r,function(i){t(i),n.manager.itemEnd(e)},a)}catch(e){a(e)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return -1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return -1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,s){let r;let n={},a={},o=new TextDecoder;if("string"==typeof e)r=JSON.parse(e);else if(e instanceof ArrayBuffer){if(o.decode(new Uint8Array(e,0,4))===t6){try{n[tK.KHR_BINARY_GLTF]=new t7(e)}catch(e){s&&s(e);return}r=JSON.parse(n[tK.KHR_BINARY_GLTF].content)}else r=JSON.parse(o.decode(e))}else r=e;if(void 0===r.asset||r.asset.version[0]<2){s&&s(Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}let A=new iy(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});A.fileLoader.setRequestHeader(this.requestHeader);for(let e=0;e<this.pluginCallbacks.length;e++){let t=this.pluginCallbacks[e](A);a[t.name]=t,n[t.name]=!0}if(r.extensionsUsed)for(let e=0;e<r.extensionsUsed.length;++e){let t=r.extensionsUsed[e],i=r.extensionsRequired||[];switch(t){case tK.KHR_MATERIALS_UNLIT:n[t]=new tJ;break;case tK.KHR_DRACO_MESH_COMPRESSION:n[t]=new ie(r,this.dracoLoader);break;case tK.KHR_TEXTURE_TRANSFORM:n[t]=new it;break;case tK.KHR_MESH_QUANTIZATION:n[t]=new ii;break;default:i.indexOf(t)>=0&&void 0===a[t]&&console.warn('THREE.GLTFLoader: Unknown extension "'+t+'".')}}A.setExtensions(n),A.setPlugins(a),A.parse(i,s)}parseAsync(e,t){let i=this;return new Promise(function(s,r){i.parse(e,t,s,r)})}}function tq(){let e={};return{get:function(t){return e[t]},add:function(t,i){e[t]=i},remove:function(t){delete e[t]},removeAll:function(){e={}}}}let tK={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class tV{constructor(e){this.parser=e,this.name=tK.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){let e=this.parser,t=this.parser.json.nodes||[];for(let i=0,s=t.length;i<s;i++){let s=t[i];s.extensions&&s.extensions[this.name]&&void 0!==s.extensions[this.name].light&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){let t;let i=this.parser,s="light:"+e,r=i.cache.get(s);if(r)return r;let n=i.json,a=((n.extensions&&n.extensions[this.name]||{}).lights||[])[e],o=new eu.Ilk(16777215);void 0!==a.color&&o.fromArray(a.color);let A=void 0!==a.range?a.range:0;switch(a.type){case"directional":(t=new eu.Ox3(o)).target.position.set(0,0,-1),t.add(t.target);break;case"point":(t=new eu.cek(o)).distance=A;break;case"spot":(t=new eu.PMe(o)).distance=A,a.spot=a.spot||{},a.spot.innerConeAngle=void 0!==a.spot.innerConeAngle?a.spot.innerConeAngle:0,a.spot.outerConeAngle=void 0!==a.spot.outerConeAngle?a.spot.outerConeAngle:Math.PI/4,t.angle=a.spot.outerConeAngle,t.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,t.target.position.set(0,0,-1),t.add(t.target);break;default:throw Error("THREE.GLTFLoader: Unexpected light type: "+a.type)}return t.position.set(0,0,0),t.decay=2,iI(t,a),void 0!==a.intensity&&(t.intensity=a.intensity),t.name=i.createUniqueName(a.name||"light_"+e),r=Promise.resolve(t),i.cache.add(s,r),r}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){let t=this,i=this.parser,s=i.json.nodes[e],r=(s.extensions&&s.extensions[this.name]||{}).light;return void 0===r?null:this._loadLight(r).then(function(e){return i._getNodeRef(t.cache,r,e)})}}class tJ{constructor(){this.name=tK.KHR_MATERIALS_UNLIT}getMaterialType(){return eu.vBJ}extendParams(e,t,i){let s=[];e.color=new eu.Ilk(1,1,1),e.opacity=1;let r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){let t=r.baseColorFactor;e.color.fromArray(t),e.opacity=t[3]}void 0!==r.baseColorTexture&&s.push(i.assignTexture(e,"map",r.baseColorTexture,eu.KI_))}return Promise.all(s)}}class tY{constructor(e){this.parser=e,this.name=tK.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){let i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let s=i.extensions[this.name].emissiveStrength;return void 0!==s&&(t.emissiveIntensity=s),Promise.resolve()}}class tj{constructor(e){this.parser=e,this.name=tK.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?eu.EJi:null}extendMaterialParams(e,t){let i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();let r=[],n=s.extensions[this.name];if(void 0!==n.clearcoatFactor&&(t.clearcoat=n.clearcoatFactor),void 0!==n.clearcoatTexture&&r.push(i.assignTexture(t,"clearcoatMap",n.clearcoatTexture)),void 0!==n.clearcoatRoughnessFactor&&(t.clearcoatRoughness=n.clearcoatRoughnessFactor),void 0!==n.clearcoatRoughnessTexture&&r.push(i.assignTexture(t,"clearcoatRoughnessMap",n.clearcoatRoughnessTexture)),void 0!==n.clearcoatNormalTexture&&(r.push(i.assignTexture(t,"clearcoatNormalMap",n.clearcoatNormalTexture)),void 0!==n.clearcoatNormalTexture.scale)){let e=n.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new eu.FM8(e,e)}return Promise.all(r)}}class tz{constructor(e){this.parser=e,this.name=tK.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?eu.EJi:null}extendMaterialParams(e,t){let i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();let r=[],n=s.extensions[this.name];return void 0!==n.iridescenceFactor&&(t.iridescence=n.iridescenceFactor),void 0!==n.iridescenceTexture&&r.push(i.assignTexture(t,"iridescenceMap",n.iridescenceTexture)),void 0!==n.iridescenceIor&&(t.iridescenceIOR=n.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==n.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=n.iridescenceThicknessMinimum),void 0!==n.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=n.iridescenceThicknessMaximum),void 0!==n.iridescenceThicknessTexture&&r.push(i.assignTexture(t,"iridescenceThicknessMap",n.iridescenceThicknessTexture)),Promise.all(r)}}class t${constructor(e){this.parser=e,this.name=tK.KHR_MATERIALS_SHEEN}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?eu.EJi:null}extendMaterialParams(e,t){let i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();let r=[];t.sheenColor=new eu.Ilk(0,0,0),t.sheenRoughness=0,t.sheen=1;let n=s.extensions[this.name];return void 0!==n.sheenColorFactor&&t.sheenColor.fromArray(n.sheenColorFactor),void 0!==n.sheenRoughnessFactor&&(t.sheenRoughness=n.sheenRoughnessFactor),void 0!==n.sheenColorTexture&&r.push(i.assignTexture(t,"sheenColorMap",n.sheenColorTexture,eu.KI_)),void 0!==n.sheenRoughnessTexture&&r.push(i.assignTexture(t,"sheenRoughnessMap",n.sheenRoughnessTexture)),Promise.all(r)}}class tW{constructor(e){this.parser=e,this.name=tK.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?eu.EJi:null}extendMaterialParams(e,t){let i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();let r=[],n=s.extensions[this.name];return void 0!==n.transmissionFactor&&(t.transmission=n.transmissionFactor),void 0!==n.transmissionTexture&&r.push(i.assignTexture(t,"transmissionMap",n.transmissionTexture)),Promise.all(r)}}class tX{constructor(e){this.parser=e,this.name=tK.KHR_MATERIALS_VOLUME}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?eu.EJi:null}extendMaterialParams(e,t){let i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();let r=[],n=s.extensions[this.name];t.thickness=void 0!==n.thicknessFactor?n.thicknessFactor:0,void 0!==n.thicknessTexture&&r.push(i.assignTexture(t,"thicknessMap",n.thicknessTexture)),t.attenuationDistance=n.attenuationDistance||1/0;let a=n.attenuationColor||[1,1,1];return t.attenuationColor=new eu.Ilk(a[0],a[1],a[2]),Promise.all(r)}}class tZ{constructor(e){this.parser=e,this.name=tK.KHR_MATERIALS_IOR}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?eu.EJi:null}extendMaterialParams(e,t){let i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let s=i.extensions[this.name];return t.ior=void 0!==s.ior?s.ior:1.5,Promise.resolve()}}class t0{constructor(e){this.parser=e,this.name=tK.KHR_MATERIALS_SPECULAR}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?eu.EJi:null}extendMaterialParams(e,t){let i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();let r=[],n=s.extensions[this.name];t.specularIntensity=void 0!==n.specularFactor?n.specularFactor:1,void 0!==n.specularTexture&&r.push(i.assignTexture(t,"specularIntensityMap",n.specularTexture));let a=n.specularColorFactor||[1,1,1];return t.specularColor=new eu.Ilk(a[0],a[1],a[2]),void 0!==n.specularColorTexture&&r.push(i.assignTexture(t,"specularColorMap",n.specularColorTexture,eu.KI_)),Promise.all(r)}}class t1{constructor(e){this.parser=e,this.name=tK.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?eu.EJi:null}extendMaterialParams(e,t){let i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();let r=[],n=s.extensions[this.name];return void 0!==n.anisotropyStrength&&(t.anisotropy=n.anisotropyStrength),void 0!==n.anisotropyRotation&&(t.anisotropyRotation=n.anisotropyRotation),void 0!==n.anisotropyTexture&&r.push(i.assignTexture(t,"anisotropyMap",n.anisotropyTexture)),Promise.all(r)}}class t2{constructor(e){this.parser=e,this.name=tK.KHR_TEXTURE_BASISU}loadTexture(e){let t=this.parser,i=t.json,s=i.textures[e];if(!s.extensions||!s.extensions[this.name])return null;let r=s.extensions[this.name],n=t.options.ktx2Loader;if(!n){if(!(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0))return null;throw Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures")}return t.loadTextureImage(e,r.source,n)}}class t3{constructor(e){this.parser=e,this.name=tK.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){let t=this.name,i=this.parser,s=i.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;let n=r.extensions[t],a=s.images[n.source],o=i.textureLoader;if(a.uri){let e=i.options.manager.getHandler(a.uri);null!==e&&(o=e)}return this.detectSupport().then(function(r){if(r)return i.loadTextureImage(e,n.source,o);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){let t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class t8{constructor(e){this.parser=e,this.name=tK.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){let t=this.name,i=this.parser,s=i.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;let n=r.extensions[t],a=s.images[n.source],o=i.textureLoader;if(a.uri){let e=i.options.manager.getHandler(a.uri);null!==e&&(o=e)}return this.detectSupport().then(function(r){if(r)return i.loadTextureImage(e,n.source,o);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){let t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class t4{constructor(e){this.name=tK.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){let t=this.parser.json,i=t.bufferViews[e];if(!i.extensions||!i.extensions[this.name])return null;{let e=i.extensions[this.name],s=this.parser.getDependency("buffer",e.buffer),r=this.parser.options.meshoptDecoder;if(!r||!r.supported){if(!(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0))return null;throw Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files")}return s.then(function(t){let i=e.byteOffset||0,s=e.byteLength||0,n=e.count,a=e.byteStride,o=new Uint8Array(t,i,s);return r.decodeGltfBufferAsync?r.decodeGltfBufferAsync(n,a,o,e.mode,e.filter).then(function(e){return e.buffer}):r.ready.then(function(){let t=new ArrayBuffer(n*a);return r.decodeGltfBuffer(new Uint8Array(t),n,a,o,e.mode,e.filter),t})})}}}class t5{constructor(e){this.name=tK.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){let t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||void 0===i.mesh)return null;for(let e of t.meshes[i.mesh].primitives)if(e.mode!==io.TRIANGLES&&e.mode!==io.TRIANGLE_STRIP&&e.mode!==io.TRIANGLE_FAN&&void 0!==e.mode)return null;let s=i.extensions[this.name].attributes,r=[],n={};for(let e in s)r.push(this.parser.getDependency("accessor",s[e]).then(t=>(n[e]=t,n[e])));return r.length<1?null:(r.push(this.parser.createNodeMesh(e)),Promise.all(r).then(e=>{let t=e.pop(),i=t.isGroup?t.children:[t],s=e[0].count,r=[];for(let e of i){let t=new eu.yGw,i=new eu.Pa4,a=new eu._fP,o=new eu.Pa4(1,1,1),A=new eu.SPe(e.geometry,e.material,s);for(let e=0;e<s;e++)n.TRANSLATION&&i.fromBufferAttribute(n.TRANSLATION,e),n.ROTATION&&a.fromBufferAttribute(n.ROTATION,e),n.SCALE&&o.fromBufferAttribute(n.SCALE,e),A.setMatrixAt(e,t.compose(i,a,o));for(let t in n)"TRANSLATION"!==t&&"ROTATION"!==t&&"SCALE"!==t&&e.geometry.setAttribute(t,n[t]);eu.Tme.prototype.copy.call(A,e),this.parser.assignFinalMaterial(A),r.push(A)}return t.isGroup?(t.clear(),t.add(...r),t):r[0]}))}}let t6="glTF",t9={JSON:1313821514,BIN:5130562};class t7{constructor(e){this.name=tK.KHR_BINARY_GLTF,this.content=null,this.body=null;let t=new DataView(e,0,12),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==t6)throw Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw Error("THREE.GLTFLoader: Legacy binary file detected.");let s=this.header.length-12,r=new DataView(e,12),n=0;for(;n<s;){let t=r.getUint32(n,!0);n+=4;let s=r.getUint32(n,!0);if(n+=4,s===t9.JSON){let s=new Uint8Array(e,12+n,t);this.content=i.decode(s)}else if(s===t9.BIN){let i=12+n;this.body=e.slice(i,i+t)}n+=t}if(null===this.content)throw Error("THREE.GLTFLoader: JSON content not found.")}}class ie{constructor(e,t){if(!t)throw Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=tK.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){let i=this.json,s=this.dracoLoader,r=e.extensions[this.name].bufferView,n=e.extensions[this.name].attributes,a={},o={},A={};for(let e in n)a[ic[e]||e.toLowerCase()]=n[e];for(let t in e.attributes){let s=ic[t]||t.toLowerCase();if(void 0!==n[t]){let r=i.accessors[e.attributes[t]],n=iA[r.componentType];A[s]=n.name,o[s]=!0===r.normalized}}return t.getDependency("bufferView",r).then(function(e){return new Promise(function(t){s.decodeDracoFile(e,function(e){for(let t in e.attributes){let i=e.attributes[t],s=o[t];void 0!==s&&(i.normalized=s)}t(e)},a,A)})})}}class it{constructor(){this.name=tK.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(void 0===t.texCoord||t.texCoord===e.channel)&&void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class ii{constructor(){this.name=tK.KHR_MESH_QUANTIZATION}}class is extends eu._C8{constructor(e,t,i,s){super(e,t,i,s)}copySampleValue_(e){let t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,r=e*s*3+s;for(let e=0;e!==s;e++)t[e]=i[r+e];return t}interpolate_(e,t,i,s){let r=this.resultBuffer,n=this.sampleValues,a=this.valueSize,o=2*a,A=3*a,l=s-t,h=(i-t)/l,u=h*h,c=u*h,g=e*A,d=g-A,p=-2*c+3*u,m=c-u,f=1-p,I=m-u+h;for(let e=0;e!==a;e++){let t=n[d+e+a],i=n[d+e+o]*l,s=n[g+e+a],A=n[g+e]*l;r[e]=f*t+I*i+p*s+m*A}return r}}let ir=new eu._fP;class ia extends is{interpolate_(e,t,i,s){let r=super.interpolate_(e,t,i,s);return ir.fromArray(r).normalize().toArray(r),r}}let io={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},iA={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},il={9728:eu.TyD,9729:eu.wem,9984:eu.YLQ,9985:eu.qyh,9986:eu.aH4,9987:eu.D1R},ih={33071:eu.uWy,33648:eu.OoA,10497:eu.rpg},iu={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ic={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ig={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},id={CUBICSPLINE:void 0,LINEAR:eu.NMF,STEP:eu.Syv},ip={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function im(e,t,i){for(let s in i.extensions)void 0===e[s]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[s]=i.extensions[s])}function iI(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function iE(e){let t="",i=Object.keys(e).sort();for(let s=0,r=i.length;s<r;s++)t+=i[s]+":"+e[i[s]]+";";return t}function iC(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}let iB=new eu.yGw;class iy{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new tq,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,s=!1,r=-1;"undefined"!=typeof navigator&&(i=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=(s=navigator.userAgent.indexOf("Firefox")>-1)?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"==typeof createImageBitmap||i||s&&r<98?this.textureLoader=new eu.dpR(this.options.manager):this.textureLoader=new eu.QRU(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new eu.hH6(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){let i=this,s=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(e){return e._markDefs&&e._markDefs()}),Promise.all(this._invokeAll(function(e){return e.beforeRoot&&e.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(t){let n={scene:t[0][s.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:s.asset,parser:i,userData:{}};im(r,n,s),iI(n,s),Promise.all(i._invokeAll(function(e){return e.afterRoot&&e.afterRoot(n)})).then(function(){e(n)})}).catch(t)}_markDefs(){let e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){let s=t[i].joints;for(let t=0,i=s.length;t<i;t++)e[s[t]].isBone=!0}for(let t=0,s=e.length;t<s;t++){let s=e[t];void 0!==s.mesh&&(this._addNodeRef(this.meshCache,s.mesh),void 0!==s.skin&&(i[s.mesh].isSkinnedMesh=!0)),void 0!==s.camera&&this._addNodeRef(this.cameraCache,s.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;let s=i.clone(),r=(e,t)=>{let i=this.associations.get(e);for(let[s,n]of(null!=i&&this.associations.set(t,i),e.children.entries()))r(n,t.children[s])};return r(i,s),s.name+="_instance_"+e.uses[t]++,s}_invokeOne(e){let t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){let s=e(t[i]);if(s)return s}return null}_invokeAll(e){let t=Object.values(this.plugins);t.unshift(this);let i=[];for(let s=0;s<t.length;s++){let r=e(t[s]);r&&i.push(r)}return i}getDependency(e,t){let i=e+":"+t,s=this.cache.get(i);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this._invokeOne(function(e){return e.loadNode&&e.loadNode(t)});break;case"mesh":s=this._invokeOne(function(e){return e.loadMesh&&e.loadMesh(t)});break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne(function(e){return e.loadBufferView&&e.loadBufferView(t)});break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne(function(e){return e.loadMaterial&&e.loadMaterial(t)});break;case"texture":s=this._invokeOne(function(e){return e.loadTexture&&e.loadTexture(t)});break;case"skin":s=this.loadSkin(t);break;case"animation":s=this._invokeOne(function(e){return e.loadAnimation&&e.loadAnimation(t)});break;case"camera":s=this.loadCamera(t);break;default:if(!(s=this._invokeOne(function(i){return i!=this&&i.getDependency&&i.getDependency(e,t)})))throw Error("Unknown type: "+e)}this.cache.add(i,s)}return s}getDependencies(e){let t=this.cache.get(e);if(!t){let i=this;t=Promise.all((this.json[e+("mesh"===e?"es":"s")]||[]).map(function(t,s){return i.getDependency(e,s)})),this.cache.add(e,t)}return t}loadBuffer(e){let t=this.json.buffers[e],i=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[tK.KHR_BINARY_GLTF].body);let s=this.options;return new Promise(function(e,r){i.load(eu.Zp0.resolveURL(t.uri,s.path),e,void 0,function(){r(Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){let t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(e){let i=t.byteLength||0,s=t.byteOffset||0;return e.slice(s,s+i)})}loadAccessor(e){let t=this,i=this.json,s=this.json.accessors[e];if(void 0===s.bufferView&&void 0===s.sparse){let e=iu[s.type],t=iA[s.componentType],i=!0===s.normalized,r=new t(s.count*e);return Promise.resolve(new eu.TlE(r,e,i))}let r=[];return void 0!==s.bufferView?r.push(this.getDependency("bufferView",s.bufferView)):r.push(null),void 0!==s.sparse&&(r.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(r).then(function(e){let r,n;let a=e[0],o=iu[s.type],A=iA[s.componentType],l=A.BYTES_PER_ELEMENT,h=l*o,u=s.byteOffset||0,c=void 0!==s.bufferView?i.bufferViews[s.bufferView].byteStride:void 0,g=!0===s.normalized;if(c&&c!==h){let e=Math.floor(u/c),i="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+e+":"+s.count,h=t.cache.get(i);h||(r=new A(a,e*c,s.count*c/l),h=new eu.vpT(r,c/l),t.cache.add(i,h)),n=new eu.kB5(h,o,u%c/l,g)}else r=null===a?new A(s.count*o):new A(a,u,s.count*o),n=new eu.TlE(r,o,g);if(void 0!==s.sparse){let t=iu.SCALAR,i=iA[s.sparse.indices.componentType],r=s.sparse.indices.byteOffset||0,l=s.sparse.values.byteOffset||0,h=new i(e[1],r,s.sparse.count*t),u=new A(e[2],l,s.sparse.count*o);null!==a&&(n=new eu.TlE(n.array.slice(),n.itemSize,n.normalized));for(let e=0,t=h.length;e<t;e++){let t=h[e];if(n.setX(t,u[e*o]),o>=2&&n.setY(t,u[e*o+1]),o>=3&&n.setZ(t,u[e*o+2]),o>=4&&n.setW(t,u[e*o+3]),o>=5)throw Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return n})}loadTexture(e){let t=this.json,i=this.options,s=t.textures[e].source,r=t.images[s],n=this.textureLoader;if(r.uri){let e=i.manager.getHandler(r.uri);null!==e&&(n=e)}return this.loadTextureImage(e,s,n)}loadTextureImage(e,t,i){let s=this,r=this.json,n=r.textures[e],a=r.images[t],o=(a.uri||a.bufferView)+":"+n.sampler;if(this.textureCache[o])return this.textureCache[o];let A=this.loadImageSource(t,i).then(function(t){t.flipY=!1,t.name=n.name||a.name||"",""===t.name&&"string"==typeof a.uri&&!1===a.uri.startsWith("data:image/")&&(t.name=a.uri);let i=(r.samplers||{})[n.sampler]||{};return t.magFilter=il[i.magFilter]||eu.wem,t.minFilter=il[i.minFilter]||eu.D1R,t.wrapS=ih[i.wrapS]||eu.rpg,t.wrapT=ih[i.wrapT]||eu.rpg,s.associations.set(t,{textures:e}),t}).catch(function(){return null});return this.textureCache[o]=A,A}loadImageSource(e,t){let i=this.json,s=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(e=>e.clone());let r=i.images[e],n=self.URL||self.webkitURL,a=r.uri||"",o=!1;if(void 0!==r.bufferView)a=this.getDependency("bufferView",r.bufferView).then(function(e){o=!0;let t=new Blob([e],{type:r.mimeType});return a=n.createObjectURL(t)});else if(void 0===r.uri)throw Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");let A=Promise.resolve(a).then(function(e){return new Promise(function(i,r){let n=i;!0===t.isImageBitmapLoader&&(n=function(e){let t=new eu.xEZ(e);t.needsUpdate=!0,i(t)}),t.load(eu.Zp0.resolveURL(e,s.path),n,void 0,r)})}).then(function(e){var t;return!0===o&&n.revokeObjectURL(a),e.userData.mimeType=r.mimeType||((t=r.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e}).catch(function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",a),e});return this.sourceCache[e]=A,A}assignTexture(e,t,i,s){let r=this;return this.getDependency("texture",i.index).then(function(n){if(!n)return null;if(void 0!==i.texCoord&&i.texCoord>0&&((n=n.clone()).channel=i.texCoord),r.extensions[tK.KHR_TEXTURE_TRANSFORM]){let e=void 0!==i.extensions?i.extensions[tK.KHR_TEXTURE_TRANSFORM]:void 0;if(e){let t=r.associations.get(n);n=r.extensions[tK.KHR_TEXTURE_TRANSFORM].extendTexture(n,e),r.associations.set(n,t)}}return void 0!==s&&(n.colorSpace=s),e[t]=n,n})}assignFinalMaterial(e){let t=e.geometry,i=e.material,s=void 0===t.attributes.tangent,r=void 0!==t.attributes.color,n=void 0===t.attributes.normal;if(e.isPoints){let e="PointsMaterial:"+i.uuid,t=this.cache.get(e);t||(t=new eu.UY4,eu.F5T.prototype.copy.call(t,i),t.color.copy(i.color),t.map=i.map,t.sizeAttenuation=!1,this.cache.add(e,t)),i=t}else if(e.isLine){let e="LineBasicMaterial:"+i.uuid,t=this.cache.get(e);t||(t=new eu.nls,eu.F5T.prototype.copy.call(t,i),t.color.copy(i.color),t.map=i.map,this.cache.add(e,t)),i=t}if(s||r||n){let e="ClonedMaterial:"+i.uuid+":";s&&(e+="derivative-tangents:"),r&&(e+="vertex-colors:"),n&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=i.clone(),r&&(t.vertexColors=!0),n&&(t.flatShading=!0),s&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(i))),i=t}e.material=i}getMaterialType(){return eu.Wid}loadMaterial(e){let t;let i=this,s=this.json,r=this.extensions,n=s.materials[e],a={},o=n.extensions||{},A=[];if(o[tK.KHR_MATERIALS_UNLIT]){let e=r[tK.KHR_MATERIALS_UNLIT];t=e.getMaterialType(),A.push(e.extendParams(a,n,i))}else{let s=n.pbrMetallicRoughness||{};if(a.color=new eu.Ilk(1,1,1),a.opacity=1,Array.isArray(s.baseColorFactor)){let e=s.baseColorFactor;a.color.fromArray(e),a.opacity=e[3]}void 0!==s.baseColorTexture&&A.push(i.assignTexture(a,"map",s.baseColorTexture,eu.KI_)),a.metalness=void 0!==s.metallicFactor?s.metallicFactor:1,a.roughness=void 0!==s.roughnessFactor?s.roughnessFactor:1,void 0!==s.metallicRoughnessTexture&&(A.push(i.assignTexture(a,"metalnessMap",s.metallicRoughnessTexture)),A.push(i.assignTexture(a,"roughnessMap",s.metallicRoughnessTexture))),t=this._invokeOne(function(t){return t.getMaterialType&&t.getMaterialType(e)}),A.push(Promise.all(this._invokeAll(function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,a)})))}!0===n.doubleSided&&(a.side=eu.ehD);let l=n.alphaMode||ip.OPAQUE;if(l===ip.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,l===ip.MASK&&(a.alphaTest=void 0!==n.alphaCutoff?n.alphaCutoff:.5)),void 0!==n.normalTexture&&t!==eu.vBJ&&(A.push(i.assignTexture(a,"normalMap",n.normalTexture)),a.normalScale=new eu.FM8(1,1),void 0!==n.normalTexture.scale)){let e=n.normalTexture.scale;a.normalScale.set(e,e)}return void 0!==n.occlusionTexture&&t!==eu.vBJ&&(A.push(i.assignTexture(a,"aoMap",n.occlusionTexture)),void 0!==n.occlusionTexture.strength&&(a.aoMapIntensity=n.occlusionTexture.strength)),void 0!==n.emissiveFactor&&t!==eu.vBJ&&(a.emissive=new eu.Ilk().fromArray(n.emissiveFactor)),void 0!==n.emissiveTexture&&t!==eu.vBJ&&A.push(i.assignTexture(a,"emissiveMap",n.emissiveTexture,eu.KI_)),Promise.all(A).then(function(){let s=new t(a);return n.name&&(s.name=n.name),iI(s,n),i.associations.set(s,{materials:e}),n.extensions&&im(r,s,n),s})}createUniqueName(e){let t=eu.iUV.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){let t=this,i=this.extensions,s=this.primitiveCache,r=[];for(let n=0,a=e.length;n<a;n++){let a=e[n],o=function(e){let t;let i=e.extensions&&e.extensions[tK.KHR_DRACO_MESH_COMPRESSION];if(t=i?"draco:"+i.bufferView+":"+i.indices+":"+iE(i.attributes):e.indices+":"+iE(e.attributes)+":"+e.mode,void 0!==e.targets)for(let i=0,s=e.targets.length;i<s;i++)t+=":"+iE(e.targets[i]);return t}(a),A=s[o];if(A)r.push(A.promise);else{let e;e=a.extensions&&a.extensions[tK.KHR_DRACO_MESH_COMPRESSION]?function(e){return i[tK.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then(function(i){return iw(i,e,t)})}(a):iw(new eu.u9r,a,t),s[o]={primitive:a,promise:e},r.push(e)}}return Promise.all(r)}loadMesh(e){let t=this,i=this.json,s=this.extensions,r=i.meshes[e],n=r.primitives,a=[];for(let e=0,t=n.length;e<t;e++){var o;let t=void 0===n[e].material?(void 0===(o=this.cache).DefaultMaterial&&(o.DefaultMaterial=new eu.Wid({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:eu.Wl3})),o.DefaultMaterial):this.getDependency("material",n[e].material);a.push(t)}return a.push(t.loadGeometries(n)),Promise.all(a).then(function(i){let a=i.slice(0,i.length-1),o=i[i.length-1],A=[];for(let i=0,l=o.length;i<l;i++){let l;let h=o[i],u=n[i],c=a[i];if(u.mode===io.TRIANGLES||u.mode===io.TRIANGLE_STRIP||u.mode===io.TRIANGLE_FAN||void 0===u.mode)!0===(l=!0===r.isSkinnedMesh?new eu.TUv(h,c):new eu.Kj0(h,c)).isSkinnedMesh&&l.normalizeSkinWeights(),u.mode===io.TRIANGLE_STRIP?l.geometry=tO(l.geometry,eu.UlW):u.mode===io.TRIANGLE_FAN&&(l.geometry=tO(l.geometry,eu.z$h));else if(u.mode===io.LINES)l=new eu.ejS(h,c);else if(u.mode===io.LINE_STRIP)l=new eu.x12(h,c);else if(u.mode===io.LINE_LOOP)l=new eu.blk(h,c);else if(u.mode===io.POINTS)l=new eu.woe(h,c);else throw Error("THREE.GLTFLoader: Primitive mode unsupported: "+u.mode);Object.keys(l.geometry.morphAttributes).length>0&&function(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let i=0,s=t.weights.length;i<s;i++)e.morphTargetInfluences[i]=t.weights[i];if(t.extras&&Array.isArray(t.extras.targetNames)){let i=t.extras.targetNames;if(e.morphTargetInfluences.length===i.length){e.morphTargetDictionary={};for(let t=0,s=i.length;t<s;t++)e.morphTargetDictionary[i[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}(l,r),l.name=t.createUniqueName(r.name||"mesh_"+e),iI(l,r),u.extensions&&im(s,l,u),t.assignFinalMaterial(l),A.push(l)}for(let i=0,s=A.length;i<s;i++)t.associations.set(A[i],{meshes:e,primitives:i});if(1===A.length)return r.extensions&&im(s,A[0],r),A[0];let l=new eu.ZAu;r.extensions&&im(s,l,r),t.associations.set(l,{meshes:e});for(let e=0,t=A.length;e<t;e++)l.add(A[e]);return l})}loadCamera(e){let t;let i=this.json.cameras[e],s=i[i.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return"perspective"===i.type?t=new eu.cPb(eu.M8C.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):"orthographic"===i.type&&(t=new eu.iKG(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),iI(t,i),Promise.resolve(t)}loadSkin(e){let t=this.json.skins[e],i=[];for(let e=0,s=t.joints.length;e<s;e++)i.push(this._loadNodeShallow(t.joints[e]));return void 0!==t.inverseBindMatrices?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(e){let i=e.pop(),s=[],r=[];for(let n=0,a=e.length;n<a;n++){let a=e[n];if(a){s.push(a);let e=new eu.yGw;null!==i&&e.fromArray(i.array,16*n),r.push(e)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[n])}return new eu.OdW(s,r)})}loadAnimation(e){let t=this.json,i=this,s=t.animations[e],r=s.name?s.name:"animation_"+e,n=[],a=[],o=[],A=[],l=[];for(let e=0,t=s.channels.length;e<t;e++){let t=s.channels[e],i=s.samplers[t.sampler],r=t.target,h=r.node,u=void 0!==s.parameters?s.parameters[i.input]:i.input,c=void 0!==s.parameters?s.parameters[i.output]:i.output;void 0!==r.node&&(n.push(this.getDependency("node",h)),a.push(this.getDependency("accessor",u)),o.push(this.getDependency("accessor",c)),A.push(i),l.push(r))}return Promise.all([Promise.all(n),Promise.all(a),Promise.all(o),Promise.all(A),Promise.all(l)]).then(function(e){let t=e[0],s=e[1],n=e[2],a=e[3],o=e[4],A=[];for(let e=0,r=t.length;e<r;e++){let r=t[e],l=s[e],h=n[e],u=a[e],c=o[e];if(void 0===r)continue;r.updateMatrix&&(r.updateMatrix(),r.matrixAutoUpdate=!0);let g=i._createAnimationTracks(r,l,h,u,c);if(g)for(let e=0;e<g.length;e++)A.push(g[e])}return new eu.m7l(r,void 0,A)})}createNodeMesh(e){let t=this.json,i=this,s=t.nodes[e];return void 0===s.mesh?null:i.getDependency("mesh",s.mesh).then(function(e){let t=i._getNodeRef(i.meshCache,s.mesh,e);return void 0!==s.weights&&t.traverse(function(e){if(e.isMesh)for(let t=0,i=s.weights.length;t<i;t++)e.morphTargetInfluences[t]=s.weights[t]}),t})}loadNode(e){let t=this.json.nodes[e],i=this._loadNodeShallow(e),s=[],r=t.children||[];for(let e=0,t=r.length;e<t;e++)s.push(this.getDependency("node",r[e]));let n=void 0===t.skin?Promise.resolve(null):this.getDependency("skin",t.skin);return Promise.all([i,Promise.all(s),n]).then(function(e){let t=e[0],i=e[1],s=e[2];null!==s&&t.traverse(function(e){e.isSkinnedMesh&&e.bind(s,iB)});for(let e=0,s=i.length;e<s;e++)t.add(i[e]);return t})}_loadNodeShallow(e){let t=this.json,i=this.extensions,s=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];let r=t.nodes[e],n=r.name?s.createUniqueName(r.name):"",a=[],o=s._invokeOne(function(t){return t.createNodeMesh&&t.createNodeMesh(e)});return o&&a.push(o),void 0!==r.camera&&a.push(s.getDependency("camera",r.camera).then(function(e){return s._getNodeRef(s.cameraCache,r.camera,e)})),s._invokeAll(function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)}).forEach(function(e){a.push(e)}),this.nodeCache[e]=Promise.all(a).then(function(t){let a;if((a=!0===r.isBone?new eu.N$j:t.length>1?new eu.ZAu:1===t.length?t[0]:new eu.Tme)!==t[0])for(let e=0,i=t.length;e<i;e++)a.add(t[e]);if(r.name&&(a.userData.name=r.name,a.name=n),iI(a,r),r.extensions&&im(i,a,r),void 0!==r.matrix){let e=new eu.yGw;e.fromArray(r.matrix),a.applyMatrix4(e)}else void 0!==r.translation&&a.position.fromArray(r.translation),void 0!==r.rotation&&a.quaternion.fromArray(r.rotation),void 0!==r.scale&&a.scale.fromArray(r.scale);return s.associations.has(a)||s.associations.set(a,{}),s.associations.get(a).nodes=e,a}),this.nodeCache[e]}loadScene(e){let t=this.extensions,i=this.json.scenes[e],s=this,r=new eu.ZAu;i.name&&(r.name=s.createUniqueName(i.name)),iI(r,i),i.extensions&&im(t,r,i);let n=i.nodes||[],a=[];for(let e=0,t=n.length;e<t;e++)a.push(s.getDependency("node",n[e]));return Promise.all(a).then(function(e){for(let t=0,i=e.length;t<i;t++)r.add(e[t]);return s.associations=(e=>{let t=new Map;for(let[e,i]of s.associations)(e instanceof eu.F5T||e instanceof eu.xEZ)&&t.set(e,i);return e.traverse(e=>{let i=s.associations.get(e);null!=i&&t.set(e,i)}),t})(r),r})}_createAnimationTracks(e,t,i,s,r){let n;let a=[],o=e.name?e.name:e.uuid,A=[];switch(ig[r.path]===ig.weights?e.traverse(function(e){e.morphTargetInfluences&&A.push(e.name?e.name:e.uuid)}):A.push(o),ig[r.path]){case ig.weights:n=eu.dUE;break;case ig.rotation:n=eu.iLg;break;case ig.position:case ig.scale:default:switch(i.itemSize){case 1:n=eu.dUE;break;case 2:case 3:n=eu.yC1}}let l=void 0!==s.interpolation?id[s.interpolation]:eu.NMF,h=this._getArrayFromAccessor(i);for(let e=0,i=A.length;e<i;e++){let i=new n(A[e]+"."+ig[r.path],t.array,h,l);"CUBICSPLINE"===l&&this._createCubicSplineTrackInterpolant(i),a.push(i)}return a}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){let e=iC(t.constructor),i=new Float32Array(t.length);for(let s=0,r=t.length;s<r;s++)i[s]=t[s]*e;t=i}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(e){return new(this instanceof eu.iLg?ia:is)(this.times,this.values,this.getValueSize()/3,e)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function iw(e,t,i){let s=t.attributes,r=[];for(let t in s){let n=ic[t]||t.toLowerCase();n in e.attributes||r.push(function(t,s){return i.getDependency("accessor",t).then(function(t){e.setAttribute(s,t)})}(s[t],n))}if(void 0!==t.indices&&!e.index){let s=i.getDependency("accessor",t.indices).then(function(t){e.setIndex(t)});r.push(s)}return iI(e,t),!function(e,t,i){let s=t.attributes,r=new eu.ZzF;if(void 0===s.POSITION)return;{let e=i.json.accessors[s.POSITION],t=e.min,n=e.max;if(void 0!==t&&void 0!==n){if(r.set(new eu.Pa4(t[0],t[1],t[2]),new eu.Pa4(n[0],n[1],n[2])),e.normalized){let t=iC(iA[e.componentType]);r.min.multiplyScalar(t),r.max.multiplyScalar(t)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}let n=t.targets;if(void 0!==n){let e=new eu.Pa4,t=new eu.Pa4;for(let s=0,r=n.length;s<r;s++){let r=n[s];if(void 0!==r.POSITION){let s=i.json.accessors[r.POSITION],n=s.min,a=s.max;if(void 0!==n&&void 0!==a){if(t.setX(Math.max(Math.abs(n[0]),Math.abs(a[0]))),t.setY(Math.max(Math.abs(n[1]),Math.abs(a[1]))),t.setZ(Math.max(Math.abs(n[2]),Math.abs(a[2]))),s.normalized){let e=iC(iA[s.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(e)}e.boundingBox=r;let a=new eu.aLr;r.getCenter(a.center),a.radius=r.min.distanceTo(r.max)/2,e.boundingSphere=a}(e,t,i),Promise.all(r).then(function(){return void 0!==t.targets?function(e,t,i){let s=!1,r=!1,n=!1;for(let e=0,i=t.length;e<i;e++){let i=t[e];if(void 0!==i.POSITION&&(s=!0),void 0!==i.NORMAL&&(r=!0),void 0!==i.COLOR_0&&(n=!0),s&&r&&n)break}if(!s&&!r&&!n)return Promise.resolve(e);let a=[],o=[],A=[];for(let l=0,h=t.length;l<h;l++){let h=t[l];if(s){let t=void 0!==h.POSITION?i.getDependency("accessor",h.POSITION):e.attributes.position;a.push(t)}if(r){let t=void 0!==h.NORMAL?i.getDependency("accessor",h.NORMAL):e.attributes.normal;o.push(t)}if(n){let t=void 0!==h.COLOR_0?i.getDependency("accessor",h.COLOR_0):e.attributes.color;A.push(t)}}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(A)]).then(function(t){let i=t[0],a=t[1],o=t[2];return s&&(e.morphAttributes.position=i),r&&(e.morphAttributes.normal=a),n&&(e.morphAttributes.color=o),e.morphTargetsRelative=!0,e})}(e,t.targets,i):e})}class iQ{constructor(e=4){this.pool=e,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(e){if(!this.workers[e]){let t=this.workerCreator();t.addEventListener("message",this._onMessage.bind(this,e)),this.workers[e]=t}}_getIdleWorker(){for(let e=0;e<this.pool;e++)if(!(this.workerStatus&1<<e))return e;return -1}_onMessage(e,t){let i=this.workersResolve[e];if(i&&i(t),this.queue.length){let{resolve:t,msg:i,transfer:s}=this.queue.shift();this.workersResolve[e]=t,this.workers[e].postMessage(i,s)}else this.workerStatus^=1<<e}setWorkerCreator(e){this.workerCreator=e}setWorkerLimit(e){this.pool=e}postMessage(e,t){return new Promise(i=>{let s=this._getIdleWorker();-1!==s?(this._initWorker(s),this.workerStatus|=1<<s,this.workersResolve[s]=i,this.workers[s].postMessage(e,t)):this.queue.push({resolve:i,msg:e,transfer:t})})}dispose(){this.workers.forEach(e=>e.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}var iv=i(1876).Buffer;class ib{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class iS{constructor(e,t,i,s){this._dataView=new DataView(e.buffer,e.byteOffset+t,i),this._littleEndian=s,this._offset=0}_nextUint8(){let e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){let e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){let e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){let e=this._dataView.getUint32(this._offset,this._littleEndian)+4294967296*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,e}_nextInt32(){let e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}_skip(e){return this._offset+=e,this}_scan(e,t=0){let i=this._offset,s=0;for(;this._dataView.getUint8(this._offset)!==t&&s<e;)s++,this._offset++;return s<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+i,s)}}new Uint8Array([0]);let ix=[171,75,84,88,32,50,48,187,13,10,26,10];function iR(e){return"undefined"!=typeof TextDecoder?(new TextDecoder).decode(e):iv.from(e).toString("utf8")}var iT=i(1876).Buffer;let iM={env:{emscripten_notify_memory_growth:function(e){n=new Uint8Array(r.exports.memory.buffer)}}};class iD{init(){return s||(s="undefined"!=typeof fetch?fetch("data:application/wasm;base64,"+iL).then(e=>e.arrayBuffer()).then(e=>WebAssembly.instantiate(e,iM)).then(this._init):WebAssembly.instantiate(iT.from(iL,"base64"),iM).then(this._init))}_init(e){r=e.instance,iM.env.emscripten_notify_memory_growth(0)}decode(e,t=0){if(!r)throw Error("ZSTDDecoder: Await .init() before decoding.");let i=e.byteLength,s=r.exports.malloc(i);n.set(e,s),t=t||Number(r.exports.ZSTD_findDecompressedSize(s,i));let a=r.exports.malloc(t),o=r.exports.ZSTD_decompress(a,t,s,i),A=n.slice(a,a+o);return r.exports.free(s),r.exports.free(a),A}}let iL="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IAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQh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ASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigC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C0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEE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",iF=new WeakMap,ik=0;class iU extends eu.aNw{constructor(e){super(e),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new iQ,this.workerSourceURL="",this.workerConfig=null,"undefined"!=typeof MSC_TRANSCODER&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(e){return this.transcoderPath=e,this}setWorkerLimit(e){return this.workerPool.setWorkerLimit(e),this}detectSupport(e){return!0===e.isWebGPURenderer?this.workerConfig={astcSupported:e.hasFeature("texture-compression-astc"),etc1Supported:!1,etc2Supported:e.hasFeature("texture-compression-etc2"),dxtSupported:e.hasFeature("texture-compression-bc"),bptcSupported:!1,pvrtcSupported:!1}:(this.workerConfig={astcSupported:e.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:e.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:e.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:e.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:e.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:e.extensions.has("WEBGL_compressed_texture_pvrtc")||e.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},e.capabilities.isWebGL2&&(this.workerConfig.etc1Supported=!1)),this}init(){if(!this.transcoderPending){let e=new eu.hH6(this.manager);e.setPath(this.transcoderPath),e.setWithCredentials(this.withCredentials);let t=e.loadAsync("basis_transcoder.js"),i=new eu.hH6(this.manager);i.setPath(this.transcoderPath),i.setResponseType("arraybuffer"),i.setWithCredentials(this.withCredentials);let s=i.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([t,s]).then(([e,t])=>{let i=iU.BasisWorker.toString(),s=["/* constants */","let _EngineFormat = "+JSON.stringify(iU.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(iU.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(iU.BasisFormat),"/* basis_transcoder.js */",e,"/* worker */",i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([s])),this.transcoderBinary=t,this.workerPool.setWorkerCreator(()=>{let e=new Worker(this.workerSourceURL),t=this.transcoderBinary.slice(0);return e.postMessage({type:"init",config:this.workerConfig,transcoderBinary:t},[t]),e})}),ik>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),ik++}return this.transcoderPending}load(e,t,i,s){if(null===this.workerConfig)throw Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");let r=new eu.hH6(this.manager);r.setResponseType("arraybuffer"),r.setWithCredentials(this.withCredentials),r.load(e,e=>{if(iF.has(e))return iF.get(e).promise.then(t).catch(s);this._createTexture(e).then(e=>t?t(e):null).catch(s)},i,s)}_createTextureFrom(e,t){let i;let{faces:s,width:r,height:n,format:a,type:o,error:A,dfdTransferFn:l,dfdFlags:h}=e;if("error"===o)return Promise.reject(A);if(6===t.faceCount)(i=new eu.EB7).image=s,i.format=a,i.type=eu.ywz;else{let e=s[0].mipmaps;i=t.layerCount>1?new eu.Z_g(e,r,n,t.layerCount,a,eu.ywz):new eu.EB7(e,r,n,a,eu.ywz)}return i.minFilter=1===s[0].mipmaps.length?eu.wem:eu.D1R,i.magFilter=eu.wem,i.generateMipmaps=!1,i.needsUpdate=!0,i.colorSpace=2===l?eu.KI_:eu.aCh,i.premultiplyAlpha=!!(1&h),i}async _createTexture(e,t={}){let i=function(e){let t=new Uint8Array(e.buffer,e.byteOffset,ix.length);if(t[0]!==ix[0]||t[1]!==ix[1]||t[2]!==ix[2]||t[3]!==ix[3]||t[4]!==ix[4]||t[5]!==ix[5]||t[6]!==ix[6]||t[7]!==ix[7]||t[8]!==ix[8]||t[9]!==ix[9]||t[10]!==ix[10]||t[11]!==ix[11])throw Error("Missing KTX 2.0 identifier.");let i=new ib,s=17*Uint32Array.BYTES_PER_ELEMENT,r=new iS(e,ix.length,s,!0);i.vkFormat=r._nextUint32(),i.typeSize=r._nextUint32(),i.pixelWidth=r._nextUint32(),i.pixelHeight=r._nextUint32(),i.pixelDepth=r._nextUint32(),i.layerCount=r._nextUint32(),i.faceCount=r._nextUint32();let n=r._nextUint32();i.supercompressionScheme=r._nextUint32();let a=r._nextUint32(),o=r._nextUint32(),A=r._nextUint32(),l=r._nextUint32(),h=r._nextUint64(),u=r._nextUint64(),c=new iS(e,ix.length+s,3*n*8,!0);for(let t=0;t<n;t++)i.levels.push({levelData:new Uint8Array(e.buffer,e.byteOffset+c._nextUint64(),c._nextUint64()),uncompressedByteLength:c._nextUint64()});let g=new iS(e,a,o,!0),d={vendorId:g._skip(4)._nextUint16(),descriptorType:g._nextUint16(),versionNumber:g._nextUint16(),descriptorBlockSize:g._nextUint16(),colorModel:g._nextUint8(),colorPrimaries:g._nextUint8(),transferFunction:g._nextUint8(),flags:g._nextUint8(),texelBlockDimension:[g._nextUint8(),g._nextUint8(),g._nextUint8(),g._nextUint8()],bytesPlane:[g._nextUint8(),g._nextUint8(),g._nextUint8(),g._nextUint8(),g._nextUint8(),g._nextUint8(),g._nextUint8(),g._nextUint8()],samples:[]},p=(d.descriptorBlockSize/4-6)/4;for(let e=0;e<p;e++){let t={bitOffset:g._nextUint16(),bitLength:g._nextUint8(),channelType:g._nextUint8(),samplePosition:[g._nextUint8(),g._nextUint8(),g._nextUint8(),g._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&t.channelType?(t.sampleLower=g._nextInt32(),t.sampleUpper=g._nextInt32()):(t.sampleLower=g._nextUint32(),t.sampleUpper=g._nextUint32()),d.samples[e]=t}i.dataFormatDescriptor.length=0,i.dataFormatDescriptor.push(d);let m=new iS(e,A,l,!0);for(;m._offset<l;){let e=m._nextUint32(),t=m._scan(e),s=iR(t),r=m._scan(e-t.byteLength);i.keyValue[s]=s.match(/^ktx/i)?iR(r):r,m._offset%4&&m._skip(4-m._offset%4)}if(u<=0)return i;let f=new iS(e,h,u,!0),I=f._nextUint16(),E=f._nextUint16(),C=f._nextUint32(),B=f._nextUint32(),y=f._nextUint32(),w=f._nextUint32(),Q=[];for(let e=0;e<n;e++)Q.push({imageFlags:f._nextUint32(),rgbSliceByteOffset:f._nextUint32(),rgbSliceByteLength:f._nextUint32(),alphaSliceByteOffset:f._nextUint32(),alphaSliceByteLength:f._nextUint32()});let v=h+f._offset,b=v+C,S=b+B,x=S+y,R=new Uint8Array(e.buffer,e.byteOffset+v,C),T=new Uint8Array(e.buffer,e.byteOffset+b,B),M=new Uint8Array(e.buffer,e.byteOffset+S,y),D=new Uint8Array(e.buffer,e.byteOffset+x,w);return i.globalData={endpointCount:I,selectorCount:E,imageDescs:Q,endpointsData:R,selectorsData:T,tablesData:M,extendedData:D},i}(new Uint8Array(e));if(0!==i.vkFormat){let e=[],t=[];for(let s=0;s<i.levels.length;s++)t.push(iP(i,s).then(function(t){e[s]=t}));await Promise.all(t);let s=e[0];return s.mipmaps=e.map(e=>({data:e.source.data,width:e.source.data.width,height:e.source.data.height,depth:e.source.data.depth})),s}let s=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:e,taskConfig:t},[e])).then(e=>this._createTextureFrom(e.data,i));return iF.set(e,{promise:s}),s}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),ik--,this}}iU.BasisFormat={ETC1S:0,UASTC_4x4:1},iU.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16},iU.EngineFormat={RGBAFormat:eu.wk1,RGBA_ASTC_4x4_Format:eu.ptH,RGBA_BPTC_Format:eu.bsb,RGBA_ETC2_EAC_Format:eu.ekQ,RGBA_PVRTC_4BPPV1_Format:eu.eaV,RGBA_S3TC_DXT5_Format:eu.ILR,RGB_ETC1_Format:eu.fto,RGB_ETC2_Format:eu.l0P,RGB_PVRTC_4BPPV1_Format:eu._AM,RGB_S3TC_DXT1_Format:eu.wuA},iU.BasisWorker=function(){let e,t,i;let s=_EngineFormat,r=_TranscoderFormat,n=_BasisFormat;self.addEventListener("message",function(a){let h=a.data;switch(h.type){case"init":var u;e=h.config,u=h.transcoderBinary,t=new Promise(e=>{BASIS(i={wasmBinary:u,onRuntimeInitialized:e})}).then(()=>{i.initializeBasis(),void 0===i.KTX2File&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")});break;case"transcode":t.then(()=>{try{let{faces:t,buffers:a,width:u,height:c,hasAlpha:g,format:d,dfdTransferFn:p,dfdFlags:m}=function(t){let a=new i.KTX2File(new Uint8Array(t));function h(){a.close(),a.delete()}if(!a.isValid())throw h(),Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");let u=a.isUASTC()?n.UASTC_4x4:n.ETC1S,c=a.getWidth(),g=a.getHeight(),d=a.getLayers()||1,p=a.getLevels(),m=a.getFaces(),f=a.getHasAlpha(),I=a.getDFDTransferFunc(),E=a.getDFDFlags(),{transcoderFormat:C,engineFormat:B}=function(t,i,a,h){let u;let c=t===n.ETC1S?o:A;for(let s=0;s<c.length;s++){let r=c[s];if(e[r.if]&&r.basisFormat.includes(t)&&(!h||!(r.transcoderFormat.length<2))&&(!r.needsPowerOfTwo||l(i)&&l(a)))return{transcoderFormat:r.transcoderFormat[h?1:0],engineFormat:r.engineFormat[h?1:0]}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),{transcoderFormat:r.RGBA32,engineFormat:s.RGBAFormat}}(u,c,g,f);if(!c||!g||!p)throw h(),Error("THREE.KTX2Loader:	Invalid texture");if(!a.startTranscoding())throw h(),Error("THREE.KTX2Loader: .startTranscoding failed");let y=[],w=[];for(let e=0;e<m;e++){let t=[];for(let i=0;i<p;i++){let s,r;let n=[];for(let t=0;t<d;t++){let o=a.getImageLevelInfo(i,t,e);0===e&&0===i&&0===t&&(o.origWidth%4!=0||o.origHeight%4!=0)&&console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions."),p>1?(s=o.origWidth,r=o.origHeight):(s=o.width,r=o.height);let A=new Uint8Array(a.getImageTranscodedSizeInBytes(i,t,0,C));if(!a.transcodeImage(A,i,t,e,C,0,-1,-1))throw h(),Error("THREE.KTX2Loader: .transcodeImage failed.");n.push(A)}let o=function(e){if(1===e.length)return e[0];let t=0;for(let i=0;i<e.length;i++)t+=e[i].byteLength;let i=new Uint8Array(t),s=0;for(let t=0;t<e.length;t++){let r=e[t];i.set(r,s),s+=r.byteLength}return i}(n);t.push({data:o,width:s,height:r}),w.push(o.buffer)}y.push({mipmaps:t,width:c,height:g,format:B})}return h(),{faces:y,buffers:w,width:c,height:g,hasAlpha:f,format:B,dfdTransferFn:I,dfdFlags:E}}(h.buffer);self.postMessage({type:"transcode",id:h.id,faces:t,width:u,height:c,hasAlpha:g,format:d,dfdTransferFn:p,dfdFlags:m},a)}catch(e){console.error(e),self.postMessage({type:"error",id:h.id,error:e.message})}})}});let a=[{if:"astcSupported",basisFormat:[n.UASTC_4x4],transcoderFormat:[r.ASTC_4x4,r.ASTC_4x4],engineFormat:[s.RGBA_ASTC_4x4_Format,s.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[n.ETC1S,n.UASTC_4x4],transcoderFormat:[r.BC7_M5,r.BC7_M5],engineFormat:[s.RGBA_BPTC_Format,s.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[n.ETC1S,n.UASTC_4x4],transcoderFormat:[r.BC1,r.BC3],engineFormat:[s.RGB_S3TC_DXT1_Format,s.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[n.ETC1S,n.UASTC_4x4],transcoderFormat:[r.ETC1,r.ETC2],engineFormat:[s.RGB_ETC2_Format,s.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[n.ETC1S,n.UASTC_4x4],transcoderFormat:[r.ETC1],engineFormat:[s.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[n.ETC1S,n.UASTC_4x4],transcoderFormat:[r.PVRTC1_4_RGB,r.PVRTC1_4_RGBA],engineFormat:[s.RGB_PVRTC_4BPPV1_Format,s.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],o=a.sort(function(e,t){return e.priorityETC1S-t.priorityETC1S}),A=a.sort(function(e,t){return e.priorityUASTC-t.priorityUASTC});function l(e){return e<=2||(e&e-1)==0&&0!==e}};let i_={109:eu.wk1,97:eu.wk1,37:eu.wk1,43:eu.wk1,103:eu.av9,83:eu.av9,16:eu.av9,22:eu.av9,100:eu.hEm,76:eu.hEm,15:eu.hEm,9:eu.hEm},iN={109:eu.VzW,97:eu.cLu,37:eu.ywz,43:eu.ywz,103:eu.VzW,83:eu.cLu,16:eu.ywz,22:eu.ywz,100:eu.VzW,76:eu.cLu,15:eu.ywz,9:eu.ywz},iG={43:eu.KI_,22:eu.KI_,15:eu.KI_};async function iP(e,t=0){let i,s;let{vkFormat:r}=e,n=Math.max(1,e.pixelWidth>>t),o=Math.max(1,e.pixelHeight>>t),A=Math.max(1,e.pixelDepth>>t);if(void 0===i_[r])throw Error("THREE.KTX2Loader: Unsupported vkFormat.");let l=e.levels[t];if(0===e.supercompressionScheme)i=l.levelData;else if(2===e.supercompressionScheme)a||(a=new Promise(async e=>{let t=new iD;await t.init(),e(t)})),i=(await a).decode(l.levelData,l.uncompressedByteLength);else throw Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");s=iN[r]===eu.VzW?new Float32Array(i.buffer,i.byteOffset,i.byteLength/Float32Array.BYTES_PER_ELEMENT):iN[r]===eu.cLu?new Uint16Array(i.buffer,i.byteOffset,i.byteLength/Uint16Array.BYTES_PER_ELEMENT):i;let h=0===A?new eu.IEO(s,n,o):new eu.JUT(s,n,o,A);return h.type=iN[r],h.format=i_[r],h.colorSpace=iG[r]||eu.aCh,h.needsUpdate=!0,Promise.resolve(h)}let iO=Symbol("retainerCount"),iH=Symbol("recentlyUsed"),iq=Symbol("evict"),iK=Symbol("evictionThreshold"),iV=Symbol("cache");class iJ{constructor(e,t=5){this[S]=new Map,this[x]=[],this[iV]=e,this[iK]=t}set evictionThreshold(e){this[iK]=e,this[iq]()}get evictionThreshold(){return this[iK]}get cache(){return this[iV]}retainerCount(e){return this[iO].get(e)||0}reset(){this[iO].clear(),this[iH]=[]}retain(e){this[iO].has(e)||this[iO].set(e,0),this[iO].set(e,this[iO].get(e)+1);let t=this[iH].indexOf(e);-1!==t&&this[iH].splice(t,1),this[iH].unshift(e),this[iq]()}release(e){this[iO].has(e)&&this[iO].set(e,Math.max(this[iO].get(e)-1,0)),this[iq]()}[(S=iO,x=iH,iq)](){if(!(this[iH].length<this[iK]))for(let e=this[iH].length-1;e>=this[iK];--e){let t=this[iH][e];0===this[iO].get(t)&&(this[iV].delete(t),this[iH].splice(e,1))}}}/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iY=e=>{let t=[],i=new Set;for(let s of e){let e=s,r=0;for(;i.has(e);)e=s+"."+ ++r;i.add(e),t.push(e)}return t},ij=e=>{let t=new Map;for(let i of e.mappings)for(let e of i.variants)t.set(e,{material:null,gltfMaterialIndex:i.material});return t};class iz{constructor(e){this.parser=e,this.name="KHR_materials_variants"}afterRoot(e){let t=this.parser,i=t.json;if(void 0===i.extensions||void 0===i.extensions[this.name])return null;let s=iY((i.extensions[this.name].variants||[]).map(e=>e.name));for(let s of e.scenes)s.traverse(e=>{if(!e.material)return;let s=t.associations.get(e);if(null==s||null==s.meshes||null==s.primitives)return;let r=i.meshes[s.meshes].primitives[s.primitives].extensions;r&&r[this.name]&&(e.userData.variantMaterials=ij(r[this.name]))});return e.userData.variants=s,Promise.resolve()}}eu.xEZ.DEFAULT_ANISOTROPY=4;let i$=(e,t,i=()=>{})=>{let s=e=>{let t=e.loaded/e.total;i(Math.max(0,Math.min(1,isFinite(t)?t:1)))};return new Promise((i,r)=>{t.load(e,i,s,r)})},iW=e=>new Promise((t,i)=>{let s=document.createElement("script");document.body.appendChild(s),s.onload=t,s.onerror=i,s.async=!0,s.src=e}),iX=new Map,iZ=new Map,i0=new tG,i1=new iU,i2=Symbol("loader"),i3=Symbol("evictionPolicy"),i8=Symbol("GLTFInstance");class i4 extends eu.pBf{constructor(e){super(),this[T]=new tH().register(e=>new iz(e)),this[i8]=e,this[i2].setDRACOLoader(i0),this[i2].setKTX2Loader(i1)}static setDRACODecoderLocation(e){o=e,i0.setDecoderPath(e)}static getDRACODecoderLocation(){return o}static setKTX2TranscoderLocation(e){A=e,i1.setTranscoderPath(e)}static getKTX2TranscoderLocation(){return A}static setMeshoptDecoderLocation(e){l!==e&&(l=e,h=iW(e).then(()=>MeshoptDecoder.ready).then(()=>MeshoptDecoder))}static getMeshoptDecoderLocation(){return l}static initializeKTX2Loader(e){i1.detectSupport(e)}static get cache(){return iX}static clearCache(){iX.forEach((e,t)=>{this.delete(t)}),this[i3].reset()}static has(e){return iX.has(e)}static async delete(e){if(!this.has(e))return;let t=iX.get(e);iZ.delete(e),iX.delete(e),(await t).dispose()}static hasFinishedLoading(e){return!!iZ.get(e)}get[(R=i3,T=i2,i3)](){return this.constructor[i3]}async preload(e,t,i=()=>{}){if(this[i2].setWithCredentials(i4.withCredentials),this.dispatchEvent({type:"preload",element:t,src:e}),!iX.has(e)){null!=h&&this[i2].setMeshoptDecoder(await h);let t=i$(e,this[i2],e=>{i(.8*e)}),s=this[i8],r=t.then(e=>s.prepare(e)).then(e=>(i(.9),new s(e))).catch(e=>(console.error(e),new s));iX.set(e,r)}await iX.get(e),iZ.set(e,!0),i&&i(1)}async load(e,t,i=()=>{}){await this.preload(e,t,i);let s=await iX.get(e),r=await s.clone();return this[i3].retain(e),r.dispose=()=>{this[i3].release(e)},r}}i4[R]=new iJ(i4);class i5 extends eu.Tme{constructor(e=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new eu.FM8(.5,.5),this.addEventListener("removed",function(){this.traverse(function(e){e.element instanceof Element&&null!==e.element.parentNode&&e.element.parentNode.removeChild(e.element)})})}copy(e,t){return super.copy(e,t),this.element=e.element.cloneNode(!0),this.center=e.center,this}}let i6=new eu.Pa4,i9=new eu.yGw,i7=new eu.yGw,se=new eu.Pa4,st=new eu.Pa4;class si{constructor(e={}){let t,i,s,r;let n=this,a={objects:new WeakMap},o=void 0!==e.element?e.element:document.createElement("div");o.style.overflow="hidden",this.domElement=o,this.getSize=function(){return{width:t,height:i}},this.render=function(e,t){!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),i9.copy(t.matrixWorldInverse),i7.multiplyMatrices(t.projectionMatrix,i9),function e(t,i,A){if(t.isCSS2DObject){i6.setFromMatrixPosition(t.matrixWorld),i6.applyMatrix4(i7);let e=!0===t.visible&&i6.z>=-1&&i6.z<=1&&!0===t.layers.test(A.layers);if(t.element.style.display=!0===e?"":"none",!0===e){t.onBeforeRender(n,i,A);let e=t.element;e.style.transform="translate("+-100*t.center.x+"%,"+-100*t.center.y+"%)translate("+(i6.x*s+s)+"px,"+(-i6.y*r+r)+"px)",e.parentNode!==o&&o.appendChild(e),t.onAfterRender(n,i,A)}let l={distanceToCameraSquared:(se.setFromMatrixPosition(A.matrixWorld),st.setFromMatrixPosition(t.matrixWorld),se.distanceToSquared(st))};a.objects.set(t,l)}for(let s=0,r=t.children.length;s<r;s++)e(t.children[s],i,A)}(e,e,t),function(e){let t=(function(e){let t=[];return e.traverse(function(e){e.isCSS2DObject&&t.push(e)}),t})(e).sort(function(e,t){return e.renderOrder!==t.renderOrder?t.renderOrder-e.renderOrder:a.objects.get(e).distanceToCameraSquared-a.objects.get(t).distanceToCameraSquared}),i=t.length;for(let e=0,s=t.length;e<s;e++)t[e].element.style.zIndex=i-e}(e)},this.setSize=function(e,n){t=e,i=n,s=t/2,r=i/2,o.style.width=e+"px",o.style.height=n+"px"}}}function ss(e,t,i){let s=i,r=new eu.Pa4;return e.updateWorldMatrix(!0,!0),e.traverseVisible(e=>{let{geometry:i}=e;if(void 0!==i){let{position:n}=i.attributes;if(void 0!==n)for(let i=0,a=n.count;i<a;i++)e.isMesh?e.getVertexPosition(i,r):r.fromBufferAttribute(n,i),e.isSkinnedMesh||r.applyMatrix4(e.matrixWorld),s=t(s,r)}}),s}function sr(e,t=1/0,i=null){c||(c=new eu._12(2,2,1,1)),g||(g=new eu.jyz({uniforms:{blitTexture:new eu.xWb(e)},vertexShader:`
            varying vec2 vUv;
            void main(){
                vUv = uv;
                gl_Position = vec4(position.xy * 1.0,0.,.999999);
            }`,fragmentShader:`
            uniform sampler2D blitTexture; 
            varying vec2 vUv;

            void main(){ 
                gl_FragColor = vec4(vUv.xy, 0, 1);
                
                #ifdef IS_SRGB
                gl_FragColor = LinearTosRGB( texture2D( blitTexture, vUv) );
                #else
                gl_FragColor = texture2D( blitTexture, vUv);
                #endif
            }`})),g.uniforms.blitTexture.value=e,g.defines.IS_SRGB=e.colorSpace==eu.KI_,g.needsUpdate=!0,d||((d=new eu.Kj0(c,g)).frustrumCulled=!1);let s=new eu.cPb,r=new eu.xsS;r.add(d),i||(i=u=new eu.CP7({antialias:!1})),i.setSize(Math.min(e.image.width,t),Math.min(e.image.height,t)),i.clear(),i.render(r,s);let n=new eu.xEZ(i.domElement);return n.minFilter=e.minFilter,n.magFilter=e.magFilter,n.wrapS=e.wrapS,n.wrapT=e.wrapT,n.name=e.name,u&&(u.dispose(),u=null),n}let sn={POSITION:["byte","byte normalized","unsigned byte","unsigned byte normalized","short","short normalized","unsigned short","unsigned short normalized"],NORMAL:["byte normalized","short normalized"],TANGENT:["byte normalized","short normalized"],TEXCOORD:["byte","byte normalized","unsigned byte","short","short normalized","unsigned short"]};class sa{constructor(){this.pluginCallbacks=[],this.register(function(e){return new sI(e)}),this.register(function(e){return new sE(e)}),this.register(function(e){return new sy(e)}),this.register(function(e){return new sw(e)}),this.register(function(e){return new sQ(e)}),this.register(function(e){return new sv(e)}),this.register(function(e){return new sC(e)}),this.register(function(e){return new sB(e)}),this.register(function(e){return new sb(e)}),this.register(function(e){return new sS(e)}),this.register(function(e){return new sx(e)})}register(e){return -1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return -1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,s){let r=new sf,n=[];for(let e=0,t=this.pluginCallbacks.length;e<t;e++)n.push(this.pluginCallbacks[e](r));r.setPlugins(n),r.write(e,t,s).catch(i)}parseAsync(e,t){let i=this;return new Promise(function(s,r){i.parse(e,s,r,t)})}}let so={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},sA="KHR_mesh_quantization",sl={};sl[eu.TyD]=so.NEAREST,sl[eu.YLQ]=so.NEAREST_MIPMAP_NEAREST,sl[eu.aH4]=so.NEAREST_MIPMAP_LINEAR,sl[eu.wem]=so.LINEAR,sl[eu.qyh]=so.LINEAR_MIPMAP_NEAREST,sl[eu.D1R]=so.LINEAR_MIPMAP_LINEAR,sl[eu.uWy]=so.CLAMP_TO_EDGE,sl[eu.rpg]=so.REPEAT,sl[eu.OoA]=so.MIRRORED_REPEAT;let sh={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},su=new eu.Ilk;function sc(e,t){return e.length===t.length&&e.every(function(e,i){return e===t[i]})}function sg(e){return 4*Math.ceil(e/4)}function sd(e,t=0){let i=sg(e.byteLength);if(i!==e.byteLength){let s=new Uint8Array(i);if(s.set(new Uint8Array(e)),0!==t)for(let r=e.byteLength;r<i;r++)s[r]=t;return s.buffer}return e}function sp(){return"undefined"==typeof document&&"undefined"!=typeof OffscreenCanvas?new OffscreenCanvas(1,1):document.createElement("canvas")}function sm(e,t){let i;return void 0!==e.toBlob?new Promise(i=>e.toBlob(i,t)):("image/jpeg"===t?i=.92:"image/webp"===t&&(i=.8),e.convertToBlob({type:t,quality:i}))}class sf{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.extensionsRequired={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(e){this.plugins=e}async write(e,t,i={}){this.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},i),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(e),await Promise.all(this.pending);let s=this.buffers,r=this.json;i=this.options;let n=this.extensionsUsed,a=this.extensionsRequired,o=new Blob(s,{type:"application/octet-stream"}),A=Object.keys(n),l=Object.keys(a);if(A.length>0&&(r.extensionsUsed=A),l.length>0&&(r.extensionsRequired=l),r.buffers&&r.buffers.length>0&&(r.buffers[0].byteLength=o.size),!0===i.binary){let e=new FileReader;e.readAsArrayBuffer(o),e.onloadend=function(){var i;let s=sd(e.result),n=new DataView(new ArrayBuffer(8));n.setUint32(0,s.byteLength,!0),n.setUint32(4,5130562,!0);let a=sd((i=JSON.stringify(r),new TextEncoder().encode(i).buffer),32),o=new DataView(new ArrayBuffer(8));o.setUint32(0,a.byteLength,!0),o.setUint32(4,1313821514,!0);let A=new ArrayBuffer(12),l=new DataView(A);l.setUint32(0,1179937895,!0),l.setUint32(4,2,!0);let h=12+o.byteLength+a.byteLength+n.byteLength+s.byteLength;l.setUint32(8,h,!0);let u=new Blob([A,o,a,n,s],{type:"application/octet-stream"}),c=new FileReader;c.readAsArrayBuffer(u),c.onloadend=function(){t(c.result)}}}else if(r.buffers&&r.buffers.length>0){let e=new FileReader;e.readAsDataURL(o),e.onloadend=function(){let i=e.result;r.buffers[0].uri=i,t(r)}}else t(r)}serializeUserData(e,t){if(0===Object.keys(e.userData).length)return;let i=this.options,s=this.extensionsUsed;try{let r=JSON.parse(JSON.stringify(e.userData));if(i.includeCustomExtensions&&r.gltfExtensions){for(let e in void 0===t.extensions&&(t.extensions={}),r.gltfExtensions)t.extensions[e]=r.gltfExtensions[e],s[e]=!0;delete r.gltfExtensions}Object.keys(r).length>0&&(t.extras=r)}catch(t){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+t.message)}}getUID(e,t=!1){if(!1===this.uids.has(e)){let t=new Map;t.set(!0,this.uid++),t.set(!1,this.uid++),this.uids.set(e,t)}return this.uids.get(e).get(t)}isNormalizedNormalAttribute(e){if(this.cache.attributesNormalized.has(e))return!1;let t=new eu.Pa4;for(let i=0,s=e.count;i<s;i++)if(Math.abs(t.fromBufferAttribute(e,i).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(e){let t=this.cache;if(t.attributesNormalized.has(e))return t.attributesNormalized.get(e);let i=e.clone(),s=new eu.Pa4;for(let e=0,t=i.count;e<t;e++)s.fromBufferAttribute(i,e),0===s.x&&0===s.y&&0===s.z?s.setX(1):s.normalize(),i.setXYZ(e,s.x,s.y,s.z);return t.attributesNormalized.set(e,i),i}applyTextureTransform(e,t){let i=!1,s={};(0!==t.offset.x||0!==t.offset.y)&&(s.offset=t.offset.toArray(),i=!0),0!==t.rotation&&(s.rotation=t.rotation,i=!0),(1!==t.repeat.x||1!==t.repeat.y)&&(s.scale=t.repeat.toArray(),i=!0),i&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=s,this.extensionsUsed.KHR_texture_transform=!0)}buildMetalRoughTexture(e,t){if(e===t)return e;function i(e){return e.colorSpace===eu.KI_?function(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}:function(e){return e}}console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures."),e instanceof eu.EB7&&(e=sr(e)),t instanceof eu.EB7&&(t=sr(t));let s=e?e.image:null,r=t?t.image:null,n=Math.max(s?s.width:0,r?r.width:0),a=Math.max(s?s.height:0,r?r.height:0),o=sp();o.width=n,o.height=a;let A=o.getContext("2d");A.fillStyle="#00ffff",A.fillRect(0,0,n,a);let l=A.getImageData(0,0,n,a);if(s){A.drawImage(s,0,0,n,a);let t=i(e),r=A.getImageData(0,0,n,a).data;for(let e=2;e<r.length;e+=4)l.data[e]=256*t(r[e]/256)}if(r){A.drawImage(r,0,0,n,a);let e=i(t),s=A.getImageData(0,0,n,a).data;for(let t=1;t<s.length;t+=4)l.data[t]=256*e(s[t]/256)}A.putImageData(l,0,0);let h=(e||t).clone();return h.source=new eu.Hw6(o),h.colorSpace=eu.aCh,h.channel=(e||t).channel,e&&t&&e.channel!==t.channel&&console.warn("THREE.GLTFExporter: UV channels for metalnessMap and roughnessMap textures must match."),h}processBuffer(e){let t=this.json,i=this.buffers;return t.buffers||(t.buffers=[{byteLength:0}]),i.push(e),0}processBufferView(e,t,i,s,r){let n;let a=this.json;switch(a.bufferViews||(a.bufferViews=[]),t){case so.BYTE:case so.UNSIGNED_BYTE:n=1;break;case so.SHORT:case so.UNSIGNED_SHORT:n=2;break;default:n=4}let o=sg(s*e.itemSize*n),A=new DataView(new ArrayBuffer(o)),l=0;for(let r=i;r<i+s;r++)for(let i=0;i<e.itemSize;i++){let s;e.itemSize>4?s=e.array[r*e.itemSize+i]:(0===i?s=e.getX(r):1===i?s=e.getY(r):2===i?s=e.getZ(r):3===i&&(s=e.getW(r)),!0===e.normalized&&(s=eu.M8C.normalize(s,e.array))),t===so.FLOAT?A.setFloat32(l,s,!0):t===so.INT?A.setInt32(l,s,!0):t===so.UNSIGNED_INT?A.setUint32(l,s,!0):t===so.SHORT?A.setInt16(l,s,!0):t===so.UNSIGNED_SHORT?A.setUint16(l,s,!0):t===so.BYTE?A.setInt8(l,s):t===so.UNSIGNED_BYTE&&A.setUint8(l,s),l+=n}let h={buffer:this.processBuffer(A.buffer),byteOffset:this.byteOffset,byteLength:o};return void 0!==r&&(h.target=r),r===so.ARRAY_BUFFER&&(h.byteStride=e.itemSize*n),this.byteOffset+=o,a.bufferViews.push(h),{id:a.bufferViews.length-1,byteLength:0}}processBufferViewImage(e){let t=this,i=t.json;return i.bufferViews||(i.bufferViews=[]),new Promise(function(s){let r=new FileReader;r.readAsArrayBuffer(e),r.onloadend=function(){let e=sd(r.result),n={buffer:t.processBuffer(e),byteOffset:t.byteOffset,byteLength:e.byteLength};t.byteOffset+=e.byteLength,s(i.bufferViews.push(n)-1)}})}processAccessor(e,t,i,s){let r,n;let a=this.json;if(e.array.constructor===Float32Array)r=so.FLOAT;else if(e.array.constructor===Int32Array)r=so.INT;else if(e.array.constructor===Uint32Array)r=so.UNSIGNED_INT;else if(e.array.constructor===Int16Array)r=so.SHORT;else if(e.array.constructor===Uint16Array)r=so.UNSIGNED_SHORT;else if(e.array.constructor===Int8Array)r=so.BYTE;else if(e.array.constructor===Uint8Array)r=so.UNSIGNED_BYTE;else throw Error("THREE.GLTFExporter: Unsupported bufferAttribute component type: "+e.array.constructor.name);if(void 0===i&&(i=0),void 0===s&&(s=e.count),0===s)return null;let o=function(e,t,i){let s={min:Array(e.itemSize).fill(Number.POSITIVE_INFINITY),max:Array(e.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let r=t;r<t+i;r++)for(let t=0;t<e.itemSize;t++){let i;e.itemSize>4?i=e.array[r*e.itemSize+t]:(0===t?i=e.getX(r):1===t?i=e.getY(r):2===t?i=e.getZ(r):3===t&&(i=e.getW(r)),!0===e.normalized&&(i=eu.M8C.normalize(i,e.array))),s.min[t]=Math.min(s.min[t],i),s.max[t]=Math.max(s.max[t],i)}return s}(e,i,s);void 0!==t&&(n=e===t.index?so.ELEMENT_ARRAY_BUFFER:so.ARRAY_BUFFER);let A=this.processBufferView(e,r,i,s,n),l={bufferView:A.id,byteOffset:A.byteOffset,componentType:r,count:s,max:o.max,min:o.min,type:{1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",9:"MAT3",16:"MAT4"}[e.itemSize]};return!0===e.normalized&&(l.normalized=!0),a.accessors||(a.accessors=[]),a.accessors.push(l)-1}processImage(e,t,i,s="image/png"){if(null!==e){let r=this,n=r.cache,a=r.json,o=r.options,A=r.pending;n.images.has(e)||n.images.set(e,{});let l=n.images.get(e),h=s+":flipY/"+i.toString();if(void 0!==l[h])return l[h];a.images||(a.images=[]);let u={mimeType:s},c=sp();c.width=Math.min(e.width,o.maxTextureSize),c.height=Math.min(e.height,o.maxTextureSize);let g=c.getContext("2d");if(!0===i&&(g.translate(0,c.height),g.scale(1,-1)),void 0!==e.data){t!==eu.wk1&&console.error("GLTFExporter: Only RGBAFormat is supported.",t),(e.width>o.maxTextureSize||e.height>o.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);let i=new Uint8ClampedArray(e.height*e.width*4);for(let t=0;t<i.length;t+=4)i[t+0]=e.data[t+0],i[t+1]=e.data[t+1],i[t+2]=e.data[t+2],i[t+3]=e.data[t+3];g.putImageData(new ImageData(i,e.width,e.height),0,0)}else g.drawImage(e,0,0,c.width,c.height);!0===o.binary?A.push(sm(c,s).then(e=>r.processBufferViewImage(e)).then(e=>{u.bufferView=e})):void 0!==c.toDataURL?u.uri=c.toDataURL(s):A.push(sm(c,s).then(e=>new FileReader().readAsDataURL(e)).then(e=>{u.uri=e}));let d=a.images.push(u)-1;return l[h]=d,d}throw Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}processSampler(e){let t=this.json;t.samplers||(t.samplers=[]);let i={magFilter:sl[e.magFilter],minFilter:sl[e.minFilter],wrapS:sl[e.wrapS],wrapT:sl[e.wrapT]};return t.samplers.push(i)-1}processTexture(e){let t=this.options,i=this.cache,s=this.json;if(i.textures.has(e))return i.textures.get(e);s.textures||(s.textures=[]),e instanceof eu.EB7&&(e=sr(e,t.maxTextureSize));let r=e.userData.mimeType;"image/webp"===r&&(r="image/png");let n={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY,r)};e.name&&(n.name=e.name),this._invokeAll(function(t){t.writeTexture&&t.writeTexture(e,n)});let a=s.textures.push(n)-1;return i.textures.set(e,a),a}processMaterial(e){let t=this.cache,i=this.json;if(t.materials.has(e))return t.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;i.materials||(i.materials=[]);let s={pbrMetallicRoughness:{}};!0!==e.isMeshStandardMaterial&&!0!==e.isMeshBasicMaterial&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");let r=e.color.toArray().concat([e.opacity]);if(sc(r,[1,1,1,1])||(s.pbrMetallicRoughness.baseColorFactor=r),e.isMeshStandardMaterial?(s.pbrMetallicRoughness.metallicFactor=e.metalness,s.pbrMetallicRoughness.roughnessFactor=e.roughness):(s.pbrMetallicRoughness.metallicFactor=.5,s.pbrMetallicRoughness.roughnessFactor=.5),e.metalnessMap||e.roughnessMap){let t=this.buildMetalRoughTexture(e.metalnessMap,e.roughnessMap),i={index:this.processTexture(t),channel:t.channel};this.applyTextureTransform(i,t),s.pbrMetallicRoughness.metallicRoughnessTexture=i}if(e.map){let t={index:this.processTexture(e.map),texCoord:e.map.channel};this.applyTextureTransform(t,e.map),s.pbrMetallicRoughness.baseColorTexture=t}if(e.emissive){let t=e.emissive;if(Math.max(t.r,t.g,t.b)>0&&(s.emissiveFactor=e.emissive.toArray()),e.emissiveMap){let t={index:this.processTexture(e.emissiveMap),texCoord:e.emissiveMap.channel};this.applyTextureTransform(t,e.emissiveMap),s.emissiveTexture=t}}if(e.normalMap){let t={index:this.processTexture(e.normalMap),texCoord:e.normalMap.channel};e.normalScale&&1!==e.normalScale.x&&(t.scale=e.normalScale.x),this.applyTextureTransform(t,e.normalMap),s.normalTexture=t}if(e.aoMap){let t={index:this.processTexture(e.aoMap),texCoord:e.aoMap.channel};1!==e.aoMapIntensity&&(t.strength=e.aoMapIntensity),this.applyTextureTransform(t,e.aoMap),s.occlusionTexture=t}e.transparent?s.alphaMode="BLEND":e.alphaTest>0&&(s.alphaMode="MASK",s.alphaCutoff=e.alphaTest),e.side===eu.ehD&&(s.doubleSided=!0),""!==e.name&&(s.name=e.name),this.serializeUserData(e,s),this._invokeAll(function(t){t.writeMaterial&&t.writeMaterial(e,s)});let n=i.materials.push(s)-1;return t.materials.set(e,n),n}processMesh(e){let t;let i=this.cache,s=this.json,r=[e.geometry.uuid];if(Array.isArray(e.material))for(let t=0,i=e.material.length;t<i;t++)r.push(e.material[t].uuid);else r.push(e.material.uuid);let n=r.join(":");if(i.meshes.has(n))return i.meshes.get(n);let a=e.geometry;t=e.isLineSegments?so.LINES:e.isLineLoop?so.LINE_LOOP:e.isLine?so.LINE_STRIP:e.isPoints?so.POINTS:e.material.wireframe?so.LINES:so.TRIANGLES;let o={},A={},l=[],h=[],u={uv:"TEXCOORD_0",uv1:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},c=a.getAttribute("normal");void 0===c||this.isNormalizedNormalAttribute(c)||(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),a.setAttribute("normal",this.createNormalizedNormalAttribute(c)));let g=null;for(let e in a.attributes){if("morph"===e.slice(0,5))continue;let t=a.attributes[e];if(e=u[e]||e.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(e)||(e="_"+e),i.attributes.has(this.getUID(t))){A[e]=i.attributes.get(this.getUID(t));continue}g=null;let s=t.array;"JOINTS_0"!==e||s instanceof Uint16Array||s instanceof Uint8Array||(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),g=new eu.TlE(new Uint16Array(s),t.itemSize,t.normalized));let r=this.processAccessor(g||t,a);null!==r&&(e.startsWith("_")||this.detectMeshQuantization(e,t),A[e]=r,i.attributes.set(this.getUID(t),r))}if(void 0!==c&&a.setAttribute("normal",c),0===Object.keys(A).length)return null;if(void 0!==e.morphTargetInfluences&&e.morphTargetInfluences.length>0){let t=[],s=[],r={};if(void 0!==e.morphTargetDictionary)for(let t in e.morphTargetDictionary)r[e.morphTargetDictionary[t]]=t;for(let n=0;n<e.morphTargetInfluences.length;++n){let o={},A=!1;for(let e in a.morphAttributes){if("position"!==e&&"normal"!==e){A||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),A=!0);continue}let t=a.morphAttributes[e][n],s=e.toUpperCase(),r=a.attributes[e];if(i.attributes.has(this.getUID(t,!0))){o[s]=i.attributes.get(this.getUID(t,!0));continue}let l=t.clone();if(!a.morphTargetsRelative)for(let e=0,i=t.count;e<i;e++)for(let i=0;i<t.itemSize;i++)0===i&&l.setX(e,t.getX(e)-r.getX(e)),1===i&&l.setY(e,t.getY(e)-r.getY(e)),2===i&&l.setZ(e,t.getZ(e)-r.getZ(e)),3===i&&l.setW(e,t.getW(e)-r.getW(e));o[s]=this.processAccessor(l,a),i.attributes.set(this.getUID(r,!0),o[s])}h.push(o),t.push(e.morphTargetInfluences[n]),void 0!==e.morphTargetDictionary&&s.push(r[n])}o.weights=t,s.length>0&&(o.extras={},o.extras.targetNames=s)}let d=Array.isArray(e.material);if(d&&0===a.groups.length)return null;let p=d?e.material:[e.material],m=d?a.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let e=0,s=m.length;e<s;e++){let s={mode:t,attributes:A};if(this.serializeUserData(a,s),h.length>0&&(s.targets=h),null!==a.index){let t=this.getUID(a.index);(void 0!==m[e].start||void 0!==m[e].count)&&(t+=":"+m[e].start+":"+m[e].count),i.attributes.has(t)?s.indices=i.attributes.get(t):(s.indices=this.processAccessor(a.index,a,m[e].start,m[e].count),i.attributes.set(t,s.indices)),null===s.indices&&delete s.indices}let r=this.processMaterial(p[m[e].materialIndex]);null!==r&&(s.material=r),l.push(s)}o.primitives=l,s.meshes||(s.meshes=[]),this._invokeAll(function(t){t.writeMesh&&t.writeMesh(e,o)});let f=s.meshes.push(o)-1;return i.meshes.set(n,f),f}detectMeshQuantization(e,t){let i;if(this.extensionsUsed[sA])return;switch(t.array.constructor){case Int8Array:i="byte";break;case Uint8Array:i="unsigned byte";break;case Int16Array:i="short";break;case Uint16Array:i="unsigned short";break;default:return}t.normalized&&(i+=" normalized");let s=e.split("_",1)[0];sn[s]&&sn[s].includes(i)&&(this.extensionsUsed[sA]=!0,this.extensionsRequired[sA]=!0)}processCamera(e){let t=this.json;t.cameras||(t.cameras=[]);let i=e.isOrthographicCamera,s={type:i?"orthographic":"perspective"};return i?s.orthographic={xmag:2*e.right,ymag:2*e.top,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:s.perspective={aspectRatio:e.aspect,yfov:eu.M8C.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},""!==e.name&&(s.name=e.type),t.cameras.push(s)-1}processAnimation(e,t){let i=this.json,s=this.nodeMap;i.animations||(i.animations=[]);let r=(e=sa.Utils.mergeMorphTargetTracks(e.clone(),t)).tracks,n=[],a=[];for(let e=0;e<r.length;++e){let i;let o=r[e],A=eu.iUV.parseTrackName(o.name),l=eu.iUV.findNode(t,A.nodeName),h=sh[A.propertyName];if("bones"===A.objectName&&(l=!0===l.isSkinnedMesh?l.skeleton.getBoneByName(A.objectIndex):void 0),!l||!h)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',o.name),null;let u=o.values.length/o.times.length;h===sh.morphTargetInfluences&&(u/=l.morphTargetInfluences.length),!0===o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline?(i="CUBICSPLINE",u/=3):i=o.getInterpolation()===eu.Syv?"STEP":"LINEAR",a.push({input:this.processAccessor(new eu.TlE(o.times,1)),output:this.processAccessor(new eu.TlE(o.values,u)),interpolation:i}),n.push({sampler:a.length-1,target:{node:s.get(l),path:h}})}return i.animations.push({name:e.name||"clip_"+i.animations.length,samplers:a,channels:n}),i.animations.length-1}processSkin(e){let t=this.json,i=this.nodeMap,s=t.nodes[i.get(e)],r=e.skeleton;if(void 0===r)return null;let n=e.skeleton.bones[0];if(void 0===n)return null;let a=[],o=new Float32Array(16*r.bones.length),A=new eu.yGw;for(let t=0;t<r.bones.length;++t)a.push(i.get(r.bones[t])),A.copy(r.boneInverses[t]),A.multiply(e.bindMatrix).toArray(o,16*t);return void 0===t.skins&&(t.skins=[]),t.skins.push({inverseBindMatrices:this.processAccessor(new eu.TlE(o,16)),joints:a,skeleton:i.get(n)}),s.skin=t.skins.length-1}processNode(e){let t=this.json,i=this.options,s=this.nodeMap;t.nodes||(t.nodes=[]);let r={};if(i.trs){let t=e.quaternion.toArray(),i=e.position.toArray(),s=e.scale.toArray();sc(t,[0,0,0,1])||(r.rotation=t),sc(i,[0,0,0])||(r.translation=i),sc(s,[1,1,1])||(r.scale=s)}else e.matrixAutoUpdate&&e.updateMatrix(),!1===sc(e.matrix.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])&&(r.matrix=e.matrix.elements);if(""!==e.name&&(r.name=String(e.name)),this.serializeUserData(e,r),e.isMesh||e.isLine||e.isPoints){let t=this.processMesh(e);null!==t&&(r.mesh=t)}else e.isCamera&&(r.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){let t=[];for(let s=0,r=e.children.length;s<r;s++){let r=e.children[s];if(r.visible||!1===i.onlyVisible){let e=this.processNode(r);null!==e&&t.push(e)}}t.length>0&&(r.children=t)}this._invokeAll(function(t){t.writeNode&&t.writeNode(e,r)});let n=t.nodes.push(r)-1;return s.set(e,n),n}processScene(e){let t=this.json,i=this.options;t.scenes||(t.scenes=[],t.scene=0);let s={};""!==e.name&&(s.name=e.name),t.scenes.push(s);let r=[];for(let t=0,s=e.children.length;t<s;t++){let s=e.children[t];if(s.visible||!1===i.onlyVisible){let e=this.processNode(s);null!==e&&r.push(e)}}r.length>0&&(s.nodes=r),this.serializeUserData(e,s)}processObjects(e){let t=new eu.xsS;t.name="AuxScene";for(let i=0;i<e.length;i++)t.children.push(e[i]);this.processScene(t)}processInput(e){let t=this.options;e=e instanceof Array?e:[e],this._invokeAll(function(t){t.beforeParse&&t.beforeParse(e)});let i=[];for(let t=0;t<e.length;t++)e[t]instanceof eu.xsS?this.processScene(e[t]):i.push(e[t]);i.length>0&&this.processObjects(i);for(let e=0;e<this.skins.length;++e)this.processSkin(this.skins[e]);for(let i=0;i<t.animations.length;++i)this.processAnimation(t.animations[i],e[0]);this._invokeAll(function(t){t.afterParse&&t.afterParse(e)})}_invokeAll(e){for(let t=0,i=this.plugins.length;t<i;t++)e(this.plugins[t])}}class sI{constructor(e){this.writer=e,this.name="KHR_lights_punctual"}writeNode(e,t){if(!e.isLight)return;if(!e.isDirectionalLight&&!e.isPointLight&&!e.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e);return}let i=this.writer,s=i.json,r=i.extensionsUsed,n={};e.name&&(n.name=e.name),n.color=e.color.toArray(),n.intensity=e.intensity,e.isDirectionalLight?n.type="directional":e.isPointLight?(n.type="point",e.distance>0&&(n.range=e.distance)):e.isSpotLight&&(n.type="spot",e.distance>0&&(n.range=e.distance),n.spot={},n.spot.innerConeAngle=-((e.penumbra-1)*e.angle*1),n.spot.outerConeAngle=e.angle),void 0!==e.decay&&2!==e.decay&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),e.target&&(e.target.parent!==e||0!==e.target.position.x||0!==e.target.position.y||-1!==e.target.position.z)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),r[this.name]||(s.extensions=s.extensions||{},s.extensions[this.name]={lights:[]},r[this.name]=!0);let a=s.extensions[this.name].lights;a.push(n),t.extensions=t.extensions||{},t.extensions[this.name]={light:a.length-1}}}class sE{constructor(e){this.writer=e,this.name="KHR_materials_unlit"}writeMaterial(e,t){if(!e.isMeshBasicMaterial)return;let i=this.writer.extensionsUsed;t.extensions=t.extensions||{},t.extensions[this.name]={},i[this.name]=!0,t.pbrMetallicRoughness.metallicFactor=0,t.pbrMetallicRoughness.roughnessFactor=.9}}class sC{constructor(e){this.writer=e,this.name="KHR_materials_clearcoat"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||0===e.clearcoat)return;let i=this.writer,s=i.extensionsUsed,r={};if(r.clearcoatFactor=e.clearcoat,e.clearcoatMap){let t={index:i.processTexture(e.clearcoatMap),texCoord:e.clearcoatMap.channel};i.applyTextureTransform(t,e.clearcoatMap),r.clearcoatTexture=t}if(r.clearcoatRoughnessFactor=e.clearcoatRoughness,e.clearcoatRoughnessMap){let t={index:i.processTexture(e.clearcoatRoughnessMap),texCoord:e.clearcoatRoughnessMap.channel};i.applyTextureTransform(t,e.clearcoatRoughnessMap),r.clearcoatRoughnessTexture=t}if(e.clearcoatNormalMap){let t={index:i.processTexture(e.clearcoatNormalMap),texCoord:e.clearcoatNormalMap.channel};i.applyTextureTransform(t,e.clearcoatNormalMap),r.clearcoatNormalTexture=t}t.extensions=t.extensions||{},t.extensions[this.name]=r,s[this.name]=!0}}class sB{constructor(e){this.writer=e,this.name="KHR_materials_iridescence"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||0===e.iridescence)return;let i=this.writer,s=i.extensionsUsed,r={};if(r.iridescenceFactor=e.iridescence,e.iridescenceMap){let t={index:i.processTexture(e.iridescenceMap),texCoord:e.iridescenceMap.channel};i.applyTextureTransform(t,e.iridescenceMap),r.iridescenceTexture=t}if(r.iridescenceIor=e.iridescenceIOR,r.iridescenceThicknessMinimum=e.iridescenceThicknessRange[0],r.iridescenceThicknessMaximum=e.iridescenceThicknessRange[1],e.iridescenceThicknessMap){let t={index:i.processTexture(e.iridescenceThicknessMap),texCoord:e.iridescenceThicknessMap.channel};i.applyTextureTransform(t,e.iridescenceThicknessMap),r.iridescenceThicknessTexture=t}t.extensions=t.extensions||{},t.extensions[this.name]=r,s[this.name]=!0}}class sy{constructor(e){this.writer=e,this.name="KHR_materials_transmission"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||0===e.transmission)return;let i=this.writer,s=i.extensionsUsed,r={};if(r.transmissionFactor=e.transmission,e.transmissionMap){let t={index:i.processTexture(e.transmissionMap),texCoord:e.transmissionMap.channel};i.applyTextureTransform(t,e.transmissionMap),r.transmissionTexture=t}t.extensions=t.extensions||{},t.extensions[this.name]=r,s[this.name]=!0}}class sw{constructor(e){this.writer=e,this.name="KHR_materials_volume"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||0===e.transmission)return;let i=this.writer,s=i.extensionsUsed,r={};if(r.thicknessFactor=e.thickness,e.thicknessMap){let t={index:i.processTexture(e.thicknessMap),texCoord:e.thicknessMap.channel};i.applyTextureTransform(t,e.thicknessMap),r.thicknessTexture=t}r.attenuationDistance=e.attenuationDistance,r.attenuationColor=e.attenuationColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=r,s[this.name]=!0}}class sQ{constructor(e){this.writer=e,this.name="KHR_materials_ior"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||1.5===e.ior)return;let i=this.writer.extensionsUsed,s={};s.ior=e.ior,t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}}class sv{constructor(e){this.writer=e,this.name="KHR_materials_specular"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||1===e.specularIntensity&&e.specularColor.equals(su)&&!e.specularIntensityMap&&!e.specularColorTexture)return;let i=this.writer,s=i.extensionsUsed,r={};if(e.specularIntensityMap){let t={index:i.processTexture(e.specularIntensityMap),texCoord:e.specularIntensityMap.channel};i.applyTextureTransform(t,e.specularIntensityMap),r.specularTexture=t}if(e.specularColorMap){let t={index:i.processTexture(e.specularColorMap),texCoord:e.specularColorMap.channel};i.applyTextureTransform(t,e.specularColorMap),r.specularColorTexture=t}r.specularFactor=e.specularIntensity,r.specularColorFactor=e.specularColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=r,s[this.name]=!0}}class sb{constructor(e){this.writer=e,this.name="KHR_materials_sheen"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||0==e.sheen)return;let i=this.writer,s=i.extensionsUsed,r={};if(e.sheenRoughnessMap){let t={index:i.processTexture(e.sheenRoughnessMap),texCoord:e.sheenRoughnessMap.channel};i.applyTextureTransform(t,e.sheenRoughnessMap),r.sheenRoughnessTexture=t}if(e.sheenColorMap){let t={index:i.processTexture(e.sheenColorMap),texCoord:e.sheenColorMap.channel};i.applyTextureTransform(t,e.sheenColorMap),r.sheenColorTexture=t}r.sheenRoughnessFactor=e.sheenRoughness,r.sheenColorFactor=e.sheenColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=r,s[this.name]=!0}}class sS{constructor(e){this.writer=e,this.name="KHR_materials_anisotropy"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||0==e.anisotropy)return;let i=this.writer,s=i.extensionsUsed,r={};if(e.anisotropyMap){let t={index:i.processTexture(e.anisotropyMap)};i.applyTextureTransform(t,e.anisotropyMap),r.anisotropyTexture=t}r.anisotropyStrength=e.anisotropy,r.anisotropyRotation=e.anisotropyRotation,t.extensions=t.extensions||{},t.extensions[this.name]=r,s[this.name]=!0}}class sx{constructor(e){this.writer=e,this.name="KHR_materials_emissive_strength"}writeMaterial(e,t){if(!e.isMeshStandardMaterial||1===e.emissiveIntensity)return;let i=this.writer.extensionsUsed,s={};s.emissiveStrength=e.emissiveIntensity,t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}}sa.Utils={insertKeyframe:function(e,t){let i;let s=e.getValueSize(),r=new e.TimeBufferType(e.times.length+1),n=new e.ValueBufferType(e.values.length+s),a=e.createInterpolant(new e.ValueBufferType(s));if(0===e.times.length){r[0]=t;for(let e=0;e<s;e++)n[e]=0;i=0}else if(t<e.times[0]){if(.001>Math.abs(e.times[0]-t))return 0;r[0]=t,r.set(e.times,1),n.set(a.evaluate(t),0),n.set(e.values,s),i=0}else if(t>e.times[e.times.length-1]){if(.001>Math.abs(e.times[e.times.length-1]-t))return e.times.length-1;r[r.length-1]=t,r.set(e.times,0),n.set(e.values,0),n.set(a.evaluate(t),e.values.length),i=r.length-1}else for(let o=0;o<e.times.length;o++){if(.001>Math.abs(e.times[o]-t))return o;if(e.times[o]<t&&e.times[o+1]>t){r.set(e.times.slice(0,o+1),0),r[o+1]=t,r.set(e.times.slice(o+1),o+2),n.set(e.values.slice(0,(o+1)*s),0),n.set(a.evaluate(t),(o+1)*s),n.set(e.values.slice((o+1)*s),(o+2)*s),i=o+1;break}}return e.times=r,e.values=n,i},mergeMorphTargetTracks:function(e,t){let i=[],s={},r=e.tracks;for(let e=0;e<r.length;++e){let n,a=r[e],o=eu.iUV.parseTrackName(a.name),A=eu.iUV.findNode(t,o.nodeName);if("morphTargetInfluences"!==o.propertyName||void 0===o.propertyIndex){i.push(a);continue}if(a.createInterpolant!==a.InterpolantFactoryMethodDiscrete&&a.createInterpolant!==a.InterpolantFactoryMethodLinear){if(a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),(a=a.clone()).setInterpolation(eu.NMF)}let l=A.morphTargetInfluences.length,h=A.morphTargetDictionary[o.propertyIndex];if(void 0===h)throw Error("THREE.GLTFExporter: Morph target name not found: "+o.propertyIndex);if(void 0===s[A.uuid]){let e=new(n=a.clone()).ValueBufferType(l*n.times.length);for(let t=0;t<n.times.length;t++)e[t*l+h]=n.values[t];n.name=(o.nodeName||"")+".morphTargetInfluences",n.values=e,s[A.uuid]=n,i.push(n);continue}let u=a.createInterpolant(new a.ValueBufferType(1));n=s[A.uuid];for(let e=0;e<n.times.length;e++)n.values[e*l+h]=u.evaluate(n.times[e]);for(let e=0;e<a.times.length;e++){let t=this.insertKeyframe(n,a.times[e]);n.values[t*l+h]=a.values[e]}}return e.tracks=i,e}};/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sR=e=>void 0!==e.material&&e.userData&&e.userData.variantMaterials&&!!Array.from(e.userData.variantMaterials.values()).filter(e=>sT(e.material)),sT=e=>e&&e.isMaterial&&!Array.isArray(e);class sM{constructor(e){this.writer=e,this.name="KHR_materials_variants",this.variantNames=[]}beforeParse(e){let t=new Set;for(let i of e)i.traverse(e=>{if(!sR(e))return;let i=e.userData.variantMaterials;for(let[s,r]of e.userData.variantData){let e=i.get(r.index);e&&sT(e.material)&&t.add(s)}});t.forEach(e=>this.variantNames.push(e))}writeMesh(e,t){if(!sR(e))return;let i=e.userData,s=i.variantMaterials,r=i.variantData,n=new Map,a=new Map;for(let[e,t]of Array.from(r.values()).sort((e,t)=>e.index-t.index).entries())a.set(t.index,e);for(let e of r.values()){let t=s.get(e.index);if(!t||!sT(t.material))continue;let i=this.writer.processMaterial(t.material);n.has(i)||n.set(i,{material:i,variants:[]}),n.get(i).variants.push(a.get(e.index))}let o=Array.from(n.values()).map(e=>e.variants.sort((e,t)=>e-t)&&e).sort((e,t)=>e.material-t.material);if(0===o.length)return;let A=sT(i.originalMaterial)?this.writer.processMaterial(i.originalMaterial):-1;for(let e of t.primitives)A>=0&&(e.material=A),e.extensions=e.extensions||{},e.extensions[this.name]={mappings:o}}afterParse(){if(0===this.variantNames.length)return;let e=this.writer.json;e.extensions=e.extensions||{};let t=this.variantNames.map(e=>({name:e}));e.extensions[this.name]={variants:t},this.writer.extensionsUsed[this.name]=!0}}class sD{constructor(e,t,i,s,r){this.xrLight=e,this.renderer=t,this.lightProbe=i,this.xrWebGLBinding=null,this.estimationStartCallback=r,this.frameCallback=this.onXRFrame.bind(this);let n=t.xr.getSession();if(s&&"XRWebGLBinding"in window){let i=new eu.oAp(16);e.environment=i.texture;let s=t.getContext();switch(n.preferredReflectionFormat){case"srgba8":s.getExtension("EXT_sRGB");break;case"rgba16f":s.getExtension("OES_texture_half_float")}this.xrWebGLBinding=new XRWebGLBinding(n,s),this.lightProbe.addEventListener("reflectionchange",()=>{this.updateReflection()})}n.requestAnimationFrame(this.frameCallback)}updateReflection(){let e=this.renderer.properties.get(this.xrLight.environment);if(e){let t=this.xrWebGLBinding.getReflectionCubeMap(this.lightProbe);t&&(e.__webglTexture=t,this.xrLight.environment.needsPMREMUpdate=!0)}}onXRFrame(e,t){if(!this.xrLight)return;t.session.requestAnimationFrame(this.frameCallback);let i=t.getLightEstimate(this.lightProbe);if(i){this.xrLight.lightProbe.sh.fromArray(i.sphericalHarmonicsCoefficients),this.xrLight.lightProbe.intensity=1;let e=Math.max(1,Math.max(i.primaryLightIntensity.x,Math.max(i.primaryLightIntensity.y,i.primaryLightIntensity.z)));this.xrLight.directionalLight.color.setRGB(i.primaryLightIntensity.x/e,i.primaryLightIntensity.y/e,i.primaryLightIntensity.z/e),this.xrLight.directionalLight.intensity=e,this.xrLight.directionalLight.position.copy(i.primaryLightDirection),this.estimationStartCallback&&(this.estimationStartCallback(),this.estimationStartCallback=null)}}dispose(){this.xrLight=null,this.renderer=null,this.lightProbe=null,this.xrWebGLBinding=null}}class sL extends eu.ZAu{constructor(e,t=!0){super(),this.lightProbe=new eu.lk7,this.lightProbe.intensity=0,this.add(this.lightProbe),this.directionalLight=new eu.Ox3,this.directionalLight.intensity=0,this.add(this.directionalLight),this.environment=null;let i=null,s=!1;e.xr.addEventListener("sessionstart",()=>{let r=e.xr.getSession();"requestLightProbe"in r&&r.requestLightProbe({reflectionFormat:r.preferredReflectionFormat}).then(r=>{i=new sD(this,e,r,t,()=>{s=!0,this.dispatchEvent({type:"estimationstart"})})})}),e.xr.addEventListener("sessionend",()=>{i&&(i.dispose(),i=null),s&&this.dispatchEvent({type:"estimationend"})}),this.dispose=()=>{i&&(i.dispose(),i=null),this.remove(this.lightProbe),this.lightProbe=null,this.remove(this.directionalLight),this.directionalLight=null,this.environment=null}}}class sF{constructor(e=50){this.velocity=0,this.naturalFrequency=0,this.setDecayTime(e)}setDecayTime(e){this.naturalFrequency=1/Math.max(.001,e)}update(e,t,i,s){let r=2e-4*this.naturalFrequency;if(null==e||0===s||e===t&&0===this.velocity)return t;if(i<0)return e;let n=e-t,a=this.velocity+this.naturalFrequency*n,o=n+i*a,A=Math.exp(-this.naturalFrequency*i),l=(a-this.naturalFrequency*o)*A,h=-this.naturalFrequency*(l+a*A);return Math.abs(l)<r*Math.abs(s)&&h*n>=0?(this.velocity=0,t):(this.velocity=l,t+o*A)}}let sk=Math.PI/24,sU=new eu.FM8,s_=(e,t,i)=>{let s=t>0?i>0?0:-Math.PI/2:i>0?Math.PI/2:Math.PI;for(let r=0;r<=12;++r)e.push(t+.17*Math.cos(s),i+.17*Math.sin(s),0,t+.2*Math.cos(s),i+.2*Math.sin(s),0),s+=sk};class sN extends eu.Kj0{constructor(e,t){let i=new eu.u9r,s=[],r=[],{size:n,boundingBox:a}=e,o=n.x/2,A=("back"===t?n.y:n.z)/2;s_(r,o,A),s_(r,-o,A),s_(r,-o,-A),s_(r,o,-A);let l=r.length/3;for(let e=0;e<l-2;e+=2)s.push(e,e+1,e+3,e,e+3,e+2);let h=l-2;s.push(h,h+1,1,h,1,0),i.setAttribute("position",new eu.a$l(r,3)),i.setIndex(s),super(i),this.side=t;let u=this.material;switch(u.side=eu.ehD,u.transparent=!0,u.opacity=0,this.goalOpacity=0,this.opacityDamper=new sF,this.hitPlane=new eu.Kj0(new eu._12(2*(o+.2),2*(A+.2))),this.hitPlane.visible=!1,this.hitPlane.material.side=eu.ehD,this.add(this.hitPlane),a.getCenter(this.position),t){case"bottom":this.rotateX(-Math.PI/2),this.shadowHeight=a.min.y,this.position.y=this.shadowHeight;break;case"back":this.shadowHeight=a.min.z,this.position.z=this.shadowHeight}e.target.add(this),this.offsetHeight=0}getHit(e,t,i){sU.set(t,-i),this.hitPlane.visible=!0;let s=e.positionAndNormalFromPoint(sU,this.hitPlane);return this.hitPlane.visible=!1,null==s?null:s.position}getExpandedHit(e,t,i){this.hitPlane.scale.set(1e3,1e3,1e3),this.hitPlane.updateMatrixWorld();let s=this.getHit(e,t,i);return this.hitPlane.scale.set(1,1,1),s}set offsetHeight(e){e-=.001,"back"===this.side?this.position.z=this.shadowHeight+e:this.position.y=this.shadowHeight+e}get offsetHeight(){return"back"===this.side?this.position.z-this.shadowHeight:this.position.y-this.shadowHeight}set show(e){this.goalOpacity=e?.75:0}updateOpacity(e){let t=this.material;t.opacity=this.opacityDamper.update(t.opacity,this.goalOpacity,e,1),this.visible=t.opacity>0}dispose(){var e;let{geometry:t,material:i}=this.hitPlane;t.dispose(),i.dispose(),this.geometry.dispose(),this.material.dispose(),null===(e=this.parent)||void 0===e||e.remove(this)}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sG=(e,t)=>({type:"number",number:e,unit:t}),sP=(()=>{let e={};return t=>{let i=t;if(i in e)return e[i];let s=[],r=0;for(;t;){if(++r>1e3){t="";break}let e=sO(t),i=e.nodes[0];if(null==i||0===i.terms.length)break;s.push(i),t=e.remainingInput}return e[i]=s}})(),sO=(()=>{let e=/^(\-\-|[a-z\u0240-\uffff])/i,t=/^([\*\+\/]|[\-]\s)/i,i=/^[\),]/;return s=>{let r=[];for(;s.length&&(s=s.trim(),!i.test(s));)if("("===s[0]){let{nodes:e,remainingInput:t}=sV(s);s=t,r.push({type:"function",name:{type:"ident",value:"calc"},arguments:e})}else if(e.test(s)){let e=sH(s),t=e.nodes[0];if("("===(s=e.remainingInput)[0]){let{nodes:e,remainingInput:i}=sV(s);r.push({type:"function",name:t,arguments:e}),s=i}else r.push(t)}else if(t.test(s))r.push({type:"operator",value:s[0]}),s=s.slice(1);else{let{nodes:e,remainingInput:t}="#"===s[0]?sK(s):sq(s);if(0===e.length)break;r.push(e[0]),s=t}return{nodes:[{type:"expression",terms:r}],remainingInput:s}}})(),sH=(()=>{let e=/[^a-z0-9_\-\u0240-\uffff]/i;return t=>{let i=t.match(e);return{nodes:[{type:"ident",value:null==i?t:t.substr(0,i.index)}],remainingInput:null==i?"":t.substr(i.index)}}})(),sq=(()=>{let e=/[\+\-]?(\d+[\.]\d+|\d+|[\.]\d+)([eE][\+\-]?\d+)?/,t=/^[a-z%]+/i,i=/^(m|mm|cm|rad|deg|[%])$/;return s=>{let r=s.match(e),n=null==r?"0":r[0],a=(s=null==n?s:s.slice(n.length)).match(t),o=null!=a&&""!==a[0]?a[0]:null,A=null==a?s:s.slice(o.length);return null==o||i.test(o)||(o=null),{nodes:[{type:"number",number:parseFloat(n)||0,unit:o}],remainingInput:A}}})(),sK=(()=>{let e=/^[a-f0-9]*/i;return t=>{let i=(t=t.slice(1).trim()).match(e);return{nodes:null==i?[]:[{type:"hex",value:i[0]}],remainingInput:null==i?t:t.slice(i[0].length)}}})(),sV=e=>{let t=[];for(e=e.slice(1).trim();e.length;){let i=sO(e);if(t.push(i.nodes[0]),","===(e=i.remainingInput.trim())[0])e=e.slice(1).trim();else if(")"===e[0]){e=e.slice(1);break}}return{nodes:t,remainingInput:e}},sJ=Symbol("visitedTypes");class sY{constructor(e){this[sJ]=e}walk(e,t){let i=e.slice();for(;i.length;){let e=i.shift();switch(this[sJ].indexOf(e.type)>-1&&t(e),e.type){case"expression":i.unshift(...e.terms);break;case"function":i.unshift(e.name,...e.arguments)}}}}let sj=Object.freeze({type:"number",number:0,unit:null}),sz=(e,t=0)=>{let{number:i,unit:s}=e;if(isFinite(i)){if("rad"===e.unit||null==e.unit)return e}else i=t,s="rad";return{type:"number",number:("deg"===s&&null!=i?i:0)*Math.PI/180,unit:"rad"}},s$=(e,t=0)=>{let i,{number:s,unit:r}=e;if(isFinite(s)){if("m"===e.unit)return e}else s=t,r="m";switch(r){default:i=1;break;case"cm":i=.01;break;case"mm":i=.001}return{type:"number",number:i*s,unit:"m"}},sW=(()=>{let e=e=>e,t={rad:e,deg:sz,m:e,mm:s$,cm:s$};return(e,i=sj)=>{isFinite(e.number)||(e.number=i.number,e.unit=i.unit);let{unit:s}=e;if(null==s)return e;let r=t[s];return null==r?i:r(e)}})(),sX=Symbol("evaluate"),sZ=Symbol("lastValue");class s0{constructor(){this[M]=null}static evaluatableFor(e,t=sj){if(e instanceof s0)return e;if("number"===e.type)return"%"===e.unit?new s3(e,t):e;switch(e.name.value){case"calc":return new s9(e,t);case"env":return new s4(e)}return sj}static evaluate(e){return e instanceof s0?e.evaluate():e}static isConstant(e){return!(e instanceof s0)||e.isConstant}static applyIntrinsics(e,t){let{basis:i,keywords:s}=t,{auto:r}=s;return i.map((t,i)=>{let n=null==r[i]?t:r[i],a=e[i]?e[i]:n;if("ident"===a.type){let e=a.value;e in s&&(a=s[e][i])}return((null==a||"ident"===a.type)&&(a=n),"%"===a.unit)?sG(a.number/100*t.number,t.unit):(a=sW(a,t)).unit!==t.unit?t:a})}get isConstant(){return!1}evaluate(){return this.isConstant&&null!=this[sZ]||(this[sZ]=this[sX]()),this[sZ]}}M=sZ;let s1=Symbol("percentage"),s2=Symbol("basis");class s3 extends s0{constructor(e,t){super(),this[s1]=e,this[s2]=t}get isConstant(){return!0}[sX](){return sG(this[s1].number/100*this[s2].number,this[s2].unit)}}let s8=Symbol("identNode");class s4 extends s0{constructor(e){super(),this[D]=null;let t=e.arguments.length?e.arguments[0].terms[0]:null;null!=t&&"ident"===t.type&&(this[s8]=t)}get isConstant(){return!1}[(D=s8,sX)](){return null!=this[s8]&&"window-scroll-y"===this[s8].value?{type:"number",number:window.pageYOffset/(Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)-window.innerHeight)||0,unit:null}:sj}}let s5=/[\*\/]/,s6=Symbol("evaluator");class s9 extends s0{constructor(e,t=sj){if(super(),this[L]=null,1!==e.arguments.length)return;let i=e.arguments[0].terms.slice(),s=[];for(;i.length;){let e=i.shift();if(s.length>0){let i=s[s.length-1];if("operator"===i.type&&s5.test(i.value)){let i=s.pop(),r=s.pop();if(null==r)return;s.push(new ri(i,s0.evaluatableFor(r,t),s0.evaluatableFor(e,t)));continue}}s.push("operator"===e.type?e:s0.evaluatableFor(e,t))}for(;s.length>2;){let[e,i,r]=s.splice(0,3);if("operator"!==i.type)return;s.unshift(new ri(i,s0.evaluatableFor(e,t),s0.evaluatableFor(r,t)))}1===s.length&&(this[s6]=s[0])}get isConstant(){return null==this[s6]||s0.isConstant(this[s6])}[(L=s6,sX)](){return null!=this[s6]?s0.evaluate(this[s6]):sj}}let s7=Symbol("operator"),re=Symbol("left"),rt=Symbol("right");class ri extends s0{constructor(e,t,i){super(),this[s7]=e,this[re]=t,this[rt]=i}get isConstant(){return s0.isConstant(this[re])&&s0.isConstant(this[rt])}[sX](){let e;let t=sW(s0.evaluate(this[re])),i=sW(s0.evaluate(this[rt])),{number:s,unit:r}=t,{number:n,unit:a}=i;if(null!=a&&null!=r&&a!=r)return sj;switch(this[s7].value){case"+":e=s+n;break;case"-":e=s-n;break;case"/":e=s/n;break;case"*":e=s*n;break;default:return sj}return{type:"number",number:e,unit:r||a}}}let rs=Symbol("evaluatables"),rr=Symbol("intrinsics");class rn extends s0{constructor(e,t){super(),this[rr]=t;let i=e[0],s=null!=i?i.terms:[];this[rs]=t.basis.map((e,t)=>{let i=s[t];return null==i?{type:"ident",value:"auto"}:"ident"===i.type?i:s0.evaluatableFor(i,e)})}get isConstant(){for(let e of this[rs])if(!s0.isConstant(e))return!1;return!0}[sX](){let e=this[rs].map(e=>s0.evaluate(e));return s0.applyIntrinsics(e,this[rr]).map(e=>e.number)}}let ra=Symbol("instances"),ro=Symbol("activateListener"),rA=Symbol("deactivateListener"),rl=Symbol("notifyInstances"),rh=Symbol("notify"),ru=Symbol("callback");class rc{constructor(e){this[ru]=e}static[rl](){for(let e of rc[ra])e[rh]()}static[(F=ra,ro)](){window.addEventListener("scroll",this[rl],{passive:!0})}static[rA](){window.removeEventListener("scroll",this[rl])}observe(){0===rc[ra].size&&rc[ro](),rc[ra].add(this)}disconnect(){rc[ra].delete(this),0===rc[ra].size&&rc[rA]()}[rh](){this[ru]()}}rc[F]=new Set;let rg=Symbol("computeStyleCallback"),rd=Symbol("astWalker"),rp=Symbol("dependencies"),rm=Symbol("onScroll");class rf{constructor(e){this[k]={},this[U]=new sY(["function"]),this[_]=()=>{this[rg]({relatedState:"window-scroll"})},this[rg]=e}observeEffectsFor(e){let t={},i=this[rp];for(let s in this[rd].walk(e,e=>{let{name:s}=e,r=e.arguments[0].terms[0];if("env"===s.value&&null!=r&&"ident"===r.type&&"window-scroll-y"===r.value&&null==t["window-scroll"]){let e="window-scroll"in i?i["window-scroll"]:new rc(this[rm]);e.observe(),delete i["window-scroll"],t["window-scroll"]=e}}),i)i[s].disconnect();this[rp]=t}dispose(){for(let e in this[rp])this[rp][e].disconnect()}}k=rp,U=rd,_=rm;/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rI=e=>{let t=e.observeEffects||!1,i=e.intrinsics instanceof Function?e.intrinsics:()=>e.intrinsics;return(s,r)=>{let n=s.updated,a=s.connectedCallback,o=s.disconnectedCallback,A=Symbol(`${r}StyleEffector`),l=Symbol(`${r}StyleEvaluator`),h=Symbol(`${r}UpdateEvaluator`),u=Symbol(`${r}EvaluateAndSync`);Object.defineProperties(s,{[A]:{value:null,writable:!0},[l]:{value:null,writable:!0},[h]:{value:function(){let e=sP(this[r]);this[l]=new rn(e,i(this)),null==this[A]&&t&&(this[A]=new rf(()=>this[u]())),null!=this[A]&&this[A].observeEffectsFor(e)}},[u]:{value:function(){if(null==this[l])return;let t=this[l].evaluate();this[e.updateHandler](t)}},updated:{value:function(e){e.has(r)&&(this[h](),this[u]()),n.call(this,e)}},connectedCallback:{value:function(){a.call(this),this.requestUpdate(r,this[r])}},disconnectedCallback:{value:function(){o.call(this),null!=this[A]&&(this[A].dispose(),this[A]=null)}}})}},rE=e=>e<.5?2*e*e:-1+(4-2*e)*e,rC=(e,t,i=rE)=>s=>e+(t-e)*i(s),rB=(e,t)=>{let i;let s=t.map((i=0,e=>i+=e));return t=>{t=tw(t,0,1)*s[s.length-1];let i=s.findIndex(e=>e>=t),r=i<1?0:s[i-1],n=s[i];return e[i]((t-r)/(n-r))}},ry=e=>{let t=[],i=[],s=e.initialValue;for(let r=0;r<e.keyframes.length;++r){let n=e.keyframes[r],{value:a,frames:o}=n,A=rC(s,a,n.ease||rE);t.push(A),i.push(o),s=a}return rB(t,i)};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rw=function(e,t,i,s){var r,n=arguments.length,a=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,s);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let rQ=ry({initialValue:0,keyframes:[{frames:5,value:-1},{frames:1,value:-1},{frames:8,value:1},{frames:1,value:1},{frames:5,value:0},{frames:18,value:0}]}),rv=ry({initialValue:0,keyframes:[{frames:1,value:1},{frames:5,value:1},{frames:1,value:0},{frames:6,value:0}]}),rb="0deg 75deg 105%",rS=["front","right","back","left"],rx=["upper-","","lower-"],rR={AUTO:"auto"},rT={BASIC:"basic",WIGGLE:"wiggle"},rM=()=>({basis:[sz(sG(30,"deg"))],keywords:{auto:[null]}}),rD=()=>({basis:[sz(sG(12,"deg"))],keywords:{auto:[null]}}),rL=(()=>{let e=sP(rb)[0].terms,t=sW(e[0]),i=sW(e[1]);return e=>({basis:[t,i,sG(e[oL].idealCameraDistance(),"m")],keywords:{auto:[null,null,sG(105,"%")]}})})(),rF=e=>{let t=2.2*e[oL].boundingSphere.radius;return{basis:[sG(-1/0,"rad"),sG(Math.PI/8,"rad"),sG(t,"m")],keywords:{auto:[null,null,null]}}},rk=e=>{let t=new rn([],rL(e)).evaluate()[2];return{basis:[sG(1/0,"rad"),sG(Math.PI-Math.PI/8,"rad"),sG(t,"m")],keywords:{auto:[null,null,null]}}},rU=e=>{let t=e[oL].boundingBox.getCenter(new eu.Pa4);return{basis:[sG(t.x,"m"),sG(t.y,"m"),sG(t.z,"m")],keywords:{auto:[null,null,null]}}},r_=Math.PI/2,rN=Math.PI/3,rG=r_/2,rP=2*Math.PI,rO=Symbol("controls"),rH=Symbol("panElement"),rq=Symbol("promptElement"),rK=Symbol("promptAnimatedContainer"),rV=Symbol("fingerAnimatedContainers"),rJ=Symbol("deferInteractionPrompt"),rY=Symbol("updateAria"),rj=Symbol("updateCameraForRadius"),rz=Symbol("cancelPrompts"),r$=Symbol("onChange"),rW=Symbol("onPointerChange"),rX=Symbol("waitingToPromptUser"),rZ=Symbol("userHasInteracted"),r0=Symbol("promptElementVisibleTime"),r1=Symbol("lastPromptOffset"),r2=Symbol("cancellationSource"),r3=Symbol("lastSpherical"),r8=Symbol("jumpCamera"),r4=Symbol("initialized"),r5=Symbol("maintainThetaPhi"),r6=Symbol("syncCameraOrbit"),r9=Symbol("syncFieldOfView"),r7=Symbol("syncCameraTarget"),ne=Symbol("syncMinCameraOrbit"),nt=Symbol("syncMaxCameraOrbit"),ni=Symbol("syncMinFieldOfView"),ns=Symbol("syncMaxFieldOfView"),nr=new eu.FM8,nn=new eu.Pa4,na=Object.freeze({minimumRadius:0,maximumRadius:1/0,minimumPolarAngle:Math.PI/8,maximumPolarAngle:Math.PI-Math.PI/8,minimumAzimuthalAngle:-1/0,maximumAzimuthalAngle:1/0,minimumFieldOfView:10,maximumFieldOfView:45,touchAction:"none"}),no=Math.PI/8,nA={USER_INTERACTION:"user-interaction",NONE:"none",AUTOMATIC:"automatic"};class nl extends eu.pBf{constructor(e,t,i){super(),this.camera=e,this.element=t,this.scene=i,this.orbitSensitivity=1,this.inputSensitivity=1,this.changeSource=nA.NONE,this._interactionEnabled=!1,this._disableZoom=!1,this.isUserPointing=!1,this.enablePan=!0,this.enableTap=!0,this.panProjection=new eu.Vkp,this.panPerPixel=0,this.spherical=new eu.$V,this.goalSpherical=new eu.$V,this.thetaDamper=new sF,this.phiDamper=new sF,this.radiusDamper=new sF,this.logFov=Math.log(na.maximumFieldOfView),this.goalLogFov=this.logFov,this.fovDamper=new sF,this.touchMode=null,this.pointers=[],this.startTime=0,this.startPointerPosition={clientX:0,clientY:0},this.lastSeparation=0,this.touchDecided=!1,this.onContext=e=>{if(this.enablePan)e.preventDefault();else for(let e of this.pointers)this.onPointerUp(new PointerEvent("pointercancel",Object.assign(Object.assign({},this.startPointerPosition),{pointerId:e.id})))},this.touchModeZoom=(e,t)=>{if(!this._disableZoom){let e=this.twoTouchDistance(this.pointers[0],this.pointers[1]),t=.04*(this.lastSeparation-e)*50/this.scene.height;this.lastSeparation=e,this.userAdjustOrbit(0,0,t)}this.panPerPixel>0&&this.movePan(e,t)},this.disableScroll=e=>{e.preventDefault()},this.touchModeRotate=(e,t)=>{let{touchAction:i}=this._options;if(!this.touchDecided&&"none"!==i){this.touchDecided=!0;let s=Math.abs(e),r=Math.abs(t);if(this.changeSource===nA.USER_INTERACTION&&("pan-y"===i&&r>s||"pan-x"===i&&s>r)){this.touchMode=null;return}this.element.addEventListener("touchmove",this.disableScroll,{passive:!1})}this.handleSinglePointerMove(e,t)},this.onPointerDown=e=>{if(this.pointers.length>2)return;let{element:t}=this;0===this.pointers.length&&(t.addEventListener("pointermove",this.onPointerMove),t.addEventListener("pointerup",this.onPointerUp),this.touchMode=null,this.touchDecided=!1,this.startPointerPosition.clientX=e.clientX,this.startPointerPosition.clientY=e.clientY,this.startTime=performance.now());try{t.setPointerCapture(e.pointerId)}catch(e){}this.pointers.push({clientX:e.clientX,clientY:e.clientY,id:e.pointerId}),this.isUserPointing=!1,"touch"===e.pointerType?(this.changeSource=e.altKey?nA.AUTOMATIC:nA.USER_INTERACTION,this.onTouchChange(e)):(this.changeSource=nA.USER_INTERACTION,this.onMouseDown(e)),this.changeSource===nA.USER_INTERACTION&&this.dispatchEvent({type:"user-interaction"})},this.onPointerMove=e=>{let t=this.pointers.find(t=>t.id===e.pointerId);if(null==t)return;if("mouse"===e.pointerType&&0===e.buttons){this.onPointerUp(e);return}let i=this.pointers.length,s=(e.clientX-t.clientX)/i,r=(e.clientY-t.clientY)/i;(0!==s||0!==r)&&(t.clientX=e.clientX,t.clientY=e.clientY,"touch"===e.pointerType?(this.changeSource=e.altKey?nA.AUTOMATIC:nA.USER_INTERACTION,null!==this.touchMode&&this.touchMode(s,r)):(this.changeSource=nA.USER_INTERACTION,this.panPerPixel>0?this.movePan(s,r):this.handleSinglePointerMove(s,r)))},this.onPointerUp=e=>{let{element:t}=this,i=this.pointers.findIndex(t=>t.id===e.pointerId);-1!==i&&this.pointers.splice(i,1),this.panPerPixel>0&&!e.altKey&&this.resetRadius(),0===this.pointers.length?(t.removeEventListener("pointermove",this.onPointerMove),t.removeEventListener("pointerup",this.onPointerUp),t.removeEventListener("touchmove",this.disableScroll),this.enablePan&&this.enableTap&&this.recenter(e)):null!==this.touchMode&&this.onTouchChange(e),this.scene.element[rH].style.opacity=0,t.style.cursor="grab",this.panPerPixel=0,this.isUserPointing&&this.dispatchEvent({type:"pointer-change-end"})},this.onWheel=e=>{this.changeSource=nA.USER_INTERACTION;let t=e.deltaY*(1==e.deltaMode?18:1)*.04/30;this.userAdjustOrbit(0,0,t),e.preventDefault(),this.dispatchEvent({type:"user-interaction"})},this.onKeyDown=e=>{let{changeSource:t}=this;this.changeSource=nA.USER_INTERACTION,(e.shiftKey&&this.enablePan?this.panKeyCodeHandler(e):this.orbitZoomKeyCodeHandler(e))?(e.preventDefault(),this.dispatchEvent({type:"user-interaction"})):this.changeSource=t},this._options=Object.assign({},na),this.setOrbit(0,Math.PI/2,1),this.setFieldOfView(100),this.jumpToGoal()}get interactionEnabled(){return this._interactionEnabled}enableInteraction(){if(!1===this._interactionEnabled){let{element:e}=this;e.addEventListener("pointerdown",this.onPointerDown),e.addEventListener("pointercancel",this.onPointerUp),this._disableZoom||e.addEventListener("wheel",this.onWheel),e.addEventListener("keydown",this.onKeyDown),e.addEventListener("touchmove",()=>{},{passive:!1}),e.addEventListener("contextmenu",this.onContext),this.element.style.cursor="grab",this._interactionEnabled=!0,this.updateTouchActionStyle()}}disableInteraction(){if(!0===this._interactionEnabled){let{element:e}=this;e.removeEventListener("pointerdown",this.onPointerDown),e.removeEventListener("pointermove",this.onPointerMove),e.removeEventListener("pointerup",this.onPointerUp),e.removeEventListener("pointercancel",this.onPointerUp),e.removeEventListener("wheel",this.onWheel),e.removeEventListener("keydown",this.onKeyDown),e.removeEventListener("contextmenu",this.onContext),e.style.cursor="",this.touchMode=null,this._interactionEnabled=!1,this.updateTouchActionStyle()}}get options(){return this._options}set disableZoom(e){this._disableZoom!=e&&(this._disableZoom=e,!0===e?this.element.removeEventListener("wheel",this.onWheel):this.element.addEventListener("wheel",this.onWheel),this.updateTouchActionStyle())}getCameraSpherical(e=new eu.$V){return e.copy(this.spherical)}getFieldOfView(){return this.camera.fov}applyOptions(e){Object.assign(this._options,e),this.setOrbit(),this.setFieldOfView(Math.exp(this.goalLogFov))}updateNearFar(e,t){this.camera.far=0===t?2:t,this.camera.near=Math.max(e,this.camera.far/1e3),this.camera.updateProjectionMatrix()}updateAspect(e){this.camera.aspect=e,this.camera.updateProjectionMatrix()}setOrbit(e=this.goalSpherical.theta,t=this.goalSpherical.phi,i=this.goalSpherical.radius){let{minimumAzimuthalAngle:s,maximumAzimuthalAngle:r,minimumPolarAngle:n,maximumPolarAngle:a,minimumRadius:o,maximumRadius:A}=this._options,{theta:l,phi:h,radius:u}=this.goalSpherical,c=tw(e,s,r);isFinite(s)||isFinite(r)||(this.spherical.theta=this.wrapAngle(this.spherical.theta-c)+c);let g=tw(t,n,a),d=tw(i,o,A);return!!((c!==l||g!==h||d!==u)&&isFinite(c)&&isFinite(g)&&isFinite(d))&&(this.goalSpherical.theta=c,this.goalSpherical.phi=g,this.goalSpherical.radius=d,this.goalSpherical.makeSafe(),!0)}setRadius(e){this.goalSpherical.radius=e,this.setOrbit()}setFieldOfView(e){let{minimumFieldOfView:t,maximumFieldOfView:i}=this._options;e=tw(e,t,i),this.goalLogFov=Math.log(e)}setDamperDecayTime(e){this.thetaDamper.setDecayTime(e),this.phiDamper.setDecayTime(e),this.radiusDamper.setDecayTime(e),this.fovDamper.setDecayTime(e)}adjustOrbit(e,t,i){let{theta:s,phi:r,radius:n}=this.goalSpherical,{minimumRadius:a,maximumRadius:o,minimumFieldOfView:A,maximumFieldOfView:l}=this._options,h=this.spherical.theta-s,u=Math.PI-.001,c=s-tw(e,-u-h,u-h),g=0===i?0:((i>0?o:a)-n)/(Math.log(i>0?l:A)-this.goalLogFov),d=n+i*(isFinite(g)?g:(o-a)*2);if(this.setOrbit(c,r-t,d),0!==i){let e=this.goalLogFov+i;this.setFieldOfView(Math.exp(e))}}jumpToGoal(){this.update(0,1e4)}update(e,t){if(this.isStationary())return!1;let{maximumPolarAngle:i,maximumRadius:s}=this._options,r=this.spherical.theta-this.goalSpherical.theta;return!(Math.abs(r)>Math.PI)||isFinite(this._options.minimumAzimuthalAngle)||isFinite(this._options.maximumAzimuthalAngle)||(this.spherical.theta-=2*Math.sign(r)*Math.PI),this.spherical.theta=this.thetaDamper.update(this.spherical.theta,this.goalSpherical.theta,t,Math.PI),this.spherical.phi=this.phiDamper.update(this.spherical.phi,this.goalSpherical.phi,t,i),this.spherical.radius=this.radiusDamper.update(this.spherical.radius,this.goalSpherical.radius,t,s),this.logFov=this.fovDamper.update(this.logFov,this.goalLogFov,t,1),this.moveCamera(),!0}updateTouchActionStyle(){let{style:e}=this.element;if(this._interactionEnabled){let{touchAction:t}=this._options;this._disableZoom&&"none"!==t?e.touchAction="manipulation":e.touchAction=t}else e.touchAction=""}isStationary(){return this.goalSpherical.theta===this.spherical.theta&&this.goalSpherical.phi===this.spherical.phi&&this.goalSpherical.radius===this.spherical.radius&&this.goalLogFov===this.logFov}moveCamera(){this.spherical.makeSafe(),this.camera.position.setFromSpherical(this.spherical),this.camera.setRotationFromEuler(new eu.USm(this.spherical.phi-Math.PI/2,this.spherical.theta,0,"YXZ")),this.camera.fov!==Math.exp(this.logFov)&&(this.camera.fov=Math.exp(this.logFov),this.camera.updateProjectionMatrix())}userAdjustOrbit(e,t,i){this.adjustOrbit(e*this.orbitSensitivity*this.inputSensitivity,t*this.orbitSensitivity*this.inputSensitivity,i*this.inputSensitivity)}wrapAngle(e){let t=(e+Math.PI)/(2*Math.PI);return 2*(t-Math.floor(t))*Math.PI-Math.PI}pixelLengthToSphericalAngle(e){return 2*Math.PI*e/this.scene.height}twoTouchDistance(e,t){let{clientX:i,clientY:s}=e,{clientX:r,clientY:n}=t,a=r-i,o=n-s;return Math.sqrt(a*a+o*o)}handleSinglePointerMove(e,t){let i=this.pixelLengthToSphericalAngle(e),s=this.pixelLengthToSphericalAngle(t);!1===this.isUserPointing&&(this.isUserPointing=!0,this.dispatchEvent({type:"pointer-change-start"})),this.userAdjustOrbit(i,s,0)}initializePan(){let{theta:e,phi:t}=this.spherical,i=e-this.scene.yaw;this.panPerPixel=.018/this.scene.height,this.panProjection.set(-Math.cos(i),-Math.cos(t)*Math.sin(i),0,0,Math.sin(t),0,Math.sin(i),-Math.cos(t)*Math.cos(i),0)}movePan(e,t){let{scene:i}=this,s=nn.set(e,t,0).multiplyScalar(this.inputSensitivity),r=this.spherical.radius*Math.exp(this.logFov)*this.panPerPixel;s.multiplyScalar(r);let n=i.getTarget();n.add(s.applyMatrix3(this.panProjection)),i.boundingSphere.clampPoint(n,n),i.setTarget(n.x,n.y,n.z)}recenter(e){if(performance.now()>this.startTime+300||Math.abs(e.clientX-this.startPointerPosition.clientX)>2||Math.abs(e.clientY-this.startPointerPosition.clientY)>2)return;let{scene:t}=this,i=t.positionAndNormalFromPoint(t.getNDC(e.clientX,e.clientY));if(null==i){let{cameraTarget:e}=t.element;t.element.cameraTarget="",t.element.cameraTarget=e,this.userAdjustOrbit(0,0,1)}else t.target.worldToLocal(i.position),t.setTarget(i.position.x,i.position.y,i.position.z)}resetRadius(){let{scene:e}=this,t=e.positionAndNormalFromPoint(nr.set(0,0));if(null==t)return;e.target.worldToLocal(t.position);let i=e.getTarget(),{theta:s,phi:r}=this.spherical,n=s-e.yaw,a=nn.set(Math.sin(r)*Math.sin(n),Math.cos(r),Math.sin(r)*Math.cos(n)),o=a.dot(t.position.sub(i));i.add(a.multiplyScalar(o)),e.setTarget(i.x,i.y,i.z),this.setOrbit(void 0,void 0,this.goalSpherical.radius-o)}onTouchChange(e){if(1===this.pointers.length)this.touchMode=this.touchModeRotate;else{if(this._disableZoom){this.touchMode=null,this.element.removeEventListener("touchmove",this.disableScroll);return}this.touchMode=this.touchDecided&&null===this.touchMode?null:this.touchModeZoom,this.touchDecided=!0,this.element.addEventListener("touchmove",this.disableScroll,{passive:!1}),this.lastSeparation=this.twoTouchDistance(this.pointers[0],this.pointers[1]),this.enablePan&&null!=this.touchMode&&(this.initializePan(),e.altKey||(this.scene.element[rH].style.opacity=1))}}onMouseDown(e){this.panPerPixel=0,this.enablePan&&(2===e.button||e.ctrlKey||e.metaKey||e.shiftKey)&&(this.initializePan(),this.scene.element[rH].style.opacity=1),this.element.style.cursor="grabbing"}orbitZoomKeyCodeHandler(e){let t=!0;switch(e.key){case"PageUp":this.userAdjustOrbit(0,0,.04);break;case"PageDown":this.userAdjustOrbit(0,0,-.04);break;case"ArrowUp":this.userAdjustOrbit(0,-no,0);break;case"ArrowDown":this.userAdjustOrbit(0,no,0);break;case"ArrowLeft":this.userAdjustOrbit(-no,0,0);break;case"ArrowRight":this.userAdjustOrbit(no,0,0);break;default:t=!1}return t}panKeyCodeHandler(e){this.initializePan();let t=!0;switch(e.key){case"ArrowUp":this.movePan(0,-10);break;case"ArrowDown":this.movePan(0,10);break;case"ArrowLeft":this.movePan(-10,0);break;case"ArrowRight":this.movePan(10,0);break;default:t=!1}return t}}let nh={NOT_PRESENTING:"not-presenting",SESSION_STARTED:"session-started",OBJECT_PLACED:"object-placed",FAILED:"failed"},nu={TRACKING:"tracking",NOT_TRACKING:"not-tracking"},nc=new eu.Pa4,ng=new eu.yGw,nd=new eu.Pa4,np=new eu.cPb(45,1,.1,100);class nm extends eu.pBf{constructor(e){super(),this.renderer=e,this.currentSession=null,this.placeOnWall=!1,this.placementBox=null,this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.frame=null,this.initialHitSource=null,this.transientHitTestSource=null,this.inputSource=null,this._presentedScene=null,this.resolveCleanup=null,this.exitWebXRButtonContainer=null,this.overlay=null,this.xrLight=null,this.tracking=!0,this.frames=0,this.initialized=!1,this.oldTarget=new eu.Pa4,this.placementComplete=!1,this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.lastDragPosition=new eu.Pa4,this.firstRatio=0,this.lastAngle=0,this.goalPosition=new eu.Pa4,this.goalYaw=0,this.goalScale=1,this.xDamper=new sF,this.yDamper=new sF,this.zDamper=new sF,this.yawDamper=new sF,this.scaleDamper=new sF,this.onExitWebXRButtonContainerClick=()=>this.stopPresenting(),this.onUpdateScene=()=>{null!=this.placementBox&&this.isPresenting&&(this.placementBox.dispose(),this.placementBox=new sN(this.presentedScene,this.placeOnWall?"back":"bottom"))},this.onSelectStart=e=>{let t=this.transientHitTestSource;if(null==t)return;let i=this.frame.getHitTestResultsForTransientInput(t),s=this.presentedScene,r=this.placementBox;if(1===i.length){this.inputSource=e.inputSource;let{axes:t}=this.inputSource.gamepad,i=r.getHit(this.presentedScene,t[0],t[1]);r.show=!0,null!=i?(this.isTranslating=!0,this.lastDragPosition.copy(i)):!1===this.placeOnWall&&(this.isRotating=!0,this.lastAngle=1.5*t[0])}else if(2===i.length){r.show=!0,this.isTwoFingering=!0;let{separation:e}=this.fingerPolar(i);this.firstRatio=e/s.scale.x}},this.onSelectEnd=()=>{this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.inputSource=null,this.goalPosition.y+=this.placementBox.offsetHeight*this.presentedScene.scale.x,this.placementBox.show=!1},this.threeRenderer=e.threeRenderer,this.threeRenderer.xr.enabled=!0}async resolveARSession(){tE();let e=await navigator.xr.requestSession("immersive-ar",{requiredFeatures:["hit-test"],optionalFeatures:["dom-overlay","light-estimation"],domOverlay:this.overlay?{root:this.overlay}:void 0});return this.threeRenderer.xr.setReferenceSpaceType("local"),await this.threeRenderer.xr.setSession(e),this.threeRenderer.xr.cameraAutoUpdate=!1,e}get presentedScene(){return this._presentedScene}async supportsPresentation(){try{return tE(),await navigator.xr.isSessionSupported("immersive-ar")}catch(e){return console.warn("Request to present in WebXR denied:"),console.warn(e),console.warn("Falling back to next ar-mode"),!1}}async present(e,t=!1){this.isPresenting&&console.warn("Cannot present while a model is already presenting");let i=new Promise((e,t)=>{requestAnimationFrame(()=>e())});e.setHotspotsVisibility(!1),e.queueRender(),await i,this._presentedScene=e,this.overlay=e.element.shadowRoot.querySelector("div.default"),!0===t&&(this.xrLight=new sL(this.threeRenderer),this.xrLight.addEventListener("estimationstart",()=>{if(!this.isPresenting||null==this.xrLight)return;let e=this.presentedScene;e.add(this.xrLight),e.environment=this.xrLight.environment}));let s=await this.resolveARSession();s.addEventListener("end",()=>{this.postSessionCleanup()},{once:!0});let r=e.element.shadowRoot.querySelector(".slot.exit-webxr-ar-button");r.classList.add("enabled"),r.addEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=r;let n=await s.requestReferenceSpace("viewer");this.tracking=!0,this.frames=0,this.initialized=!1,this.turntableRotation=e.yaw,this.goalYaw=e.yaw,this.goalScale=1,e.background=null,this.oldShadowIntensity=e.shadowIntensity,e.setShadowIntensity(.01),this.oldTarget.copy(e.getTarget()),e.element.addEventListener("load",this.onUpdateScene);let a=20*Math.PI/180,o=!0===this.placeOnWall?void 0:new XRRay(new DOMPoint(0,0,0),{x:0,y:-Math.sin(a),z:-Math.cos(a)});s.requestHitTestSource({space:n,offsetRay:o}).then(e=>{this.initialHitSource=e}),this.currentSession=s,this.placementBox=new sN(e,this.placeOnWall?"back":"bottom"),this.placementComplete=!1,this.lastTick=performance.now(),this.dispatchEvent({type:"status",status:nh.SESSION_STARTED})}async stopPresenting(){if(!this.isPresenting)return;let e=new Promise(e=>{this.resolveCleanup=e});try{await this.currentSession.end(),await e}catch(e){console.warn("Error while trying to end WebXR AR session"),console.warn(e),this.postSessionCleanup()}}get isPresenting(){return null!=this.presentedScene}get target(){return this.oldTarget}updateTarget(){let e=this.presentedScene;if(null!=e){let t=e.getTarget();this.oldTarget.copy(t),this.placeOnWall?t.z=e.boundingBox.min.z:t.y=e.boundingBox.min.y,e.setTarget(t.x,t.y,t.z)}}postSessionCleanup(){let e=this.currentSession;null!=e&&(e.removeEventListener("selectstart",this.onSelectStart),e.removeEventListener("selectend",this.onSelectEnd),this.currentSession=null);let t=this.presentedScene;if(this._presentedScene=null,null!=t){let{element:e}=t;null!=this.xrLight&&(t.remove(this.xrLight),this.xrLight.dispose(),this.xrLight=null),t.position.set(0,0,0),t.scale.set(1,1,1),t.setShadowOffset(0);let i=this.turntableRotation;null!=i&&(t.yaw=i);let s=this.oldShadowIntensity;null!=s&&t.setShadowIntensity(s),t.setEnvironmentAndSkybox(e[tR],e[tT]);let r=this.oldTarget;t.setTarget(r.x,r.y,r.z),t.xrCamera=null,t.element.removeEventListener("load",this.onUpdateScene),t.orientHotspots(0),e.requestUpdate("cameraTarget"),e.requestUpdate("maxCameraOrbit"),e[o_](e.getBoundingClientRect()),requestAnimationFrame(()=>{t.element.dispatchEvent(new CustomEvent("camera-change",{detail:{source:nA.NONE}}))})}this.renderer.height=0;let i=this.exitWebXRButtonContainer;null!=i&&(i.classList.remove("enabled"),i.removeEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=null);let s=this.transientHitTestSource;null!=s&&(s.cancel(),this.transientHitTestSource=null);let r=this.initialHitSource;null!=r&&(r.cancel(),this.initialHitSource=null),null!=this.placementBox&&(this.placementBox.dispose(),this.placementBox=null),this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.frame=null,this.inputSource=null,this.overlay=null,null!=this.resolveCleanup&&this.resolveCleanup(),this.dispatchEvent({type:"status",status:nh.NOT_PRESENTING})}updateView(e){let t=this.presentedScene,i=this.threeRenderer.xr;i.updateCamera(np),t.xrCamera=i.getCamera();let{elements:s}=t.getCamera().matrixWorld;if(t.orientHotspots(Math.atan2(s[1],s[5])),this.initialized||(this.placeInitially(),this.initialized=!0),e.requestViewportScale&&e.recommendedViewportScale){let t=e.recommendedViewportScale;e.requestViewportScale(Math.max(t,.25))}let r=i.getBaseLayer();if(null!=r){let t=r instanceof XRWebGLLayer?r.getViewport(e):i.getBinding().getViewSubImage(r,e).viewport;this.threeRenderer.setViewport(t.x,t.y,t.width,t.height)}}placeInitially(){let e=this.presentedScene,{position:t,element:i}=e,s=e.getCamera(),{width:r,height:n}=this.overlay.getBoundingClientRect();e.setSize(r,n),s.projectionMatrixInverse.copy(s.projectionMatrix).invert();let{theta:a,radius:o}=i.getCameraOrbit(),A=s.getWorldDirection(nc);e.yaw=Math.atan2(-A.x,-A.z)-a,this.goalYaw=e.yaw,t.copy(s.position).add(A.multiplyScalar(o)),this.updateTarget();let l=e.getTarget();t.add(l).sub(this.oldTarget),this.goalPosition.copy(t),e.setHotspotsVisibility(!0);let{session:h}=this.frame;h.addEventListener("selectstart",this.onSelectStart),h.addEventListener("selectend",this.onSelectEnd),h.requestHitTestSourceForTransientInput({profile:"generic-touchscreen"}).then(e=>{this.transientHitTestSource=e})}getTouchLocation(){let{axes:e}=this.inputSource.gamepad,t=this.placementBox.getExpandedHit(this.presentedScene,e[0],e[1]);return null!=t&&(nc.copy(t).sub(this.presentedScene.getCamera().position),nc.length()>10)?null:t}getHitPoint(e){let t=this.threeRenderer.xr.getReferenceSpace(),i=e.getPose(t);if(null==i)return null;let s=ng.fromArray(i.transform.matrix);return!0===this.placeOnWall&&(this.goalYaw=Math.atan2(s.elements[4],s.elements[6])),s.elements[5]>.75!==this.placeOnWall?nd.setFromMatrixPosition(s):null}moveToFloor(e){let t=this.initialHitSource;if(null==t)return;let i=e.getHitTestResults(t);if(0==i.length)return;let s=i[0],r=this.getHitPoint(s);null!=r&&(this.placementBox.show=!0,this.isTranslating||(this.placeOnWall?this.goalPosition.copy(r):this.goalPosition.y=r.y),t.cancel(),this.initialHitSource=null,this.dispatchEvent({type:"status",status:nh.OBJECT_PLACED}))}fingerPolar(e){let t=e[0].inputSource.gamepad.axes,i=e[1].inputSource.gamepad.axes,s=i[0]-t[0],r=i[1]-t[1],n=Math.atan2(r,s),a=this.lastAngle-n;return a>Math.PI?a-=2*Math.PI:a<-Math.PI&&(a+=2*Math.PI),this.lastAngle=n,{separation:Math.sqrt(s*s+r*r),deltaYaw:a}}processInput(e){let t=this.transientHitTestSource;if(null==t||!this.isTranslating&&!this.isTwoFingering&&!this.isRotating)return;let i=e.getHitTestResultsForTransientInput(t),s=this.presentedScene,r=s.scale.x;if(this.isTwoFingering){if(i.length<2)this.isTwoFingering=!1;else{let{separation:e,deltaYaw:t}=this.fingerPolar(i);if(!1===this.placeOnWall&&(this.goalYaw+=t),s.canScale){let t=e/this.firstRatio;this.goalScale=t<1.3&&t>.7692307692307692?1:t}}return}if(2===i.length){this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!0;let{separation:e}=this.fingerPolar(i);this.firstRatio=e/r;return}if(this.isRotating){let e=1.5*this.inputSource.gamepad.axes[0];this.goalYaw+=e-this.lastAngle,this.lastAngle=e}else this.isTranslating&&i.forEach(e=>{if(e.inputSource!==this.inputSource)return;let t=null;if(e.results.length>0&&(t=this.getHitPoint(e.results[0])),null==t&&(t=this.getTouchLocation()),null!=t){if(this.goalPosition.sub(this.lastDragPosition),!1===this.placeOnWall){let e=t.y-this.lastDragPosition.y;if(e<0){this.placementBox.offsetHeight=e/r,this.presentedScene.setShadowOffset(e);let i=nc.copy(s.getCamera().position),n=-e/(i.y-t.y);i.multiplyScalar(n),t.multiplyScalar(1-n).add(i)}}this.goalPosition.add(t),this.lastDragPosition.copy(t)}})}moveScene(e){let t=this.presentedScene,{position:i,yaw:s}=t,r=t.boundingSphere.radius,n=this.goalPosition,a=t.scale.x,o=this.placementBox,A=nA.NONE;if(!n.equals(i)||this.goalScale!==a){A=nA.USER_INTERACTION;let{x:s,y:l,z:h}=i;s=this.xDamper.update(s,n.x,e,r),l=this.yDamper.update(l,n.y,e,r),h=this.zDamper.update(h,n.z,e,r),i.set(s,l,h);let u=this.scaleDamper.update(a,this.goalScale,e,1);if(t.scale.set(u,u,u),!this.isTranslating){let e=n.y-l;this.placementComplete&&!1===this.placeOnWall?(o.offsetHeight=e/u,t.setShadowOffset(e)):0===e&&(this.placementComplete=!0,o.show=!1,t.setShadowIntensity(.8))}}o.updateOpacity(e),t.updateTarget(e),t.yaw=this.yawDamper.update(s,this.goalYaw,e,Math.PI),t.element.dispatchEvent(new CustomEvent("camera-change",{detail:{source:A}}))}onWebXRFrame(e,t){this.frame=t,++this.frames;let i=this.threeRenderer.xr.getReferenceSpace(),s=t.getViewerPose(i);null==s&&!0===this.tracking&&this.frames>30&&(this.tracking=!1,this.dispatchEvent({type:"tracking",status:nu.NOT_TRACKING}));let r=this.presentedScene;if(null==s||null==r||!r.element.loaded){this.threeRenderer.clear();return}!1===this.tracking&&(this.tracking=!0,this.dispatchEvent({type:"tracking",status:nu.TRACKING}));let n=!0;for(let i of s.views){if(this.updateView(i),n){this.moveToFloor(t),this.processInput(t);let i=e-this.lastTick;this.moveScene(i),this.renderer.preRender(r,e,i),this.lastTick=e,r.renderShadow(this.threeRenderer)}this.threeRenderer.render(r,r.getCamera()),n=!1}}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nf=Symbol("prepared"),nI=Symbol("prepare"),nE=Symbol("preparedGLTF"),nC=Symbol("clone");class nB{constructor(e){this[nE]=e}static prepare(e){if(null==e.scene)throw Error("Model does not have a scene");if(e[nf])return e;let t=this[nI](e);return t[nf]=!0,t}static[nI](e){let{scene:t}=e,i=[t];return Object.assign(Object.assign({},e),{scene:t,scenes:i})}get parser(){return this[nE].parser}get animations(){return this[nE].animations}get scene(){return this[nE].scene}get scenes(){return this[nE].scenes}get cameras(){return this[nE].cameras}get asset(){return this[nE].asset}get userData(){return this[nE].userData}clone(){return new this.constructor(this[nC]())}dispose(){this.scenes.forEach(e=>{e.traverse(e=>{e.material&&((Array.isArray(e.material)?e.material:[e.material]).forEach(e=>{for(let t in e){let i=e[t];if(i instanceof eu.xEZ){let e=i.source.data;null!=e.close&&e.close(),i.dispose()}}e.dispose()}),e.geometry.dispose())})})}[nC](){let e=this[nE],t=function(e){let t=new Map,i=new Map,s=e.clone();return function e(t,i,s){s(t,i);for(let r=0;r<t.children.length;r++)e(t.children[r],i.children[r],s)}(e,s,function(e,s){t.set(s,e),i.set(e,s)}),s.traverse(function(e){if(!e.isSkinnedMesh)return;let s=t.get(e),r=s.skeleton.bones;e.skeleton=s.skeleton.clone(),e.bindMatrix.copy(s.bindMatrix),e.skeleton.bones=r.map(function(e){return i.get(e)}),e.bind(e.skeleton,e.bindMatrix)}),s}(this.scene);ny(t,this.scene);let i=[t],s=e.userData?Object.assign({},e.userData):{};return Object.assign(Object.assign({},e),{scene:t,scenes:i,userData:s})}}let ny=(e,t)=>{nw(e,t,(e,t)=>{void 0!==t.userData.variantMaterials&&(e.userData.variantMaterials=new Map(t.userData.variantMaterials)),void 0!==t.userData.variantData&&(e.userData.variantData=t.userData.variantData),void 0!==t.userData.originalMaterial&&(e.userData.originalMaterial=t.userData.originalMaterial)})},nw=(e,t,i)=>{i(e,t);for(let s=0;s<e.children.length;s++)nw(e.children[s],t.children[s],i)},nQ=Symbol("threeGLTF"),nv=Symbol("gltf"),nb=Symbol("gltfElementMap"),nS=Symbol("threeObjectMap"),nx=Symbol("parallelTraverseThreeScene"),nR=Symbol("correlateOriginalThreeGLTF"),nT=Symbol("correlateCloneThreeGLTF");class nM{constructor(e,t,i,s){this[nQ]=e,this[nv]=t,this[nb]=s,this[nS]=i}static from(e,t){return null!=t?this[nT](e,t):this[nR](e)}static[nR](e){let t=e.parser.json,i=e.parser.associations,s=new Map,r={name:"Default"},n={index:-1};for(let e of i.keys())e instanceof eu.F5T&&null==i.get(e)&&(n.index<0&&(null==t.materials&&(t.materials=[]),n.index=t.materials.length,t.materials.push(r)),e.name=r.name,i.set(e,{materials:n.index}));for(let[e,r]of i)for(let i in r&&(e.userData=e.userData||{},e.userData.associations=r),r)if(null!=i&&"primitives"!==i){let n=(t[i]||[])[r[i]];if(null==n)continue;let a=s.get(n);null==a&&(a=new Set,s.set(n,a)),a.add(e)}return new nM(e,t,i,s)}static[nT](e,t){let i=t.threeGLTF,s=JSON.parse(JSON.stringify(t.gltf)),r=new Map,n=new Map;for(let a=0;a<i.scenes.length;a++)this[nx](i.scenes[a],e.scenes[a],(e,i)=>{let a=t.threeObjectMap.get(e);if(null!=a){for(let e in a)if(null!=e&&"primitives"!==e){let t=a[e],o=s[e][t],A=r.get(i)||{};A[e]=t,r.set(i,A);let l=n.get(o)||new Set;l.add(i),n.set(o,l)}}});return new nM(e,s,r,n)}static[nx](e,t,i){let s=(e,t)=>{if(i(e,t),e.isObject3D){if(e.material){if(Array.isArray(e.material))for(let s=0;s<e.material.length;++s)i(e.material[s],t.material[s]);else i(e.material,t.material)}for(let i=0;i<e.children.length;++i)s(e.children[i],t.children[i])}};s(e,t)}get threeGLTF(){return this[nQ]}get gltf(){return this[nv]}get gltfElementMap(){return this[nb]}get threeObjectMap(){return this[nS]}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nD=Symbol("correlatedSceneGraph");class nL extends nB{static[nI](e){let t=super[nI](e);null==t[nD]&&(t[nD]=nM.from(t));let{scene:i}=t,s=new eu.aLr(void 0,1/0);return i.traverse(e=>{if(e.renderOrder=1e3,e.frustumCulled=!1,e.name||(e.name=e.uuid),e.material){let{geometry:i}=e;e.castShadow=!0,e.isSkinnedMesh&&(i.boundingSphere=s,i.boundingBox=null);let r=e.material;if(!0===r.isMeshBasicMaterial&&(r.toneMapped=!1),r.shadowSide=eu.Wl3,r.aoMap){let{gltf:e,threeObjectMap:s}=t[nD],n=s.get(r);if(null!=e.materials&&null!=n&&null!=n.materials){let t=e.materials[n.materials];t.occlusionTexture&&0===t.occlusionTexture.texCoord&&null!=i.attributes.uv&&i.setAttribute("uv2",i.attributes.uv)}}}}),t}get correlatedSceneGraph(){return this[nE][nD]}[nC](){let e=super[nC](),t=new Map;return e.scene.traverse(e=>{if(e.material){let i=e.material;if(null!=i){if(t.has(i.uuid)){e.material=t.get(i.uuid);return}e.material=i.clone(),t.set(i.uuid,e.material)}}}),e[nD]=nM.from(e,this.correlatedSceneGraph),e}}class nF extends eu.yxD{constructor(e){super(e),this.type=eu.cLu}parse(e){let t=function(e,t){switch(e){case 1:console.error("THREE.RGBELoader Read Error: "+(t||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(t||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(t||""));break;default:console.error("THREE.RGBELoader: Error: "+(t||""))}return -1},i=function(e,t,i){t=t||1024;let s=e.pos,r=-1,n=0,a="",o=String.fromCharCode.apply(null,new Uint16Array(e.subarray(s,s+128)));for(;0>(r=o.indexOf("\n"))&&n<t&&s<e.byteLength;)a+=o,n+=o.length,s+=128,o+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(s,s+128)));return -1<r&&(!1!==i&&(e.pos+=n+r+1),a+o.slice(0,r))},s=new Uint8Array(e);s.pos=0;let r=function(e){let s,r;let n=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,a=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,o=/^\s*FORMAT=(\S+)\s*$/,A=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,l={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};if(e.pos>=e.byteLength||!(s=i(e)))return t(1,"no header found");if(!(r=s.match(/^#\?(\S+)/)))return t(3,"bad initial token");for(l.valid|=1,l.programtype=r[1],l.string+=s+"\n";!1!==(s=i(e));){if(l.string+=s+"\n","#"===s.charAt(0)){l.comments+=s+"\n";continue}if((r=s.match(n))&&(l.gamma=parseFloat(r[1])),(r=s.match(a))&&(l.exposure=parseFloat(r[1])),(r=s.match(o))&&(l.valid|=2,l.format=r[1]),(r=s.match(A))&&(l.valid|=4,l.height=parseInt(r[1],10),l.width=parseInt(r[2],10)),2&l.valid&&4&l.valid)break}return 2&l.valid?4&l.valid?l:t(3,"missing image size specifier"):t(3,"missing format specifier")}(s);if(-1!==r){let e=r.width,i=r.height,n=function(e,i,s){if(i<8||i>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(i!==(e[2]<<8|e[3]))return t(3,"wrong scanline width");let r=new Uint8Array(4*i*s);if(!r.length)return t(4,"unable to allocate buffer space");let n=0,a=0,o=4*i,A=new Uint8Array(4),l=new Uint8Array(o),h=s;for(;h>0&&a<e.byteLength;){if(a+4>e.byteLength)return t(1);if(A[0]=e[a++],A[1]=e[a++],A[2]=e[a++],A[3]=e[a++],2!=A[0]||2!=A[1]||(A[2]<<8|A[3])!=i)return t(3,"bad rgbe scanline format");let s=0,u;for(;s<o&&a<e.byteLength;){let i=(u=e[a++])>128;if(i&&(u-=128),0===u||s+u>o)return t(3,"bad scanline data");if(i){let t=e[a++];for(let e=0;e<u;e++)l[s++]=t}else l.set(e.subarray(a,a+u),s),s+=u,a+=u}for(let e=0;e<i;e++){let t=0;r[n]=l[e+t],t+=i,r[n+1]=l[e+t],t+=i,r[n+2]=l[e+t],t+=i,r[n+3]=l[e+t],n+=4}h--}return r}(s.subarray(s.pos),e,i);if(-1!==n){let t,s,a;switch(this.type){case eu.VzW:let o=new Float32Array(4*(a=n.length/4));for(let e=0;e<a;e++)!function(e,t,i,s){let r=Math.pow(2,e[t+3]-128)/255;i[s+0]=e[t+0]*r,i[s+1]=e[t+1]*r,i[s+2]=e[t+2]*r,i[s+3]=1}(n,4*e,o,4*e);t=o,s=eu.VzW;break;case eu.cLu:let A=new Uint16Array(4*(a=n.length/4));for(let e=0;e<a;e++)!function(e,t,i,s){let r=Math.pow(2,e[t+3]-128)/255;i[s+0]=eu.A5E.toHalfFloat(Math.min(e[t+0]*r,65504)),i[s+1]=eu.A5E.toHalfFloat(Math.min(e[t+1]*r,65504)),i[s+2]=eu.A5E.toHalfFloat(Math.min(e[t+2]*r,65504)),i[s+3]=eu.A5E.toHalfFloat(1)}(n,4*e,A,4*e);t=A,s=eu.cLu;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:e,height:i,data:t,header:r.string,gamma:r.gamma,exposure:r.exposure,type:s}}}return null}setDataType(e){return this.type=e,this}load(e,t,i,s){return super.load(e,function(e,i){switch(e.type){case eu.VzW:case eu.cLu:e.colorSpace=eu.GUF,e.minFilter=eu.wem,e.magFilter=eu.wem,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,i)},i,s)}}/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk extends eu.xsS{constructor(){super(),this.position.y=-3.5;let e=new eu.DvJ;e.deleteAttribute("uv");let t=new eu.Wid({metalness:0,side:eu._Li}),i=new eu.Wid({metalness:0}),s=new eu.cek(16777215,500,28,2);s.position.set(.418,16.199,.3),this.add(s);let r=new eu.Kj0(e,t);r.position.set(-.757,13.219,.717),r.scale.set(31.713,28.305,28.591),this.add(r);let n=new eu.Kj0(e,i);n.position.set(-10.906,2.009,1.846),n.rotation.set(0,-.195,0),n.scale.set(2.328,7.905,4.651),this.add(n);let a=new eu.Kj0(e,i);a.position.set(-5.607,-.754,-.758),a.rotation.set(0,.994,0),a.scale.set(1.97,1.534,3.955),this.add(a);let o=new eu.Kj0(e,i);o.position.set(6.167,.857,7.803),o.rotation.set(0,.561,0),o.scale.set(3.927,6.285,3.687),this.add(o);let A=new eu.Kj0(e,i);A.position.set(-2.017,.018,6.124),A.rotation.set(0,.333,0),A.scale.set(2.002,4.566,2.064),this.add(A);let l=new eu.Kj0(e,i);l.position.set(2.291,-.756,-2.621),l.rotation.set(0,-.286,0),l.scale.set(1.546,1.552,1.496),this.add(l);let h=new eu.Kj0(e,i);h.position.set(-2.193,-.369,-5.547),h.rotation.set(0,.516,0),h.scale.set(3.875,3.487,2.986),this.add(h);let u=new eu.Kj0(e,this.createAreaLightMaterial(50));u.position.set(-16.116,14.37,8.208),u.scale.set(.1,2.428,2.739),this.add(u);let c=new eu.Kj0(e,this.createAreaLightMaterial(50));c.position.set(-16.109,18.021,-8.207),c.scale.set(.1,2.425,2.751),this.add(c);let g=new eu.Kj0(e,this.createAreaLightMaterial(17));g.position.set(14.904,12.198,-1.832),g.scale.set(.15,4.265,6.331),this.add(g);let d=new eu.Kj0(e,this.createAreaLightMaterial(43));d.position.set(-.462,8.89,14.52),d.scale.set(4.38,5.441,.088),this.add(d);let p=new eu.Kj0(e,this.createAreaLightMaterial(20));p.position.set(3.235,11.486,-12.541),p.scale.set(2.5,2,.1),this.add(p);let m=new eu.Kj0(e,this.createAreaLightMaterial(100));m.position.set(0,20,0),m.scale.set(1,.1,1),this.add(m)}createAreaLightMaterial(e){let t=new eu.vBJ;return t.color.setScalar(e),t}}/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nU extends eu.xsS{constructor(){super(),this.position.y=-3.5;let e=new eu.DvJ;e.deleteAttribute("uv");let t=new eu.Wid({metalness:0,side:eu._Li}),i=new eu.Wid({metalness:0}),s=new eu.cek(16777215,400,28,2);s.position.set(.5,14,.5),this.add(s);let r=new eu.Kj0(e,t);r.position.set(0,13.2,0),r.scale.set(31.5,28.5,31.5),this.add(r);let n=new eu.Kj0(e,i);n.position.set(-10.906,-1,1.846),n.rotation.set(0,-.195,0),n.scale.set(2.328,7.905,4.651),this.add(n);let a=new eu.Kj0(e,i);a.position.set(-5.607,-.754,-.758),a.rotation.set(0,.994,0),a.scale.set(1.97,1.534,3.955),this.add(a);let o=new eu.Kj0(e,i);o.position.set(6.167,-.16,7.803),o.rotation.set(0,.561,0),o.scale.set(3.927,6.285,3.687),this.add(o);let A=new eu.Kj0(e,i);A.position.set(-2.017,.018,6.124),A.rotation.set(0,.333,0),A.scale.set(2.002,4.566,2.064),this.add(A);let l=new eu.Kj0(e,i);l.position.set(2.291,-.756,-2.621),l.rotation.set(0,-.286,0),l.scale.set(1.546,1.552,1.496),this.add(l);let h=new eu.Kj0(e,i);h.position.set(-2.193,-.369,-5.547),h.rotation.set(0,.516,0),h.scale.set(3.875,3.487,2.986),this.add(h);let u=new eu.Kj0(e,this.createAreaLightMaterial(80));u.position.set(-14,10,8),u.scale.set(.1,2.5,2.5),this.add(u);let c=new eu.Kj0(e,this.createAreaLightMaterial(80));c.position.set(-14,14,-4),c.scale.set(.1,2.5,2.5),this.add(c);let g=new eu.Kj0(e,this.createAreaLightMaterial(23));g.position.set(14,12,0),g.scale.set(.1,5,5),this.add(g);let d=new eu.Kj0(e,this.createAreaLightMaterial(16));d.position.set(0,9,14),d.scale.set(5,5,.1),this.add(d);let p=new eu.Kj0(e,this.createAreaLightMaterial(80));p.position.set(7,8,-14),p.scale.set(2.5,2.5,.1),this.add(p);let m=new eu.Kj0(e,this.createAreaLightMaterial(80));m.position.set(-7,16,-14),m.scale.set(2.5,2.5,.1),this.add(m);let f=new eu.Kj0(e,this.createAreaLightMaterial(1));f.position.set(0,20,0),f.scale.set(.1,.1,.1),this.add(f)}createAreaLightMaterial(e){let t=new eu.vBJ;return t.color.setScalar(e),t}}let n_=/\.hdr(\.js)?$/;class nN extends eu.pBf{constructor(e){super(),this.threeRenderer=e,this.lottieLoaderUrl="",this.withCredentials=!1,this._ldrLoader=null,this._hdrLoader=null,this._lottieLoader=null,this.generatedEnvironmentMap=null,this.generatedEnvironmentMapAlt=null,this.skyboxCache=new Map,this.blurMaterial=null,this.blurScene=null}get ldrLoader(){return null==this._ldrLoader&&(this._ldrLoader=new eu.dpR),this._ldrLoader.setWithCredentials(this.withCredentials),this._ldrLoader}get hdrLoader(){return null==this._hdrLoader&&(this._hdrLoader=new nF,this._hdrLoader.setDataType(eu.cLu)),this._hdrLoader.setWithCredentials(this.withCredentials),this._hdrLoader}async getLottieLoader(){if(null==this._lottieLoader){let{LottieLoader:e}=await import(this.lottieLoaderUrl);this._lottieLoader=new e}return this._lottieLoader.setWithCredentials(this.withCredentials),this._lottieLoader}async loadImage(e){let t=await new Promise((t,i)=>this.ldrLoader.load(e,t,()=>{},i));return t.name=e,t.flipY=!1,t}async loadLottie(e,t){let i=await this.getLottieLoader();i.setQuality(t);let s=await new Promise((t,s)=>i.load(e,t,()=>{},s));return s.name=e,s}async loadEquirect(e,t=()=>{}){try{let i=n_.test(e),s=i?this.hdrLoader:this.ldrLoader,r=await new Promise((i,r)=>s.load(e,i,e=>{t(e.loaded/e.total*.9)},r));return t(1),r.name=e,r.mapping=eu.dSO,i||(r.encoding=eu.knz),r}finally{t&&t(1)}}async generateEnvironmentMapAndSkybox(e=null,t=null,i=()=>{}){let s;let r="legacy"!==t;("legacy"===t||"neutral"===t)&&(t=null),t=tI(t);let n=Promise.resolve(null);e&&(n=this.loadEquirectFromUrl(e,i)),s=t?this.loadEquirectFromUrl(t,i):e?this.loadEquirectFromUrl(e,i):r?this.loadGeneratedEnvironmentMapAlt():this.loadGeneratedEnvironmentMap();let[a,o]=await Promise.all([s,n]);if(null==a)throw Error("Failed to load environment map.");return{environmentMap:a,skybox:o}}async loadEquirectFromUrl(e,t){if(!this.skyboxCache.has(e)){let i=this.loadEquirect(e,t);this.skyboxCache.set(e,i)}return this.skyboxCache.get(e)}async GenerateEnvironmentMap(e,t){await tb();let i=this.threeRenderer,s=new eu.oAp(256,{generateMipmaps:!1,type:eu.cLu,format:eu.wk1,colorSpace:eu.GUF,depthBuffer:!0}),r=new eu._am(.1,100,s),n=r.renderTarget.texture;n.name=t;let a=i.outputColorSpace,o=i.toneMapping;return i.toneMapping=eu.uL9,i.outputColorSpace=eu.GUF,r.update(i,e),this.blurCubemap(s,.04),i.toneMapping=o,i.outputColorSpace=a,n}async loadGeneratedEnvironmentMap(){return null==this.generatedEnvironmentMap&&(this.generatedEnvironmentMap=this.GenerateEnvironmentMap(new nk,"legacy")),this.generatedEnvironmentMap}async loadGeneratedEnvironmentMapAlt(){return null==this.generatedEnvironmentMapAlt&&(this.generatedEnvironmentMapAlt=this.GenerateEnvironmentMap(new nU,"neutral")),this.generatedEnvironmentMapAlt}blurCubemap(e,t){if(null==this.blurMaterial){this.blurMaterial=this.getBlurShader(20);let e=new eu.DvJ,t=new eu.Kj0(e,this.blurMaterial);this.blurScene=new eu.xsS,this.blurScene.add(t)}let i=e.clone();this.halfblur(e,i,t,"latitudinal"),this.halfblur(i,e,t,"longitudinal")}halfblur(e,t,i,s){let r=e.width,n=isFinite(i)?Math.PI/(2*r):2*Math.PI/39,a=i/n,o=isFinite(i)?1+Math.floor(3*a):20;o>20&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${o} samples when the maximum is set to 20`);let A=[],l=0;for(let e=0;e<20;++e){let t=e/a,i=Math.exp(-t*t/2);A.push(i),0==e?l+=i:e<o&&(l+=2*i)}for(let e=0;e<A.length;e++)A[e]=A[e]/l;let h=this.blurMaterial.uniforms;h.envMap.value=e.texture,h.samples.value=o,h.weights.value=A,h.latitudinal.value="latitudinal"===s,h.dTheta.value=n,new eu._am(.1,100,t).update(this.threeRenderer,this.blurScene)}getBlurShader(e){let t=new Float32Array(e),i=new eu.Pa4(0,1,0);return new eu.jyz({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},poleAxis:{value:i}},vertexShader:`
      
      varying vec3 vOutputDirection;
  
      void main() {
  
        vOutputDirection = vec3( position );
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
  
      }
    `,fragmentShader:`
        varying vec3 vOutputDirection;
  
        uniform samplerCube envMap;
        uniform int samples;
        uniform float weights[ n ];
        uniform bool latitudinal;
        uniform float dTheta;
        uniform vec3 poleAxis;
  
        vec3 getSample( float theta, vec3 axis ) {
  
          float cosTheta = cos( theta );
          // Rodrigues' axis-angle rotation
          vec3 sampleDirection = vOutputDirection * cosTheta
            + cross( axis, vOutputDirection ) * sin( theta )
            + axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );
  
          return vec3( textureCube( envMap, sampleDirection ) );
  
        }
  
        void main() {
  
          vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );
  
          if ( all( equal( axis, vec3( 0.0 ) ) ) ) {
  
            axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );
  
          }
  
          axis = normalize( axis );
  
          gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
          gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );
  
          for ( int i = 1; i < n; i++ ) {
  
            if ( i >= samples ) {
  
              break;
  
            }
  
            float theta = dTheta * float( i );
            gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
            gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );
  
          }
        }
      `,blending:eu.jFi,depthTest:!1,depthWrite:!1,side:eu._Li})}async dispose(){for(let[,e]of this.skyboxCache)(await e).dispose();null!=this.generatedEnvironmentMap&&((await this.generatedEnvironmentMap).dispose(),this.generatedEnvironmentMap=null),null!=this.generatedEnvironmentMapAlt&&((await this.generatedEnvironmentMapAlt).dispose(),this.generatedEnvironmentMapAlt=null),null!=this.blurMaterial&&this.blurMaterial.dispose()}}let nG=[1,.79,.62,.5,.4,.31,.25],nP="high-performance";class nO extends eu.pBf{constructor(e){super(),this.loader=new i4(nL),this.width=0,this.height=0,this.dpr=1,this.scenes=new Set,this.multipleScenesVisible=!1,this.lastTick=performance.now(),this.renderedLastFrame=!1,this.scaleStep=0,this.lastStep=3,this.avgFrameDuration=50,this.onWebGLContextLost=e=>{this.dispatchEvent({type:"contextlost",sourceEvent:e})},this.onWebGLContextRestored=()=>{var e;for(let t of(null===(e=this.textureUtils)||void 0===e||e.dispose(),this.textureUtils=new nN(this.threeRenderer),this.scenes))t.element[tM]()},this.dpr=tQ(),this.canvas3D=document.createElement("canvas"),this.canvas3D.id="webgl-canvas",this.canvas3D.classList.add("show");try{this.threeRenderer=new eu.CP7({canvas:this.canvas3D,alpha:!0,antialias:!0,powerPreference:e.powerPreference,preserveDrawingBuffer:!0}),this.threeRenderer.autoClear=!0,this.threeRenderer.useLegacyLights=!1,this.threeRenderer.setPixelRatio(1),this.threeRenderer.debug={checkShaderErrors:!!e.debug,onShaderError:null},this.threeRenderer.toneMapping=eu.LY2}catch(e){console.warn(e)}this.arRenderer=new nm(this),this.textureUtils=this.canRender?new nN(this.threeRenderer):null,i4.initializeKTX2Loader(this.threeRenderer),this.canvas3D.addEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.addEventListener("webglcontextrestored",this.onWebGLContextRestored),this.updateRendererSize()}static get singleton(){return this._singleton}static resetSingleton(){let e=this._singleton.dispose();for(let t of e)t.disconnectedCallback();for(let t of(this._singleton=new nO({powerPreference:(self.ModelViewerElement||{}).powerPreference||nP,debug:tv()}),e))t.connectedCallback()}get canRender(){return null!=this.threeRenderer}get scaleFactor(){return nG[this.scaleStep]}set minScale(e){let t=1;for(;t<nG.length&&!(nG[t]<e);)++t;this.lastStep=t-1}registerScene(e){this.scenes.add(e),e.forceRescale();let t=new eu.FM8;this.threeRenderer.getSize(t),e.canvas.width=t.x,e.canvas.height=t.y,this.canRender&&this.scenes.size>0&&this.threeRenderer.setAnimationLoop((e,t)=>this.render(e,t))}unregisterScene(e){this.scenes.delete(e),this.canvas3D.parentElement===e.canvas.parentElement&&e.canvas.parentElement.removeChild(this.canvas3D),this.canRender&&0===this.scenes.size&&this.threeRenderer.setAnimationLoop(null)}displayCanvas(e){return this.multipleScenesVisible?e.element[oD]:this.canvas3D}countVisibleScenes(){let{canvas3D:e}=this,t=0,i=null;for(let s of this.scenes){let{element:r}=s;r.modelIsVisible&&null==s.externalRenderer&&++t,e.parentElement===s.canvas.parentElement&&(i=s)}let s=t>1;if(null!=i){let t=s&&!this.multipleScenesVisible,r=!i.element.modelIsVisible;if(t||r){let{width:t,height:s}=this.sceneSize(i);this.copyPixels(i,t,s),e.parentElement.removeChild(e)}}this.multipleScenesVisible=s}updateRendererSize(){var e;let t=tQ();if(t!==this.dpr)for(let e of this.scenes){let{element:t}=e;t[oE](t.getBoundingClientRect())}let i=0,s=0;for(let e of this.scenes)i=Math.max(i,e.width),s=Math.max(s,e.height);if(i!==this.width||s!==this.height||t!==this.dpr)for(let r of(this.width=i,this.height=s,this.dpr=t,i=Math.ceil(i*t),s=Math.ceil(s*t),this.canRender&&this.threeRenderer.setSize(i,s,!1),this.scenes)){let{canvas:t}=r;t.width=i,t.height=s,r.forceRescale(),null===(e=r.effectRenderer)||void 0===e||e.setSize(i,s)}}updateRendererScale(e){let t=this.scaleStep;this.avgFrameDuration+=tw(.2*(e-this.avgFrameDuration),-5,5),this.avgFrameDuration>60?++this.scaleStep:this.avgFrameDuration<40&&this.scaleStep>0&&--this.scaleStep,this.scaleStep=Math.min(this.scaleStep,this.lastStep),t!==this.scaleStep&&(this.avgFrameDuration=50)}shouldRender(e){if(e.shouldRender())e.scaleStep!=this.scaleStep&&(e.scaleStep=this.scaleStep,this.rescaleCanvas(e));else{if(0==e.scaleStep)return!1;e.scaleStep=0,this.rescaleCanvas(e)}return!0}rescaleCanvas(e){let t=nG[e.scaleStep],i=Math.ceil(this.width/t),s=Math.ceil(this.height/t),{style:r}=e.canvas;r.width=`${i}px`,r.height=`${s}px`,this.canvas3D.style.width=`${i}px`,this.canvas3D.style.height=`${s}px`;let n=this.dpr*t,a=t<1?"GPU throttling":this.dpr!==window.devicePixelRatio?"No meta viewport tag":"";e.element.dispatchEvent(new CustomEvent("render-scale",{detail:{reportedDpr:window.devicePixelRatio,renderedDpr:n,minimumDpr:this.dpr*nG[this.lastStep],pixelWidth:Math.ceil(e.width*n),pixelHeight:Math.ceil(e.height*n),reason:a}}))}sceneSize(e){let{dpr:t}=this,i=nG[e.scaleStep];return{width:Math.min(Math.ceil(e.width*i*t),this.canvas3D.width),height:Math.min(Math.ceil(e.height*i*t),this.canvas3D.height)}}copyPixels(e,t,i){let s=e.context;if(null==s){console.log("could not acquire 2d context");return}s.clearRect(0,0,t,i),s.drawImage(this.canvas3D,0,0,t,i,0,0,t,i),e.canvas.classList.add("show")}orderedScenes(){let e=[];for(let t of[!1,!0])for(let i of this.scenes)i.element.modelIsVisible===t&&e.push(i);return e}get isPresenting(){return this.arRenderer.isPresenting}preRender(e,t,i){let{element:s,exposure:r}=e;s[ok](t,i);let n="number"==typeof r&&!Number.isNaN(r);this.threeRenderer.toneMappingExposure=n?r:1}render(e,t){if(null!=t){this.arRenderer.onWebXRFrame(e,t);return}let i=e-this.lastTick;if(this.lastTick=e,!this.canRender||this.isPresenting)return;this.countVisibleScenes(),this.updateRendererSize(),this.renderedLastFrame&&(this.updateRendererScale(i),this.renderedLastFrame=!1);let{canvas3D:s}=this;for(let t of this.orderedScenes()){let{element:r}=t;if(!r.loaded||!r.modelIsVisible&&t.renderCount>0||(this.preRender(t,e,i),!this.shouldRender(t)))continue;if(null!=t.externalRenderer){let e=t.getCamera();e.updateMatrix();let{matrix:i,projectionMatrix:s}=e,r=i.elements.slice(),n=t.getTarget();r[12]+=n.x,r[13]+=n.y,r[14]+=n.z,t.externalRenderer.render({viewMatrix:r,projectionMatrix:s.elements});continue}if(!r.modelIsVisible&&!this.multipleScenesVisible)for(let e of this.scenes)e.element.modelIsVisible&&e.queueRender();let{width:n,height:a}=this.sceneSize(t);t.renderShadow(this.threeRenderer),this.threeRenderer.setRenderTarget(null),this.threeRenderer.setViewport(0,Math.ceil(this.height*this.dpr)-a,n,a),null!=t.effectRenderer?t.effectRenderer.render(i):(this.threeRenderer.autoClear=!0,this.threeRenderer.render(t,t.camera)),this.multipleScenesVisible||!t.element.modelIsVisible&&0===t.renderCount?this.copyPixels(t,n,a):s.parentElement!==t.canvas.parentElement&&(t.canvas.parentElement.appendChild(s),t.canvas.classList.remove("show")),t.hasRendered(),++t.renderCount,this.renderedLastFrame=!0}}dispose(){null!=this.textureUtils&&this.textureUtils.dispose(),null!=this.threeRenderer&&this.threeRenderer.dispose(),this.textureUtils=null,this.threeRenderer=null;let e=[];for(let t of this.scenes)e.push(t.element);return this.canvas3D.removeEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.removeEventListener("webglcontextrestored",this.onWebGLContextRestored),e}}nO._singleton=new nO({powerPreference:(self.ModelViewerElement||{}).powerPreference||nP,debug:tv()});/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nH=Symbol("correlatedObjects"),nq=Symbol("onUpdate");class nK{constructor(e,t=null){this[nq]=e,this[nH]=t}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nV=new eu.vBJ,nJ=new eu._12(2,2),nY=0,nj=Symbol("threeTexture"),nz=Symbol("threeTextures");Symbol("applyTexture");class n$ extends nK{get[nj](){var e;return null===(e=this[nH])||void 0===e?void 0:e.values().next().value}get[nz](){return this[nH]}constructor(e,t){super(e,new Set(t?[t]:[])),this[nj].image.src||(this[nj].image.src="adhoc_image"+nY++),this[nj].image.name||(this[nj].image.name=t&&t.image&&t.image.src?t.image.src.split("/").pop():"adhoc_image")}get name(){return this[nj].image.name||""}get uri(){return this[nj].image.src}get bufferView(){return this[nj].image.bufferView}get element(){let e=this[nj];if(e&&(e.isCanvasTexture||e.isVideoTexture))return e.image}get animation(){let e=this[nj];if(e&&e.isCanvasTexture&&e.animation)return e.animation}get type(){return null!=this.uri?"external":"embedded"}set name(e){for(let t of this[nz])t.image.name=e}update(){let e=this[nj];e&&e.isCanvasTexture&&!e.animation&&(this[nj].needsUpdate=!0,this[nq]())}async createThumbnail(e,t){let i=new eu.xsS;nV.map=this[nj];let s=new eu.Kj0(nJ,nV);i.add(s);let r=new eu.iKG(-1,1,1,-1,0,1),{threeRenderer:n}=nO.singleton,a=new eu.dd2(e,t);n.setRenderTarget(a),n.render(i,r),n.setRenderTarget(null);let o=new Uint8Array(e*t*4);n.readRenderTargetPixels(a,0,0,e,t,o),ol.width=e,ol.height=t;let A=ol.getContext("2d"),l=A.createImageData(e,t);return l.data.set(o),A.putImageData(l,0,0),new Promise(async(e,t)=>{ol.toBlob(i=>{if(!i)return t("Failed to capture thumbnail.");e(URL.createObjectURL(i))},"image/png")})}}(E=N||(N={}))[E.Nearest=9728]="Nearest",E[E.Linear=9729]="Linear",E[E.NearestMipmapNearest=9984]="NearestMipmapNearest",E[E.LinearMipmapNearest=9985]="LinearMipmapNearest",E[E.NearestMipmapLinear=9986]="NearestMipmapLinear",E[E.LinearMipmapLinear=9987]="LinearMipmapLinear",(C=G||(G={}))[C.ClampToEdge=33071]="ClampToEdge",C[C.MirroredRepeat=33648]="MirroredRepeat",C[C.Repeat=10497]="Repeat";/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nW=(()=>{let e=[N.Nearest,N.Linear,N.NearestMipmapNearest,N.LinearMipmapLinear,N.NearestMipmapLinear,N.LinearMipmapLinear];return t=>e.indexOf(t)>-1})(),nX=(()=>{let e=[N.Nearest,N.Linear];return t=>e.indexOf(t)>-1})(),nZ=(()=>{let e=[G.ClampToEdge,G.MirroredRepeat,G.Repeat];return t=>e.indexOf(t)>-1})(),n0=(e,t)=>{switch(e){case"minFilter":return nW(t);case"magFilter":return nX(t);case"wrapS":case"wrapT":return nZ(t);case"rotation":case"repeat":case"offset":return!0;default:throw Error(`Cannot configure property "${e}" on Sampler`)}},n1=Symbol("threeTexture"),n2=Symbol("threeTextures"),n3=Symbol("setProperty");class n8 extends nK{get[n1](){var e;return null===(e=this[nH])||void 0===e?void 0:e.values().next().value}get[n2](){return this[nH]}constructor(e,t){super(e,new Set(t?[t]:[]))}get name(){return this[n1].name||""}get minFilter(){return this[n1].minFilter}get magFilter(){return this[n1].magFilter}get wrapS(){return this[n1].wrapS}get wrapT(){return this[n1].wrapT}get rotation(){return this[n1].rotation}get scale(){return this[n1].repeat}get offset(){return this[n1].offset}setMinFilter(e){this[n3]("minFilter",e)}setMagFilter(e){this[n3]("magFilter",e)}setWrapS(e){this[n3]("wrapS",e)}setWrapT(e){this[n3]("wrapT",e)}setRotation(e){null==e&&(e=0),this[n3]("rotation",e)}setScale(e){null==e&&(e=new eu.FM8(1,1)),this[n3]("repeat",e)}setOffset(e){null==e&&(e=new eu.FM8(0,0)),this[n3]("offset",e)}[n3](e,t){if(n0(e,t))for(let i of this[n2])i[e]=t,i.needsUpdate=!0;this[nq]()}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let n4=Symbol("image"),n5=Symbol("sampler"),n6=Symbol("threeTexture");class n9 extends nK{constructor(e,t){super(e,new Set(t?[t]:[])),this[n5]=new n8(e,t),this[n4]=new n$(e,t)}get[n6](){var e;return null===(e=this[nH])||void 0===e?void 0:e.values().next().value}get name(){return this[n6].name||""}set name(e){for(let t of this[nH])t.name=e}get sampler(){return this[n5]}get source(){return this[n4]}}let n7=Symbol("texture"),ae=Symbol("transform"),at=Symbol("materials"),ai=Symbol("usage"),as=Symbol("onUpdate"),ar=Symbol("activeVideo");(B=q||(q={}))[B.Base=0]="Base",B[B.MetallicRoughness=1]="MetallicRoughness",B[B.Normal=2]="Normal",B[B.Occlusion=3]="Occlusion",B[B.Emissive=4]="Emissive",B[B.Clearcoat=5]="Clearcoat",B[B.ClearcoatRoughness=6]="ClearcoatRoughness",B[B.ClearcoatNormal=7]="ClearcoatNormal",B[B.SheenColor=8]="SheenColor",B[B.SheenRoughness=9]="SheenRoughness",B[B.Transmission=10]="Transmission",B[B.Thickness=11]="Thickness",B[B.Specular=12]="Specular",B[B.SpecularColor=13]="SpecularColor",B[B.Iridescence=14]="Iridescence",B[B.IridescenceThickness=15]="IridescenceThickness",B[B.Anisotropy=16]="Anisotropy";class an{constructor(e,t,i,s){this[P]=null,this[O]={rotation:0,scale:new eu.FM8(1,1),offset:new eu.FM8(0,0)},this[H]=!1,i&&(this[ae].rotation=i.rotation,this[ae].scale.copy(i.repeat),this[ae].offset.copy(i.offset),this[n7]=new n9(e,i)),this[as]=e,this[at]=s,this[ai]=t}get texture(){return this[n7]}setTexture(e){var t,i;let s=null!=e?e.source[nj]:null,r=null===(t=this[n7])||void 0===t?void 0:t.source[nj];if(null!=r&&r.isVideoTexture?this[ar]=!1:(null===(i=this[n7])||void 0===i?void 0:i.source.animation)&&this[n7].source.animation.removeEventListener("enterFrame",this[as]),this[n7]=e,null!=s&&s.isVideoTexture){let e=s.image;if(this[ar]=!0,null!=e.requestVideoFrameCallback){let t=()=>{this[ar]&&(this[as](),e.requestVideoFrameCallback(t))};e.requestVideoFrameCallback(t)}else{let e=()=>{this[ar]&&(this[as](),requestAnimationFrame(e))};requestAnimationFrame(e)}}else(null==e?void 0:e.source.animation)!=null&&e.source.animation.addEventListener("enterFrame",this[as]);let n=eu.KI_;if(this[at])for(let e of this[at]){switch(this[ai]){case q.Base:e.map=s;break;case q.MetallicRoughness:n=eu.GUF,e.metalnessMap=s,e.roughnessMap=s;break;case q.Normal:n=eu.GUF,e.normalMap=s;break;case q.Occlusion:n=eu.GUF,e.aoMap=s;break;case q.Emissive:e.emissiveMap=s;break;case q.Clearcoat:e.clearcoatMap=s;break;case q.ClearcoatRoughness:e.clearcoatRoughnessMap=s;break;case q.ClearcoatNormal:e.clearcoatNormalMap=s;break;case q.SheenColor:e.sheenColorMap=s;break;case q.SheenRoughness:e.sheenRoughnessMap=s;break;case q.Transmission:e.transmissionMap=s;break;case q.Thickness:e.thicknessMap=s;break;case q.Specular:e.specularIntensityMap=s;break;case q.SpecularColor:e.specularColorMap=s;break;case q.Iridescence:e.iridescenceMap=s;break;case q.IridescenceThickness:e.iridescenceThicknessMap=s;break;case q.Anisotropy:e.anisotropyMap=s}e.needsUpdate=!0}s&&(s.colorSpace=n,s.rotation=this[ae].rotation,s.repeat=this[ae].scale,s.offset=this[ae].offset),this[as]()}}P=n7,O=ae,H=ar;/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aa=Symbol("threeMaterial"),ao=Symbol("threeMaterials"),aA=Symbol("baseColorTexture"),al=Symbol("metallicRoughnessTexture");class ah extends nK{constructor(e,t){super(e,t);let{map:i,metalnessMap:s}=t.values().next().value;this[aA]=new an(e,q.Base,i,t),this[al]=new an(e,q.MetallicRoughness,s,t)}get[ao](){return this[nH]}get[aa](){var e;return null===(e=this[nH])||void 0===e?void 0:e.values().next().value}get baseColorFactor(){let e=[0,0,0,this[aa].opacity];return this[aa].color.toArray(e),e}get metallicFactor(){return this[aa].metalness}get roughnessFactor(){return this[aa].roughness}get baseColorTexture(){return this[aA]}get metallicRoughnessTexture(){return this[al]}setBaseColorFactor(e){let t=new eu.Ilk;for(let i of(e instanceof Array?t.fromArray(e):t.set(e),this[ao]))i.color.set(t),e instanceof Array?i.opacity=e[3]:(e=[0,0,0,i.opacity],t.toArray(e));this[nq]()}setMetallicFactor(e){for(let t of this[ao])t.metalness=e;this[nq]()}setRoughnessFactor(e){for(let t of this[ao])t.roughness=e;this[nq]()}}let au=Symbol("pbrMetallicRoughness"),ac=Symbol("normalTexture"),ag=Symbol("occlusionTexture"),ad=Symbol("emissiveTexture"),ap=Symbol("backingThreeMaterial"),am=Symbol("applyAlphaCutoff"),af=Symbol("getAlphaMode"),aI=Symbol("lazyLoadGLTFInfo"),aE=Symbol("initialize"),aC=Symbol("getLoadedMaterial"),aB=Symbol("ensureMaterialIsLoaded"),ay=Symbol("gltfIndex"),aw=Symbol("setActive"),aQ=Symbol("variantIndices"),av=Symbol("isActive"),ab=Symbol("variantSet"),aS=Symbol("modelVariants"),ax=Symbol("name"),aR=Symbol("pbrTextures");class aT extends nK{constructor(e,t,i,s,r,n,a){super(e,r),this[K]=new Set,this[V]=new Map,this[ay]=t,this[av]=i,this[aS]=s,this[ax]=n,null==a?this[aE]():this[aI]=a}get[(K=ab,V=aR,ap)](){return this[nH].values().next().value}[aE](){let e=this[nq],t=this[nH];this[au]=new ah(e,t);let{normalMap:i,aoMap:s,emissiveMap:r}=t.values().next().value;this[ac]=new an(e,q.Normal,i,t),this[ag]=new an(e,q.Occlusion,s,t),this[ad]=new an(e,q.Emissive,r,t);let n=i=>{this[aR].set(i,new an(e,i,null,t))};n(q.Clearcoat),n(q.ClearcoatRoughness),n(q.ClearcoatNormal),n(q.SheenColor),n(q.SheenRoughness),n(q.Transmission),n(q.Thickness),n(q.Specular),n(q.SpecularColor),n(q.Iridescence),n(q.IridescenceThickness),n(q.Anisotropy)}async [aC](){if(null!=this[aI]){let{set:e,material:t}=await this[aI].doLazyLoad();return this[nH]=e,this[aE](),this[aI]=void 0,this.ensureLoaded=async()=>{},t}return this[nH].values().next().value}colorFromRgb(e){let t=new eu.Ilk;return e instanceof Array?t.fromArray(e):t.set(e),t}[aB](){if(null!=this[aI])throw Error(`Material "${this.name}" has not been loaded, call 'await
    myMaterial.ensureLoaded()' before using an unloaded material.`)}async ensureLoaded(){await this[aC]()}get isLoaded(){return null==this[aI]}get isActive(){return this[av]}[aw](e){this[av]=e}get name(){return this[ax]||""}set name(e){if(this[ax]=e,null!=this[nH])for(let t of this[nH])t.name=e}get pbrMetallicRoughness(){return this[aB](),this[au]}get normalTexture(){return this[aB](),this[ac]}get occlusionTexture(){return this[aB](),this[ag]}get emissiveTexture(){return this[aB](),this[ad]}get emissiveFactor(){return this[aB](),this[ap].emissive.toArray()}get index(){return this[ay]}[aQ](){return this[ab]}hasVariant(e){let t=this[aS].get(e);return null!=t&&this[ab].has(t.index)}setEmissiveFactor(e){this[aB]();let t=this.colorFromRgb(e);for(let e of this[nH])e.emissive.set(t);this[nq]()}[af](){return this[ap].transparent?"BLEND":this[ap].alphaTest>0?"MASK":"OPAQUE"}[am](){for(let e of(this[aB](),this[nH]))"MASK"===this[af]()?void 0==e.alphaTest&&(e.alphaTest=.5):e.alphaTest=void 0,e.needsUpdate=!0}setAlphaCutoff(e){for(let t of(this[aB](),this[nH]))t.alphaTest=e,t.needsUpdate=!0;this[am](),this[nq]()}getAlphaCutoff(){return this[aB](),this[ap].alphaTest}setDoubleSided(e){for(let t of(this[aB](),this[nH]))t.side=e?eu.ehD:eu.Wl3,t.needsUpdate=!0;this[nq]()}getDoubleSided(){return this[aB](),this[ap].side==eu.ehD}setAlphaMode(e){this[aB]();let t=(e,t)=>{e.transparent=t,e.depthWrite=!t};for(let i of this[nH])t(i,"BLEND"===e),"MASK"===e?i.alphaTest=.5:i.alphaTest=void 0,i.needsUpdate=!0;this[nq]()}getAlphaMode(){return this[aB](),this[af]()}get emissiveStrength(){return this[aB](),this[ap].emissiveIntensity}setEmissiveStrength(e){for(let t of(this[aB](),this[nH]))t.emissiveIntensity=e;this[nq]()}get clearcoatFactor(){return this[aB](),this[ap].clearcoat}get clearcoatRoughnessFactor(){return this[aB](),this[ap].clearcoatRoughness}get clearcoatTexture(){return this[aB](),this[aR].get(q.Clearcoat)}get clearcoatRoughnessTexture(){return this[aB](),this[aR].get(q.ClearcoatRoughness)}get clearcoatNormalTexture(){return this[aB](),this[aR].get(q.ClearcoatNormal)}get clearcoatNormalScale(){return this[aB](),this[ap].clearcoatNormalScale.x}setClearcoatFactor(e){for(let t of(this[aB](),this[nH]))t.clearcoat=e;this[nq]()}setClearcoatRoughnessFactor(e){for(let t of(this[aB](),this[nH]))t.clearcoatRoughness=e;this[nq]()}setClearcoatNormalScale(e){for(let t of(this[aB](),this[nH]))t.clearcoatNormalScale=new eu.FM8(e,e);this[nq]()}get ior(){return this[aB](),this[ap].ior}setIor(e){for(let t of(this[aB](),this[nH]))t.ior=e;this[nq]()}get sheenColorFactor(){return this[aB](),this[ap].sheenColor.toArray()}get sheenColorTexture(){return this[aB](),this[aR].get(q.SheenColor)}get sheenRoughnessFactor(){return this[aB](),this[ap].sheenRoughness}get sheenRoughnessTexture(){return this[aB](),this[aR].get(q.SheenRoughness)}setSheenColorFactor(e){this[aB]();let t=this.colorFromRgb(e);for(let e of this[nH])e.sheenColor.set(t),e.sheen=1;this[nq]()}setSheenRoughnessFactor(e){for(let t of(this[aB](),this[nH]))t.sheenRoughness=e,t.sheen=1;this[nq]()}get transmissionFactor(){return this[aB](),this[ap].transmission}get transmissionTexture(){return this[aB](),this[aR].get(q.Transmission)}setTransmissionFactor(e){for(let t of(this[aB](),this[nH]))t.transmission=e;this[nq]()}get thicknessFactor(){return this[aB](),this[ap].thickness}get thicknessTexture(){return this[aB](),this[aR].get(q.Thickness)}get attenuationDistance(){return this[aB](),this[ap].attenuationDistance}get attenuationColor(){return this[aB](),this[ap].attenuationColor.toArray()}setThicknessFactor(e){for(let t of(this[aB](),this[nH]))t.thickness=e;this[nq]()}setAttenuationDistance(e){for(let t of(this[aB](),this[nH]))t.attenuationDistance=e;this[nq]()}setAttenuationColor(e){this[aB]();let t=this.colorFromRgb(e);for(let e of this[nH])e.attenuationColor.set(t);this[nq]()}get specularFactor(){return this[aB](),this[ap].specularIntensity}get specularTexture(){return this[aB](),this[aR].get(q.Specular)}get specularColorFactor(){return this[aB](),this[ap].specularColor.toArray()}get specularColorTexture(){return this[aB](),this[aR].get(q.SheenColor)}setSpecularFactor(e){for(let t of(this[aB](),this[nH]))t.specularIntensity=e;this[nq]()}setSpecularColorFactor(e){this[aB]();let t=this.colorFromRgb(e);for(let e of this[nH])e.specularColor.set(t);this[nq]()}get iridescenceFactor(){return this[aB](),this[ap].iridescence}get iridescenceTexture(){return this[aB](),this[aR].get(q.Iridescence)}get iridescenceIor(){return this[aB](),this[ap].iridescenceIOR}get iridescenceThicknessMinimum(){return this[aB](),this[ap].iridescenceThicknessRange[0]}get iridescenceThicknessMaximum(){return this[aB](),this[ap].iridescenceThicknessRange[1]}get iridescenceThicknessTexture(){return this[aB](),this[aR].get(q.IridescenceThickness)}setIridescenceFactor(e){for(let t of(this[aB](),this[nH]))t.iridescence=e;this[nq]()}setIridescenceIor(e){for(let t of(this[aB](),this[nH]))t.iridescenceIOR=e;this[nq]()}setIridescenceThicknessMinimum(e){for(let t of(this[aB](),this[nH]))t.iridescenceThicknessRange[0]=e;this[nq]()}setIridescenceThicknessMaximum(e){for(let t of(this[aB](),this[nH]))t.iridescenceThicknessRange[1]=e;this[nq]()}get anisotropyStrength(){return this[aB](),this[ap].anisotropy}get anisotropyRotation(){return this[aB](),this[ap].anisotropyRotation}get anisotropyTexture(){return this[aB](),this[aR].get(q.Anisotropy)}setAnisotropyStrength(e){for(let t of(this[aB](),this[nH]))t.anisotropy=e;this[nq]()}setAnisotropyRotation(e){for(let t of(this[aB](),this[nH]))t.anisotropyRotation=e;this[nq]()}}class aM{constructor(e){this.name="",this.children=[],this.name=e}}class aD extends aM{constructor(e,t,i,s){super(e.name),this.materials=new Map,this.variantToMaterialMap=new Map,this.initialMaterialIdx=0,this.activeMaterialIdx=0,this.mesh=e;let{gltf:r,threeGLTF:n,threeObjectMap:a}=s;this.modelVariants=i,this.mesh.userData.variantData=i;let o=a.get(e.material);null!=o.materials?this.initialMaterialIdx=this.activeMaterialIdx=o.materials:console.error(`Primitive (${e.name}) missing initial material reference.`);let A=e.userData.associations||{};if(null==A.meshes){console.error("Mesh is missing primitive index association");return}let l=((r.meshes||[])[A.meshes].primitives||[])[A.primitives];if(null==l){console.error("Mesh primitive definition is missing.");return}if(null!=l.material)this.materials.set(l.material,t[l.material]);else{let e=t.findIndex(e=>"Default"===e.name);e>=0?this.materials.set(e,t[e]):console.warn("gltfPrimitive has no material!")}if(l.extensions&&l.extensions.KHR_materials_variants){let e=l.extensions.KHR_materials_variants,s=n.parser.json.extensions.KHR_materials_variants.variants;for(let r of e.mappings){let e=t[r.material];for(let t of(this.materials.set(r.material,e),r.variants)){let{name:r}=s[t];this.variantToMaterialMap.set(t,e),e[aQ]().add(t),i.has(r)||i.set(r,{name:r,index:t})}}}}async setActiveMaterial(e){let t=this.materials.get(e);return null!=t&&(this.mesh.material=await t[aC](),this.activeMaterialIdx=e),this.mesh.material}getActiveMaterial(){return this.materials.get(this.activeMaterialIdx)}getMaterial(e){return this.materials.get(e)}async enableVariant(e){if(null==e)return this.setActiveMaterial(this.initialMaterialIdx);if(null!=this.variantToMaterialMap&&this.modelVariants.has(e)){let t=this.modelVariants.get(e);return this.enableVariantHelper(t.index)}return null}async enableVariantHelper(e){if(null!=this.variantToMaterialMap&&null!=e){let t=this.variantToMaterialMap.get(e);if(null!=t)return this.setActiveMaterial(t.index)}return null}async instantiateVariants(){if(null!=this.variantToMaterialMap)for(let e of this.variantToMaterialMap.keys()){let t=this.mesh.userData.variantMaterials.get(e);if(null!=t.material)continue;let i=await this.enableVariantHelper(e);null!=i&&(t.material=i)}}get variantInfo(){return this.variantToMaterialMap}addVariant(e,t){if(!this.ensureVariantIsUnused(t))return!1;this.modelVariants.has(t)||this.modelVariants.set(t,{name:t,index:this.modelVariants.size});let i=this.modelVariants.get(t).index;return e[aQ]().add(i),this.variantToMaterialMap.set(i,e),this.materials.set(e.index,e),this.updateVariantUserData(i,e),!0}deleteVariant(e){if(this.variantInfo.has(e)){this.variantInfo.delete(e);let t=this.mesh.userData.variantMaterials;null!=t&&t.delete(e)}}updateVariantUserData(e,t){t[aQ]().add(e),this.mesh.userData.variantData=this.modelVariants,this.mesh.userData.variantMaterials=this.mesh.userData.variantMaterials||new Map,this.mesh.userData.variantMaterials.set(e,{material:t[nH].values().next().value,gltfMaterialIndex:t.index})}ensureVariantIsUnused(e){let t=this.modelVariants.get(e);return!(null!=t&&this.variantInfo.has(t.index))||(console.warn(`Primitive cannot add variant '${e}' for this material, it already exists.`),!1)}}let aL=Symbol("materials"),aF=Symbol("hierarchy"),ak=Symbol("roots"),aU=Symbol("primitives");Symbol("loadVariant");let a_=Symbol("prepareVariantsForExport"),aN=Symbol("switchVariant"),aG=Symbol("materialFromPoint"),aP=Symbol("nodeFromPoint"),aO=Symbol("nodeFromIndex"),aH=Symbol("variantData"),aq=Symbol("availableVariants"),aK=Symbol("modelOnUpdate"),aV=Symbol("cloneMaterial");class aJ{constructor(e,t,i,s){this.gltf=e,this.gltfElementMap=t,this.mapKey=i,this.doLazyLoad=s}}class aY{constructor(e,t=()=>{}){this[J]=[],this[Y]=[],this[j]=[],this[z]=[],this[$]=()=>{},this[W]=new Map,this[aK]=t;let{gltf:i,threeGLTF:s,gltfElementMap:r}=e;for(let[e,n]of i.materials.entries()){let a=r.get(n);if(null!=a)this[aL].push(new aT(t,e,!0,this[aH],a,n.name));else{let o=(i.materials||[])[e],A=e,l=async()=>{let e=await s.parser.getDependency("material",A),t=new Set;return r.set(o,t),t.add(e),{set:t,material:e}};this[aL].push(new aT(t,e,!1,this[aH],a,n.name,new aJ(i,r,o,l)))}}let n=new Map,a=[];for(let e of s.scene.children)a.push(e);for(;a.length>0;){let t=a.pop(),i=null;t instanceof eu.Kj0?(i=new aD(t,this.materials,this[aH],e),this[aU].push(i)):i=new aM(t.name);let s=n.get(t);for(let e of(null!=s?s.children.push(i):this[ak].push(i),this[aF].push(i),t.children))a.push(e),n.set(t,i)}}get materials(){return this[aL]}[(J=aL,Y=aF,j=ak,z=aU,$=aK,W=aH,aq)](){let e=Array.from(this[aH].values());return e.sort((e,t)=>e.index-t.index),e.map(e=>e.name)}getMaterialByName(e){let t=this[aL].filter(t=>t.name===e);return t.length>0?t[0]:null}[aO](e,t){let i=this[aF].find(i=>{if(i instanceof aD){let{meshes:s,primitives:r}=i.mesh.userData.associations;if(s==e&&r==t)return!0}return!1});return null==i?null:i}[aP](e){return this[aF].find(t=>t instanceof aD&&t.mesh===e.object)}[aG](e){return this[aP](e).getActiveMaterial()}async [aN](e){for(let t of this[aU])await t.enableVariant(e);for(let e of this.materials)e[aw](!1);for(let e of this[aU])this.materials[e.getActiveMaterial().index][aw](!0)}async [a_](){let e=[];for(let t of this[aU])e.push(t.instantiateVariants());await Promise.all(e)}[aV](e,t){let i=this.materials[e];i.isLoaded||console.error(`Cloning an unloaded material,
           call 'material.ensureLoaded() before cloning the material.`);let s=i[nH],r=new Set;for(let[e,i]of s.entries()){let n=i.clone();n.name=t+(s.size>1?"_inst"+e:""),r.add(n)}let n=new aT(this[aK],this[aL].length,!1,this[aH],r,t);return this[aL].push(n),n}createMaterialInstanceForVariant(e,t,i,s=!0){let r=null;for(let s of this[aU]){let n=this[aH].get(i);null!=n&&s.variantInfo.has(n.index)||null==s.getMaterial(e)||(this.hasVariant(i)||this.createVariant(i),null==r&&(r=this[aV](e,t)),s.addVariant(r,i))}if(s&&null!=r)for(let t of(r[aw](!0),this.materials[e][aw](!1),this[aU]))t.enableVariant(i);return r}createVariant(e){this[aH].has(e)?console.warn(`Variant '${e}'' already exists`):this[aH].set(e,{name:e,index:this[aH].size})}hasVariant(e){return this[aH].has(e)}setMaterialToVariant(e,t){if(null==this[aq]().find(e=>e===t)){console.warn(`Can't add material to '${t}', the variant does not exist.'`);return}if(e<0||e>=this.materials.length){console.error("setMaterialToVariant(): materialIndex is out of bounds.");return}for(let i of this[aU]){let s=i.getMaterial(e);null!=s&&i.addVariant(s,t)}}updateVariantName(e,t){let i=this[aH].get(e);null!=i&&(i.name=t,this[aH].set(t,i),this[aH].delete(e))}deleteVariant(e){let t=this[aH].get(e);if(null!=t){for(let i of this.materials)i.hasVariant(e)&&i[ab].delete(t.index);for(let e of this[aU])e.deleteVariant(t.index);this[aH].delete(e)}}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aj=function(e,t,i,s){var r,n=arguments.length,a=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,s);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let az=Symbol("currentGLTF"),a$=Symbol("originalGltfJson"),aW=Symbol("model"),aX=Symbol("getOnUpdateMethod"),aZ=Symbol("buildTexture"),a0=new eu.Pa4,a1=new eu.Pa4,a2=new eu.Pa4,a3=new eu.Vkp,a8=new eu.CJI,a4=new eu._fP;class a5 extends i5{constructor(e){super(document.createElement("div")),this.normal=new eu.Pa4(0,1,0),this.initialized=!1,this.referenceCount=1,this.pivot=document.createElement("div"),this.slot=document.createElement("slot"),this.element.classList.add("annotation-wrapper"),this.slot.name=e.name,this.element.appendChild(this.pivot),this.pivot.appendChild(this.slot),this.updatePosition(e.position),this.updateNormal(e.normal),this.surface=e.surface}get facingCamera(){return!this.element.classList.contains("hide")}show(){this.facingCamera&&this.initialized||this.updateVisibility(!0)}hide(){(this.facingCamera||!this.initialized)&&this.updateVisibility(!1)}increment(){this.referenceCount++}decrement(){return this.referenceCount>0&&--this.referenceCount,0===this.referenceCount}updatePosition(e){if(null==e)return;let t=sP(e)[0].terms;for(let e=0;e<3;++e)this.position.setComponent(e,sW(t[e]).number);this.updateMatrixWorld()}updateNormal(e){if(null==e)return;let t=sP(e)[0].terms;for(let e=0;e<3;++e)this.normal.setComponent(e,t[e].number)}updateSurface(e){if(!e&&this.initialized)return;let{mesh:t,tri:i,bary:s}=this;if(null==t||null==i||null==s)return;t.getVertexPosition(i.x,a0),t.getVertexPosition(i.y,a1),t.getVertexPosition(i.z,a2),a0.toArray(a3.elements,0),a1.toArray(a3.elements,3),a2.toArray(a3.elements,6),this.position.copy(s).applyMatrix3(a3);let r=this.parent;r.worldToLocal(t.localToWorld(this.position)),a8.set(a0,a1,a2),a8.getNormal(this.normal).transformDirection(t.matrixWorld);let n=r.parent;a4.setFromAxisAngle(a0.set(0,1,0),-n.yaw),this.normal.applyQuaternion(a4)}orient(e){this.pivot.style.transform=`rotate(${e}rad)`}updateVisibility(e){e?this.element.classList.remove("hide"):this.element.classList.add("hide"),this.slot.assignedNodes().forEach(t=>{if(t.nodeType!==Node.ELEMENT_NODE)return;let i=t.dataset.visibilityAttribute;if(null!=i){let s=`data-${i}`;e?t.setAttribute(s,""):t.removeAttribute(s)}t.dispatchEvent(new CustomEvent("hotspot-visibility",{detail:{visible:e}}))}),this.initialized=!0}}let a6={name:"HorizontalBlurShader",uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float h;

		varying vec2 vUv;

		void main() {

			vec4 sum = vec4( 0.0 );

			sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
			sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
			sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

			gl_FragColor = sum;

		}`},a9={name:"VerticalBlurShader",uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float v;

		varying vec2 vUv;

		void main() {

			vec4 sum = vec4( 0.0 );

			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

			gl_FragColor = sum;

		}`};class a7 extends eu.Tme{constructor(e,t,i){super(),this.camera=new eu.iKG,this.renderTarget=null,this.renderTargetBlur=null,this.depthMaterial=new eu.lRF,this.horizontalBlurMaterial=new eu.jyz(a6),this.verticalBlurMaterial=new eu.jyz(a9),this.intensity=0,this.softness=1,this.boundingBox=new eu.ZzF,this.size=new eu.Pa4,this.maxDimension=0,this.isAnimated=!1,this.needsUpdate=!1;let{camera:s}=this;s.rotation.x=Math.PI/2,s.left=-.5,s.right=.5,s.bottom=-.5,s.top=.5,this.add(s);let r=new eu._12,n=new eu.vBJ({opacity:1,transparent:!0,side:eu._Li});this.floor=new eu.Kj0(r,n),this.floor.userData.shadow=!0,s.add(this.floor),this.blurPlane=new eu.Kj0(r),this.blurPlane.visible=!1,s.add(this.blurPlane),e.target.add(this),this.depthMaterial.onBeforeCompile=function(e){e.fragmentShader=e.fragmentShader.replace("gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );","gl_FragColor = vec4( vec3( 0.0 ), ( 1.0 - fragCoordZ ) * opacity );")},this.horizontalBlurMaterial.depthTest=!1,this.verticalBlurMaterial.depthTest=!1,this.setScene(e,t,i)}setScene(e,t,i){let{boundingBox:s,size:r,rotation:n,position:a}=this;if(this.isAnimated=e.animationNames.length>0,this.boundingBox.copy(e.boundingBox),this.size.copy(e.size),this.maxDimension=Math.max(r.x,r.y,r.z)*(this.isAnimated?2:1),this.boundingBox.getCenter(a),"back"===i){let{min:e,max:t}=s;[e.y,e.z]=[e.z,e.y],[t.y,t.z]=[t.z,t.y],[r.y,r.z]=[r.z,r.y],n.x=Math.PI/2,n.y=Math.PI}else n.x=0,n.y=0;if(this.isAnimated){let e=s.min.y,t=s.max.y;r.y=this.maxDimension,s.expandByVector(r.subScalar(this.maxDimension).multiplyScalar(-.5)),s.min.y=e,s.max.y=t,r.set(this.maxDimension,t-e,this.maxDimension)}"bottom"===i?a.y=s.min.y:a.z=s.min.y,this.setSoftness(t)}setSoftness(e){this.softness=e;let{size:t,camera:i}=this,s=this.isAnimated?2:1;this.setMapSize(s*Math.pow(2,9-3*e));let r=t.y/2,n=t.y*s;i.near=0,i.far=(1-e)*n+e*r,this.depthMaterial.opacity=1/e,i.updateProjectionMatrix(),this.setIntensity(this.intensity),this.setOffset(0)}setMapSize(e){let{size:t}=this;this.isAnimated&&(e*=2);let i=Math.floor(t.x>t.z?e:e*t.x/t.z),s=Math.floor(t.x>t.z?e*t.z/t.x:e),r=10+i,n=10+s;if(null!=this.renderTarget&&(this.renderTarget.width!==r||this.renderTarget.height!==n)&&(this.renderTarget.dispose(),this.renderTarget=null,this.renderTargetBlur.dispose(),this.renderTargetBlur=null),null==this.renderTarget){let e={format:eu.wk1};this.renderTarget=new eu.dd2(r,n,e),this.renderTargetBlur=new eu.dd2(r,n,e),this.floor.material.map=this.renderTarget.texture}this.camera.scale.set(t.x*(1+10/i),t.z*(1+10/s),1),this.needsUpdate=!0}setIntensity(e){if(this.intensity=e,e>0){var t;this.visible=!0,this.floor.visible=!0,this.floor.material.opacity=e*((1-(t=this.softness*this.softness))*.3+1*t)}else this.visible=!1,this.floor.visible=!1}getIntensity(){return this.intensity}setOffset(e){this.floor.position.z=-e+.001*this.maxDimension}render(e,t){t.overrideMaterial=this.depthMaterial;let i=e.getClearAlpha();e.setClearAlpha(0),this.floor.visible=!1;let s=e.xr.enabled;e.xr.enabled=!1;let r=e.getRenderTarget();e.setRenderTarget(this.renderTarget),e.render(t,this.camera),t.overrideMaterial=null,this.floor.visible=!0,this.blurShadow(e),e.xr.enabled=s,e.setRenderTarget(r),e.setClearAlpha(i)}blurShadow(e){let{camera:t,horizontalBlurMaterial:i,verticalBlurMaterial:s,renderTarget:r,renderTargetBlur:n,blurPlane:a}=this;a.visible=!0,a.material=i,i.uniforms.h.value=1/this.renderTarget.width,i.uniforms.tDiffuse.value=this.renderTarget.texture,e.setRenderTarget(n),e.render(a,t),a.material=s,s.uniforms.v.value=1/this.renderTarget.height,s.uniforms.tDiffuse.value=this.renderTargetBlur.texture,e.setRenderTarget(r),e.render(a,t),a.visible=!1}dispose(){null!=this.renderTarget&&this.renderTarget.dispose(),null!=this.renderTargetBlur&&this.renderTargetBlur.dispose(),this.depthMaterial.dispose(),this.horizontalBlurMaterial.dispose(),this.verticalBlurMaterial.dispose(),this.floor.material.dispose(),this.floor.geometry.dispose(),this.blurPlane.geometry.dispose(),this.removeFromParent()}}let oe=new eu.Pa4,ot=new eu.Pa4,oi=new eu.Pa4,os=new eu.iMs,or=new eu.Pa4,on=new eu.FM8;class oa extends eu.xsS{constructor({canvas:e,element:t,width:i,height:s}){super(),this.annotationRenderer=new si,this.effectRenderer=null,this.schemaElement=document.createElement("script"),this.width=1,this.height=1,this.aspect=1,this.scaleStep=0,this.renderCount=0,this.externalRenderer=null,this.camera=new eu.cPb(45,1,.1,100),this.xrCamera=null,this.url=null,this.target=new eu.Tme,this.animationNames=[],this.boundingBox=new eu.ZzF,this.boundingSphere=new eu.aLr,this.size=new eu.Pa4,this.idealAspect=0,this.framedFoVDeg=0,this.shadow=null,this.shadowIntensity=0,this.shadowSoftness=1,this.bakedShadows=new Set,this.exposure=1,this.canScale=!0,this.isDirty=!1,this.goalTarget=new eu.Pa4,this.targetDamperX=new sF,this.targetDamperY=new sF,this.targetDamperZ=new sF,this._currentGLTF=null,this._model=null,this.cancelPendingSourceChange=null,this.animationsByName=new Map,this.currentAnimationAction=null,this.name="ModelScene",this.element=t,this.canvas=e,this.camera=new eu.cPb(45,1,.1,100),this.camera.name="MainCamera",this.add(this.target),this.setSize(i,s),this.target.name="Target",this.mixer=new eu.Xcj(this.target);let{domElement:r}=this.annotationRenderer,{style:n}=r;n.display="none",n.pointerEvents="none",n.position="absolute",n.top="0",this.element.shadowRoot.querySelector(".default").appendChild(r),this.schemaElement.setAttribute("type","application/ld+json")}get context(){return this.canvas.getContext("2d")}getCamera(){return null!=this.xrCamera?this.xrCamera:this.camera}queueRender(){this.isDirty=!0}shouldRender(){return this.isDirty}hasRendered(){this.isDirty=!1}forceRescale(){this.scaleStep=-1,this.queueRender()}async setObject(e){this.reset(),this._model=e,this.target.add(e),await this.setupScene()}async setSource(e,t=()=>{}){let i;if(!e||e===this.url){t(1);return}if(this.reset(),this.url=e,null!=this.externalRenderer){let e=await this.externalRenderer.load(t);this.boundingSphere.radius=e.framedRadius,this.idealAspect=e.fieldOfViewAspect;return}null!=this.cancelPendingSourceChange&&(this.cancelPendingSourceChange(),this.cancelPendingSourceChange=null);try{i=await new Promise(async(i,s)=>{this.cancelPendingSourceChange=()=>s();try{let s=await this.element[oN].loader.load(e,this.element,t);i(s)}catch(e){s(e)}})}catch(e){if(null==e)return;throw e}this.cancelPendingSourceChange=null,this.reset(),this.url=e,this._currentGLTF=i,null!=i&&(this._model=i.scene,this.target.add(i.scene));let{animations:s}=i,r=new Map,n=[];for(let e of s)r.set(e.name,e),n.push(e.name);this.animations=s,this.animationsByName=r,this.animationNames=n,await this.setupScene()}async setupScene(){this.applyTransform(),this.updateBoundingBox(),await this.updateFraming(),this.updateShadow(),this.setShadowIntensity(this.shadowIntensity)}reset(){this.url=null,this.renderCount=0,this.queueRender(),null!=this.shadow&&this.shadow.setIntensity(0),this.bakedShadows.clear();let{_model:e}=this;null!=e&&(e.removeFromParent(),this._model=null);let t=this._currentGLTF;null!=t&&(t.dispose(),this._currentGLTF=null),null!=this.currentAnimationAction&&(this.currentAnimationAction.stop(),this.currentAnimationAction=null),this.mixer.stopAllAction(),this.mixer.uncacheRoot(this)}dispose(){this.reset(),null!=this.shadow&&(this.shadow.dispose(),this.shadow=null),this.element[az]=null,this.element[a$]=null,this.element[aW]=null}get currentGLTF(){return this._currentGLTF}setSize(e,t){if(this.width!==e||this.height!==t){if(this.width=Math.max(e,1),this.height=Math.max(t,1),this.annotationRenderer.setSize(e,t),this.aspect=this.width/this.height,null!=this.externalRenderer){let i=tQ();this.externalRenderer.resize(e*i,t*i)}this.queueRender()}}markBakedShadow(e){e.userData.shadow=!0,this.bakedShadows.add(e)}unmarkBakedShadow(e){e.userData.shadow=!1,e.visible=!0,this.bakedShadows.delete(e),this.boundingBox.expandByObject(e)}findBakedShadows(e){let t=new eu.ZzF;e.traverse(e=>{if(!e.material||!e.material.transparent)return;t.setFromObject(e);let i=t.getSize(or),s=Math.min(i.x,i.y,i.z);Math.max(i.x,i.y,i.z)<100*s||this.markBakedShadow(e)})}checkBakedShadows(){let{min:e,max:t}=this.boundingBox,i=new eu.ZzF;for(let s of(this.boundingBox.getSize(this.size),this.bakedShadows))i.setFromObject(s),i.min.y<e.y+this.size.y/100&&i.min.x<=e.x&&i.max.x>=t.x&&i.min.z<=e.z&&i.max.z>=t.z||i.min.z<e.z+this.size.z/100&&i.min.x<=e.x&&i.max.x>=t.x&&i.min.y<=e.y&&i.max.y>=t.y||this.unmarkBakedShadow(s)}applyTransform(){let{model:e}=this;if(null==e)return;let t=sP(this.element.orientation)[0].terms,i=sW(t[0]).number,s=sW(t[1]).number,r=sW(t[2]).number;e.quaternion.setFromEuler(new eu.USm(s,r,i,"YXZ"));let n=sP(this.element.scale)[0].terms;e.scale.set(n[0].number,n[1].number,n[2].number)}updateBoundingBox(){let{model:e}=this;if(null==e)return;this.target.remove(e),this.findBakedShadows(e);let t=(e,t)=>e.expandByPoint(t);this.setBakedShadowVisibility(!1),this.boundingBox=ss(e,t,new eu.ZzF),this.boundingBox.isEmpty()&&(this.setBakedShadowVisibility(!0),this.bakedShadows.forEach(e=>this.unmarkBakedShadow(e)),this.boundingBox=ss(e,t,new eu.ZzF)),this.checkBakedShadows(),this.setBakedShadowVisibility(),this.boundingBox.getSize(this.size),this.target.add(e)}async updateFraming(){let{model:e}=this;if(null==e)return;this.target.remove(e),this.setBakedShadowVisibility(!1);let{center:t}=this.boundingSphere;this.element.requestUpdate("cameraTarget"),await this.element.updateComplete,t.copy(this.getTarget()),this.boundingSphere.radius=Math.sqrt(ss(e,(e,i)=>Math.max(e,t.distanceToSquared(i)),0)),this.idealAspect=ss(e,(e,i)=>(i.sub(t),Math.max(e,Math.sqrt(i.x*i.x+i.z*i.z)/(this.idealCameraDistance()-Math.abs(i.y)))),0)/Math.tan(this.framedFoVDeg/2*Math.PI/180),this.setBakedShadowVisibility(),this.target.add(e)}setBakedShadowVisibility(e=this.shadowIntensity<=0){for(let t of this.bakedShadows)t.visible=e}idealCameraDistance(){let e=this.framedFoVDeg/2*Math.PI/180;return this.boundingSphere.radius/Math.sin(e)}adjustedFoV(e){return 2*Math.atan(Math.tan(e/2*Math.PI/180)*Math.max(1,this.idealAspect/this.aspect))*180/Math.PI}getNDC(e,t){if(null!=this.xrCamera)on.set(e/window.screen.width,t/window.screen.height);else{let i=this.element.getBoundingClientRect();on.set((e-i.x)/this.width,(t-i.y)/this.height)}return on.multiplyScalar(2).subScalar(1),on.y*=-1,on}getSize(){return{width:this.width,height:this.height}}setEnvironmentAndSkybox(e,t){this.element[oN].arRenderer.presentedScene!==this&&(this.environment=e,this.background=t,this.queueRender())}setTarget(e,t,i){this.goalTarget.set(-e,-t,-i)}setTargetDamperDecayTime(e){this.targetDamperX.setDecayTime(e),this.targetDamperY.setDecayTime(e),this.targetDamperZ.setDecayTime(e)}getTarget(){return this.goalTarget.clone().multiplyScalar(-1)}jumpToGoal(){this.updateTarget(1e4)}updateTarget(e){let t=this.goalTarget,i=this.target.position;if(t.equals(i))return!1;{let s=this.boundingSphere.radius/10,{x:r,y:n,z:a}=i;return r=this.targetDamperX.update(r,t.x,e,s),n=this.targetDamperY.update(n,t.y,e,s),a=this.targetDamperZ.update(a,t.z,e,s),this.target.position.set(r,n,a),this.target.updateMatrixWorld(),this.queueRender(),!0}}pointTowards(e,t){let{x:i,z:s}=this.position;this.yaw=Math.atan2(e-i,t-s)}get model(){return this._model}set yaw(e){this.rotation.y=e,this.queueRender()}get yaw(){return this.rotation.y}set animationTime(e){this.mixer.setTime(e),this.queueShadowRender()}get animationTime(){if(null!=this.currentAnimationAction){let e=Math.max(this.currentAnimationAction._loopCount,0);return this.currentAnimationAction.loop===eu.uEv&&(1&e)==1?this.duration-this.currentAnimationAction.time:this.currentAnimationAction.time}return 0}set animationTimeScale(e){this.mixer.timeScale=e}get animationTimeScale(){return this.mixer.timeScale}get duration(){return null!=this.currentAnimationAction&&this.currentAnimationAction.getClip()?this.currentAnimationAction.getClip().duration:0}get hasActiveAnimation(){return null!=this.currentAnimationAction}playAnimation(e=null,t=0,i=eu.YKA,s=1/0){if(null==this._currentGLTF)return;let{animations:r}=this;if(null==r||0===r.length)return;let n=null;if(null!=e&&null==(n=this.animationsByName.get(e))){let t=parseInt(e);!isNaN(t)&&t>=0&&t<r.length&&(n=r[t])}null==n&&(n=r[0]);try{let{currentAnimationAction:e}=this,r=this.mixer.clipAction(n,this);this.currentAnimationAction=r,this.element.paused?this.mixer.stopAllAction():(r.paused=!1,null!=e&&r!==e?r.crossFadeFrom(e,t,!1):this.animationTimeScale>0&&this.animationTime==this.duration&&(this.animationTime=0)),r.setLoop(i,s),r.enabled=!0,r.clampWhenFinished=!0,r.play()}catch(e){console.error(e)}}stopAnimation(){this.currentAnimationAction=null,this.mixer.stopAllAction()}updateAnimation(e){this.mixer.update(e),this.queueShadowRender()}subscribeMixerEvent(e,t){this.mixer.addEventListener(e,t)}updateShadow(){let e=this.shadow;if(null!=e){let t="wall"===this.element.arPlacement?"back":"bottom";e.setScene(this,this.shadowSoftness,t),e.needsUpdate=!0}}renderShadow(e){let t=this.shadow;null!=t&&!0==t.needsUpdate&&(t.render(e,this),t.needsUpdate=!1)}queueShadowRender(){null!=this.shadow&&(this.shadow.needsUpdate=!0)}setShadowIntensity(e){if(this.shadowIntensity=e,null!=this._currentGLTF&&(this.setBakedShadowVisibility(),!(e<=0)||null!=this.shadow)){if(null==this.shadow){let e="wall"===this.element.arPlacement?"back":"bottom";this.shadow=new a7(this,this.shadowSoftness,e)}this.shadow.setIntensity(e)}}setShadowSoftness(e){this.shadowSoftness=e;let t=this.shadow;null!=t&&t.setSoftness(e)}setShadowOffset(e){let t=this.shadow;null!=t&&t.setOffset(e)}hitFromPoint(e,t=this){return os.setFromCamera(e,this.getCamera()),os.intersectObject(t,!0).find(e=>e.object.visible&&!e.object.userData.shadow)}positionAndNormalFromPoint(e,t=this){var i;let s=this.hitFromPoint(e,t);return null==s?null:{position:s.point,normal:null!=s.face?s.face.normal.clone().applyNormalMatrix(new eu.Vkp().getNormalMatrix(s.object.matrixWorld)):os.ray.direction.clone().multiplyScalar(-1),uv:null!==(i=s.uv)&&void 0!==i?i:null}}surfaceFromPoint(e,t=this){let i=this.element.model;if(null==i)return null;let s=this.hitFromPoint(e,t);if(null==s||null==s.face)return null;let{meshes:r,primitives:n}=i[aP](s).mesh.userData.associations,a=new eu.Pa4,o=new eu.Pa4,A=new eu.Pa4,{a:l,b:h,c:u}=s.face,c=s.object;c.getVertexPosition(l,a),c.getVertexPosition(h,o),c.getVertexPosition(u,A);let g=new eu.CJI(a,o,A),d=new eu.Pa4;return g.getBarycoord(c.worldToLocal(s.point),d),`${r} ${n} ${l} ${h} ${u} ${d.x.toFixed(3)} ${d.y.toFixed(3)} ${d.z.toFixed(3)}`}addHotspot(e){this.target.add(e),this.annotationRenderer.domElement.appendChild(e.element)}removeHotspot(e){this.target.remove(e)}forHotspots(e){let{children:t}=this.target;for(let i=0,s=t.length;i<s;i++){let s=t[i];s instanceof a5&&e(s)}}initializeSurface(e){if(null!=e.surface&&null==e.mesh){let t=sP(e.surface)[0].terms;if(8!=t.length){console.warn(e.surface+" does not have exactly 8 numbers.");return}let i=this.element.model[aO](t[0].number,t[1].number),s=new eu.Pa4(t[2].number,t[3].number,t[4].number);if(null==i){console.warn(e.surface+" does not match a node/primitive in this glTF! Skipping this hotspot.");return}let r=i.mesh.geometry.attributes.position.count;if(s.x>=r||s.y>=r||s.z>=r){console.warn(e.surface+" vertex indices out of range in this glTF! Skipping this hotspot.");return}let n=new eu.Pa4(t[5].number,t[6].number,t[7].number);e.mesh=i.mesh,e.tri=s,e.bary=n}}updateSurfaceHotspots(){let e=!this.element.paused;this.forHotspots(t=>{this.initializeSurface(t),t.updateSurface(e)})}updateHotspotsVisibility(e){this.forHotspots(t=>{oe.copy(e),ot.setFromMatrixPosition(t.matrixWorld),oe.sub(ot),oi.copy(t.normal).transformDirection(this.target.matrixWorld),0>oe.dot(oi)?t.hide():t.show()})}orientHotspots(e){this.forHotspots(t=>{t.orient(e)})}setHotspotsVisibility(e){this.forHotspots(t=>{t.visible=e})}updateSchema(e){var t;let{schemaElement:i,element:s}=this,{alt:r,poster:n,iosSrc:a}=s;if(null!=e){let s=[{"@type":"MediaObject",contentUrl:e,encodingFormat:(null===(t=e.split(".").pop())||void 0===t?void 0:t.toLowerCase())==="gltf"?"model/gltf+json":"model/gltf-binary"}];a&&s.push({"@type":"MediaObject",contentUrl:a,encodingFormat:"model/vnd.usdz+zip"}),i.textContent=JSON.stringify({"@context":"http://schema.org/","@type":"3DModel",image:null!=n?n:void 0,name:null!=r?r:void 0,encoding:s}),document.head.appendChild(i)}else null!=i.parentElement&&i.parentElement.removeChild(i)}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo extends EventTarget{constructor(){super(...arguments),this.ongoingActivities=new Set,this.totalProgress=0}get ongoingActivityCount(){return this.ongoingActivities.size}beginActivity(){let e={progress:0,completed:!1};return this.ongoingActivities.add(e),1===this.ongoingActivityCount&&this.announceTotalProgress(e,0),t=>{let i;return(i=Math.max(tw(t,0,1),e.progress))!==e.progress&&this.announceTotalProgress(e,i),e.progress}}announceTotalProgress(e,t){let i=0,s=0;for(let r of(1==t&&(e.completed=!0),this.ongoingActivities)){let{progress:e}=r;i+=1-e,!0===r.completed&&s++}let r=e.progress;e.progress=t,this.totalProgress+=(t-r)*(1-this.totalProgress)/i;let n=s===this.ongoingActivityCount?1:this.totalProgress;this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:n}})),s===this.ongoingActivityCount&&(this.totalProgress=0,this.ongoingActivities.clear())}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oA=function(e,t,i,s){var r,n=arguments.length,a=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,s);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let ol=document.createElement("canvas"),oh=Symbol("fallbackResizeHandler"),ou=Symbol("defaultAriaLabel"),oc=Symbol("resizeObserver"),og=Symbol("clearModelTimeout"),od=Symbol("onContextLost"),op=Symbol("loaded"),om=Symbol("status"),of=Symbol("onFocus"),oI=Symbol("onBlur"),oE=Symbol("updateSize"),oC=Symbol("intersectionObserver"),oB=Symbol("isElementInViewport"),oy=Symbol("announceModelVisibility"),ow=Symbol("ariaLabel"),oQ=Symbol("altDefaulted"),ov=Symbol("statusElement"),ob=Symbol("updateStatus"),oS=Symbol("loadedTime"),ox=Symbol("updateSource"),oR=Symbol("markLoaded"),oT=Symbol("container"),oM=Symbol("input"),oD=Symbol("canvas"),oL=Symbol("scene"),oF=Symbol("needsRender"),ok=Symbol("tick"),oU=Symbol("onModelLoad"),o_=Symbol("onResize"),oN=Symbol("renderer"),oG=Symbol("progressTracker"),oP=Symbol("getLoaded"),oO=Symbol("getModelIsVisible"),oH=Symbol("shouldAttemptPreload"),oq=e=>({x:e.x,y:e.y,z:e.z,toString(){return`${this.x}m ${this.y}m ${this.z}m`}}),oK=e=>({u:e.x,v:e.y,toString(){return`${this.u} ${this.v}`}});class oV extends ex{constructor(){let e,t;super(),this.alt=null,this.src=null,this.withCredentials=!1,this.generateSchema=!1,this[X]=!1,this[Z]=!1,this[ee]=0,this[et]="",this[ei]=null,this[es]=ty(()=>{let e=this.getBoundingClientRect();this[oE](e)},50),this[er]=ty(e=>{let t=this.modelIsVisible;t!==e&&this.dispatchEvent(new CustomEvent("model-visibility",{detail:{visible:t}}))},0),this[en]=null,this[ea]=null,this[eo]=new oo,this[eA]=()=>{this[ov].textContent=this[om]},this[el]=()=>{this[ov].textContent=""},this[eh]=e=>{this.dispatchEvent(new CustomEvent("error",{detail:{type:"webglcontextlost",sourceError:e.sourceEvent}}))},this.attachShadow({mode:"open"});let i=this.shadowRoot;if(t_(i),this[oT]=i.querySelector(".container"),this[oM]=i.querySelector(".userInput"),this[oD]=i.querySelector("canvas"),this[ov]=i.querySelector("#status"),this[ou]=this[oM].getAttribute("aria-label"),this.isConnected){let i=this.getBoundingClientRect();e=i.width,t=i.height}else e=300,t=150;this[oL]=new oa({canvas:this[oD],element:this,width:e,height:t}),Promise.resolve().then(()=>{this[oE](this.getBoundingClientRect())}),tl&&(this[oc]=new ResizeObserver(e=>{if(!this[oN].isPresenting)for(let t of e)t.target===this&&this[oE](t.contentRect)})),th?this[oC]=new IntersectionObserver(e=>{for(let t of e)if(t.target===this){let e=this.modelIsVisible;this[oB]=t.isIntersecting,this[oy](e),this[oB]&&!this.loaded&&this[ox]()}},{root:null,rootMargin:"0px",threshold:1e-5}):this[oB]=!0}static get is(){return"model-viewer"}static set modelCacheSize(e){i4[i3].evictionThreshold=e}static get modelCacheSize(){return i4[i3].evictionThreshold}static set minimumRenderScale(e){e>1&&console.warn("<model-viewer> minimumRenderScale has been clamped to a maximum value of 1."),e<=0&&console.warn("<model-viewer> minimumRenderScale has been clamped to a minimum value of 0.25."),nO.singleton.minScale=e}static get minimumRenderScale(){return nO.singleton.minScale}get loaded(){return this[oP]()}get[(X=oB,Z=op,ee=oS,et=om,ei=og,es=oh,er=oy,en=oc,ea=oC,eo=oG,oN)](){return nO.singleton}get modelIsVisible(){return this[oO]()}connectedCallback(){super.connectedCallback&&super.connectedCallback(),tl?this[oc].observe(this):self.addEventListener("resize",this[oh]),th&&this[oC].observe(this),this.addEventListener("focus",this[of]),this.addEventListener("blur",this[oI]);let e=this[oN];e.addEventListener("contextlost",this[od]),e.registerScene(this[oL]),null!=this[og]&&(self.clearTimeout(this[og]),this[og]=null,this.requestUpdate("src",null))}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),tl?this[oc].unobserve(this):self.removeEventListener("resize",this[oh]),th&&this[oC].unobserve(this),this.removeEventListener("focus",this[of]),this.removeEventListener("blur",this[oI]);let e=this[oN];e.removeEventListener("contextlost",this[od]),e.unregisterScene(this[oL]),this[og]=self.setTimeout(()=>{this[oL].dispose(),this[og]=null},10)}updated(e){super.updated(e),e.has("src")&&(null==this.src?(this[op]=!1,this[oS]=0,this[oL].reset()):this.src!==this[oL].url&&(this[op]=!1,this[oS]=0,this[ox]())),e.has("alt")&&this[oM].setAttribute("aria-label",this[ow]),e.has("withCredentials")&&(i4.withCredentials=this.withCredentials,this[oN].textureUtils.withCredentials=this.withCredentials),e.has("generateSchema")&&(this.generateSchema?this[oL].updateSchema(this.src):this[oL].updateSchema(null))}toDataURL(e,t){return this[oN].displayCanvas(this[oL]).toDataURL(e,t)}async toBlob(e){let t=e?e.mimeType:void 0,i=e?e.qualityArgument:void 0,s=e?e.idealAspect:void 0,{width:r,height:n,idealAspect:a,aspect:o}=this[oL],{dpr:A,scaleFactor:l}=this[oN],h=r*l*A,u=n*l*A,c=0,g=0;!0===s&&(a>o?g=(u-(u=Math.round(h/a)))/2:c=(h-(h=Math.round(u*a)))/2),ol.width=h,ol.height=u;try{return new Promise(async(e,s)=>{ol.getContext("2d").drawImage(this[oN].displayCanvas(this[oL]),c,g,h,u,0,0,h,u),ol.toBlob(t=>{if(!t)return s(Error("Unable to retrieve canvas blob"));e(t)},t,i)})}finally{this[oE]({width:r,height:n})}}registerEffectComposer(e){e.setRenderer(this[oN].threeRenderer),e.setMainCamera(this[oL].getCamera()),e.setMainScene(this[oL]),this[oL].effectRenderer=e}unregisterEffectComposer(){this[oL].effectRenderer=null}registerRenderer(e){this[oL].externalRenderer=e}unregisterRenderer(){this[oL].externalRenderer=null}get[ow](){return this[oQ]}get[oQ](){return null==this.alt||"null"===this.alt?this[ou]:this.alt}[oP](){return this[op]}[oO](){return this.loaded&&this[oB]}[oH](){return!!this.src&&this[oB]}[oE]({width:e,height:t}){0!==e&&0!==t&&(this[oT].style.width=`${e}px`,this[oT].style.height=`${t}px`,this[o_]({width:e,height:t}))}[ok](e,t){var i;null===(i=this[oL].effectRenderer)||void 0===i||i.beforeRender(e,t)}[oR](){this[op]||(this[op]=!0,this[oS]=performance.now())}[oF](){this[oL].queueRender()}[oU](){}[ob](e){this[om]=e;let t=this.getRootNode();null!=t&&t.activeElement===this&&this[ov].textContent!=e&&(this[ov].textContent=e)}[(eA=of,el=oI,o_)](e){this[oL].setSize(e.width,e.height)}async [(eh=od,ox)](){let e=this[oL];if(this.loaded||!this[oH]()||this.src===e.url)return;this.generateSchema&&e.updateSchema(this.src),this[ob]("Loading"),e.stopAnimation();let t=this[oG].beginActivity(),i=this.src;try{let s=e.setSource(i,e=>t(.95*tw(e,0,1))),r=this[tM]();await Promise.all([s,r]),this[oR](),this[oU](),this.updateComplete.then(()=>{this.dispatchEvent(new CustomEvent("before-render"))}),await new Promise(e=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.dispatchEvent(new CustomEvent("load",{detail:{url:i}})),e()})})})}catch(e){this.dispatchEvent(new CustomEvent("error",{detail:{type:"loadfailure",sourceError:e}}))}finally{t(1)}}}oA([I({type:String})],oV.prototype,"alt",void 0),oA([I({type:String})],oV.prototype,"src",void 0),oA([I({type:Boolean,attribute:"with-credentials"})],oV.prototype,"withCredentials",void 0),oA([I({type:Boolean,attribute:"generate-schema"})],oV.prototype,"generateSchema",void 0);/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oJ=function(e,t,i,s){var r,n=arguments.length,a=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,s);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let oY=Symbol("changeAnimation"),oj=Symbol("paused"),oz={repetitions:1/0,pingpong:!1},o$=Symbol("hotspotMap"),oW=Symbol("mutationCallback"),oX=Symbol("observer"),oZ=Symbol("addHotspot"),o0=Symbol("removeHotspot"),o1=new eu.yGw;/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/var o2={},o3=function(e){return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},o8=function(e){return new Worker(e)};try{URL.revokeObjectURL(o3(""))}catch(e){o3=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)},o8=function(e){return new Worker(e,{type:"module"})}}var o4=Uint8Array,o5=Uint16Array,o6=Uint32Array,o9=new o4([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),o7=new o4([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ae=new o4([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),At=function(e,t){for(var i=new o5(31),s=0;s<31;++s)i[s]=t+=1<<e[s-1];for(var r=new o6(i[30]),s=1;s<30;++s)for(var n=i[s];n<i[s+1];++n)r[n]=n-i[s]<<5|s;return[i,r]},Ai=At(o9,2),As=Ai[0],Ar=Ai[1];As[28]=258,Ar[258]=28;for(var An=At(o7,0),Aa=An[0],Ao=An[1],AA=new o5(32768),Al=0;Al<32768;++Al){var Ah=(43690&Al)>>>1|(21845&Al)<<1;Ah=(61680&(Ah=(52428&Ah)>>>2|(13107&Ah)<<2))>>>4|(3855&Ah)<<4,AA[Al]=((65280&Ah)>>>8|(255&Ah)<<8)>>>1}for(var Au=function(e,t,i){for(var s,r=e.length,n=0,a=new o5(t);n<r;++n)++a[e[n]-1];var o=new o5(t);for(n=0;n<t;++n)o[n]=o[n-1]+a[n-1]<<1;if(i){s=new o5(1<<t);var A=15-t;for(n=0;n<r;++n)if(e[n])for(var l=n<<4|e[n],h=t-e[n],u=o[e[n]-1]++<<h,c=u|(1<<h)-1;u<=c;++u)s[AA[u]>>>A]=l}else for(n=0,s=new o5(r);n<r;++n)e[n]&&(s[n]=AA[o[e[n]-1]++]>>>15-e[n]);return s},Ac=new o4(288),Al=0;Al<144;++Al)Ac[Al]=8;for(var Al=144;Al<256;++Al)Ac[Al]=9;for(var Al=256;Al<280;++Al)Ac[Al]=7;for(var Al=280;Al<288;++Al)Ac[Al]=8;for(var Ag=new o4(32),Al=0;Al<32;++Al)Ag[Al]=5;var Ad=Au(Ac,9,0),Ap=Au(Ag,5,0),Am=function(e){for(var t=e[0],i=1;i<e.length;++i)e[i]>t&&(t=e[i]);return t},Af=function(e,t,i){var s=t/8|0;return(e[s]|e[s+1]<<8)>>(7&t)&i},AI=function(e,t){var i=t/8|0;return(e[i]|e[i+1]<<8|e[i+2]<<16)>>(7&t)},AE=function(e){return(e/8|0)+(7&e&&1)},AC=function(e,t,i){(null==t||t<0)&&(t=0),(null==i||i>e.length)&&(i=e.length);var s=new(e instanceof o5?o5:e instanceof o6?o6:o4)(i-t);return s.set(e.subarray(t,i)),s},AB=function(e,t,i){i<<=7&t;var s=t/8|0;e[s]|=i,e[s+1]|=i>>>8},Ay=function(e,t,i){i<<=7&t;var s=t/8|0;e[s]|=i,e[s+1]|=i>>>8,e[s+2]|=i>>>16},Aw=function(e,t){for(var i=[],s=0;s<e.length;++s)e[s]&&i.push({s:s,f:e[s]});var r=i.length,n=i.slice();if(!r)return[AT,0];if(1==r){var a=new o4(i[0].s+1);return a[i[0].s]=1,[a,1]}i.sort(function(e,t){return e.f-t.f}),i.push({s:-1,f:25001});var o=i[0],A=i[1],l=0,h=1,u=2;for(i[0]={s:-1,f:o.f+A.f,l:o,r:A};h!=r-1;)o=i[i[l].f<i[u].f?l++:u++],A=i[l!=h&&i[l].f<i[u].f?l++:u++],i[h++]={s:-1,f:o.f+A.f,l:o,r:A};for(var c=n[0].s,s=1;s<r;++s)n[s].s>c&&(c=n[s].s);var g=new o5(c+1),d=AQ(i[h-1],g,0);if(d>t){var s=0,p=0,m=d-t,f=1<<m;for(n.sort(function(e,t){return g[t.s]-g[e.s]||e.f-t.f});s<r;++s){var I=n[s].s;if(g[I]>t)p+=f-(1<<d-g[I]),g[I]=t;else break}for(p>>>=m;p>0;){var E=n[s].s;g[E]<t?p-=1<<t-g[E]++-1:++s}for(;s>=0&&p;--s){var C=n[s].s;g[C]==t&&(--g[C],++p)}d=t}return[new o4(g),d]},AQ=function(e,t,i){return -1==e.s?Math.max(AQ(e.l,t,i+1),AQ(e.r,t,i+1)):t[e.s]=i},Av=function(e){for(var t=e.length;t&&!e[--t];);for(var i=new o5(++t),s=0,r=e[0],n=1,a=function(e){i[s++]=e},o=1;o<=t;++o)if(e[o]==r&&o!=t)++n;else{if(!r&&n>2){for(;n>138;n-=138)a(32754);n>2&&(a(n>10?n-11<<5|28690:n-3<<5|12305),n=0)}else if(n>3){for(a(r),--n;n>6;n-=6)a(8304);n>2&&(a(n-3<<5|8208),n=0)}for(;n--;)a(r);n=1,r=e[o]}return[i.subarray(0,s),t]},Ab=function(e,t){for(var i=0,s=0;s<t.length;++s)i+=e[s]*t[s];return i},AS=function(e,t,i){var s=i.length,r=AE(t+2);e[r]=255&s,e[r+1]=s>>>8,e[r+2]=255^e[r],e[r+3]=255^e[r+1];for(var n=0;n<s;++n)e[r+n+4]=i[n];return(r+4+s)*8},Ax=function(e,t,i,s,r,n,a,o,A,l,h){AB(t,h++,i),++r[256];for(var u,c,g,d,p=Aw(r,15),m=p[0],f=p[1],I=Aw(n,15),E=I[0],C=I[1],B=Av(m),y=B[0],w=B[1],Q=Av(E),v=Q[0],b=Q[1],S=new o5(19),x=0;x<y.length;++x)S[31&y[x]]++;for(var x=0;x<v.length;++x)S[31&v[x]]++;for(var R=Aw(S,7),T=R[0],M=R[1],D=19;D>4&&!T[Ae[D-1]];--D);var L=l+5<<3,F=Ab(r,Ac)+Ab(n,Ag)+a,k=Ab(r,m)+Ab(n,E)+a+14+3*D+Ab(S,T)+(2*S[16]+3*S[17]+7*S[18]);if(L<=F&&L<=k)return AS(t,h,e.subarray(A,A+l));if(AB(t,h,1+(k<F)),h+=2,k<F){u=Au(m,f,0),c=m,g=Au(E,C,0),d=E;var U=Au(T,M,0);AB(t,h,w-257),AB(t,h+5,b-1),AB(t,h+10,D-4),h+=14;for(var x=0;x<D;++x)AB(t,h+3*x,T[Ae[x]]);h+=3*D;for(var _=[y,v],N=0;N<2;++N)for(var G=_[N],x=0;x<G.length;++x){var P=31&G[x];AB(t,h,U[P]),h+=T[P],P>15&&(AB(t,h,G[x]>>>5&127),h+=G[x]>>>12)}}else u=Ad,c=Ac,g=Ap,d=Ag;for(var x=0;x<o;++x)if(s[x]>255){var P=s[x]>>>18&31;Ay(t,h,u[P+257]),h+=c[P+257],P>7&&(AB(t,h,s[x]>>>23&31),h+=o9[P]);var O=31&s[x];Ay(t,h,g[O]),h+=d[O],O>3&&(Ay(t,h,s[x]>>>5&8191),h+=o7[O])}else Ay(t,h,u[s[x]]),h+=c[s[x]];return Ay(t,h,u[256]),h+c[256]},AR=new o6([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),AT=new o4(0),AM=function(e,t,i,s,r,n){var a=e.length,o=new o4(s+a+5*(1+Math.ceil(a/7e3))+r),A=o.subarray(s,o.length-r),l=0;if(!t||a<8)for(var h=0;h<=a;h+=65535){var u=h+65535;u<a?l=AS(A,l,e.subarray(h,u)):(A[h]=n,l=AS(A,l,e.subarray(h,a)))}else{for(var c=AR[t-1],g=c>>>13,d=8191&c,p=(1<<i)-1,m=new o5(32768),f=new o5(p+1),I=Math.ceil(i/3),E=2*I,C=function(t){return(e[t]^e[t+1]<<I^e[t+2]<<E)&p},B=new o6(25e3),y=new o5(288),w=new o5(32),Q=0,v=0,h=0,b=0,S=0,x=0;h<a;++h){var R=C(h),T=32767&h,M=f[R];if(m[T]=M,f[R]=T,S<=h){var D=a-h;if((Q>7e3||b>24576)&&D>423){l=Ax(e,A,0,B,y,w,v,b,x,h-x,l),b=Q=v=0,x=h;for(var L=0;L<286;++L)y[L]=0;for(var L=0;L<30;++L)w[L]=0}var F=2,k=0,U=d,_=T-M&32767;if(D>2&&R==C(h-_))for(var N=Math.min(g,D)-1,G=Math.min(32767,h),P=Math.min(258,D);_<=G&&--U&&T!=M;){if(e[h+F]==e[h+F-_]){for(var O=0;O<P&&e[h+O]==e[h+O-_];++O);if(O>F){if(F=O,k=_,O>N)break;for(var H=Math.min(_,O-2),q=0,L=0;L<H;++L){var K=h-_+L+32768&32767,V=m[K],J=K-V+32768&32767;J>q&&(q=J,M=K)}}}M=m[T=M],_+=T-M+32768&32767}if(k){B[b++]=268435456|Ar[F]<<18|Ao[k];var Y=31&Ar[F],j=31&Ao[k];v+=o9[Y]+o7[j],++y[257+Y],++w[j],S=h+F,++Q}else B[b++]=e[h],++y[e[h]]}}l=Ax(e,A,n,B,y,w,v,b,x,h-x,l),!n&&7&l&&(l=AS(A,l+1,AT))}return AC(o,0,s+AE(l)+r)},AD=function(){for(var e=new o6(256),t=0;t<256;++t){for(var i=t,s=9;--s;)i=(1&i&&3988292384)^i>>>1;e[t]=i}return e}(),AL=function(){var e=-1;return{p:function(t){for(var i=e,s=0;s<t.length;++s)i=AD[255&i^t[s]]^i>>>8;e=i},d:function(){return~e}}},AF=function(e,t){var i={};for(var s in e)i[s]=e[s];for(var s in t)i[s]=t[s];return i},Ak=function(e,t,i){for(;i;++t)e[t]=i,i>>>=8},AU=function(e,t,i,s){for(var r in e){var n=e[r],a=t+r;n instanceof o4?i[a]=[n,s]:Array.isArray(n)?i[a]=[n[0],AF(s,n[1])]:AU(n,a+"/",i,s)}},A_="undefined"!=typeof TextEncoder&&new TextEncoder,AN="undefined"!=typeof TextDecoder&&new TextDecoder;try{AN.decode(AT,{stream:!0})}catch(e){}function AG(e,t){if(t){for(var i=new o4(e.length),s=0;s<e.length;++s)i[s]=e.charCodeAt(s);return i}if(A_)return A_.encode(e);for(var r=e.length,n=new o4(e.length+(e.length>>1)),a=0,o=function(e){n[a++]=e},s=0;s<r;++s){if(a+5>n.length){var A=new o4(a+8+(r-s<<1));A.set(n),n=A}var l=e.charCodeAt(s);l<128||t?o(l):(l<2048?o(192|l>>6):(l>55295&&l<57344?(o(240|(l=65536+(1047552&l)|1023&e.charCodeAt(++s))>>18),o(128|l>>12&63)):o(224|l>>12),o(128|l>>6&63)),o(128|63&l))}return AC(n,0,a)}var AP=function(e){var t=0;if(e)for(var i in e){var s=e[i].length;if(s>65535)throw"extra field too long";t+=s+4}return t},AO=function(e,t,i,s,r,n,a,o){var A=s.length,l=i.extra,h=o&&o.length,u=AP(l);Ak(e,t,null!=a?33639248:67324752),t+=4,null!=a&&(e[t++]=20,e[t++]=i.os),e[t]=20,t+=2,e[t++]=i.flag<<1|(null==n&&8),e[t++]=r&&8,e[t++]=255&i.compression,e[t++]=i.compression>>8;var c=new Date(null==i.mtime?Date.now():i.mtime),g=c.getFullYear()-1980;if(g<0||g>119)throw"date not in range 1980-2099";if(Ak(e,t,g<<25|c.getMonth()+1<<21|c.getDate()<<16|c.getHours()<<11|c.getMinutes()<<5|c.getSeconds()>>>1),t+=4,null!=n&&(Ak(e,t,i.crc),Ak(e,t+4,n),Ak(e,t+8,i.size)),Ak(e,t+12,A),Ak(e,t+14,u),t+=16,null!=a&&(Ak(e,t,h),Ak(e,t+6,i.attrs),Ak(e,t+10,a),t+=14),e.set(s,t),t+=A,u)for(var d in l){var p=l[d],m=p.length;Ak(e,t,+d),Ak(e,t+2,m),e.set(p,t+4),t+=4+m}return h&&(e.set(o,t),t+=h),t},AH=function(e,t,i,s,r){Ak(e,t,101010256),Ak(e,t+8,i),Ak(e,t+10,i),Ak(e,t+12,s),Ak(e,t+16,r)};class Aq{async parse(e,t={}){var i;t=Object.assign({ar:{anchoring:{type:"plane"},planeAnchoring:{alignment:"horizontal"}},quickLookCompatible:!1},t);let s={},r="model.usda";s[r]=null;let n=AK();n+=(i=t,`def Xform "Root"
{
	def Scope "Scenes" (
		kind = "sceneLibrary"
	)
	{
		def Xform "Scene" (
			customData = {
				bool preliminary_collidesWithEnvironment = 0
				string sceneName = "Scene"
			}
			sceneName = "Scene"
		)
		{
		token preliminary:anchoring:type = "${i.ar.anchoring.type}"
		token preliminary:planeAnchoring:alignment = "${i.ar.planeAnchoring.alignment}"

`);let a={},o={};for(let i in e.traverseVisible(e=>{if(e.isMesh){let i=e.geometry,r=e.material;if(r.isMeshStandardMaterial){let o="geometries/Geometry_"+i.id+".usda";if(!(o in s)){var t;let e;let r=function(e){let t=function(e){var t;let i=e.attributes,s=i.position.count;return`
	def Mesh "Geometry"
	{
		int[] faceVertexCounts = [${Array((null!==(t=e).index?t.index.count:t.attributes.position.count)/3).fill(3).join(", ")}]
		int[] faceVertexIndices = [${function(e){let t=e.index,i=[];if(null!==t)for(let e=0;e<t.count;e++)i.push(t.getX(e));else{let t=e.attributes.position.count;for(let e=0;e<t;e++)i.push(e)}return i.join(", ")}(e)}]
		normal3f[] normals = [${AY(i.normal,s)}] (
			interpolation = "vertex"
		)
		point3f[] points = [${AY(i.position,s)}]
${function(e,t){let i="";for(let s=0;s<4;s++){let r=s>0?s:"",n=e["uv"+r];void 0!==n&&(i+=`
		texCoord2f[] primvars:st${r} = [${function(e,t){if(void 0===e)return console.warn("USDZExporter: UVs missing."),Array(t).fill("(0, 0)").join(", ");let i=[];for(let t=0;t<e.count;t++){let s=e.getX(t),r=e.getY(t);i.push(`(${s.toPrecision(7)}, ${1-r.toPrecision(7)})`)}return i.join(", ")}(n,t)}] (
			interpolation = "vertex"
		)`)}return i}(i,s)}
		uniform token subdivisionScheme = "none"
	}
`}(e);return`
def "Geometry"
{
${t}
}
`}(i);s[o]=(t=r,AG(AK()+t))}r.uuid in a||(a[r.uuid]=r),n+=function(e,t,i){let s="Object_"+e.id,r=AV(e.matrixWorld);return 0>e.matrixWorld.determinant()&&console.warn("THREE.USDZExporter: USDZ does not support negative scales",e),`def Xform "${s}" (
	prepend references = @./geometries/Geometry_${t.id}.usda@</Geometry>
	prepend apiSchemas = ["MaterialBindingAPI"]
)
{
	matrix4d xformOp:transform = ${r}
	uniform token[] xformOpOrder = ["xformOp:transform"]

	rel material:binding = </Materials/Material_${i.id}>
}

`}(e,i,r)}else console.warn("THREE.USDZExporter: Unsupported material type (USDZ only supports MeshStandardMaterial)",e)}else e.isCamera&&(n+=function(e){let t=e.name?e.name:"Camera_"+e.id,i=AV(e.matrixWorld);return(0>e.matrixWorld.determinant()&&console.warn("THREE.USDZExporter: USDZ does not support negative scales",e),e.isOrthographicCamera)?`def Camera "${t}"
		{
			matrix4d xformOp:transform = ${i}
			uniform token[] xformOpOrder = ["xformOp:transform"]

			float2 clippingRange = (${e.near.toPrecision(7)}, ${e.far.toPrecision(7)})
			float horizontalAperture = ${((Math.abs(e.left)+Math.abs(e.right))*10).toPrecision(7)}
			float verticalAperture = ${((Math.abs(e.top)+Math.abs(e.bottom))*10).toPrecision(7)}
			token projection = "orthographic"
		}
	
	`:`def Camera "${t}"
		{
			matrix4d xformOp:transform = ${i}
			uniform token[] xformOpOrder = ["xformOp:transform"]

			float2 clippingRange = (${e.near.toPrecision(7)}, ${e.far.toPrecision(7)})
			float focalLength = ${e.getFocalLength().toPrecision(7)}
			float focusDistance = ${e.focus.toPrecision(7)}
			float horizontalAperture = ${e.getFilmWidth().toPrecision(7)}
			token projection = "perspective"
			float verticalAperture = ${e.getFilmHeight().toPrecision(7)}
		}
	
	`}(e))}),n+=`
		}
	}
}

`+function(e,t,i=!1){let s=[];for(let r in e){let n=e[r];s.push(function(e,t,i=!1){let s=[],r=[];function n(s,r,n){var a;let o=s.source.id+"_"+s.flipY;t[o]=s;let A=s.channel>0?"st"+s.channel:"st",l={1e3:"repeat",1001:"clamp",1002:"mirror"},h=s.repeat.clone(),u=s.offset.clone(),c=s.rotation,g=Math.sin(c),d=Math.cos(c);return u.y=1-u.y-h.y,i?(u.x=u.x/h.x,u.y=u.y/h.y,u.x+=g/h.x,u.y+=d-1):(u.x+=g*h.x,u.y+=(1-d)*h.y),`
		def Shader "PrimvarReader_${r}"
		{
			uniform token info:id = "UsdPrimvarReader_float2"
			float2 inputs:fallback = (0.0, 0.0)
			token inputs:varname = "${A}"
			float2 outputs:result
		}

		def Shader "Transform2d_${r}"
		{
			uniform token info:id = "UsdTransform2d"
			token inputs:in.connect = </Materials/Material_${e.id}/PrimvarReader_${r}.outputs:result>
			float inputs:rotation = ${(180/Math.PI*c).toFixed(7)}
			float2 inputs:scale = ${Az(h)}
			float2 inputs:translation = ${Az(u)}
			float2 outputs:result
		}

		def Shader "Texture_${s.id}_${r}"
		{
			uniform token info:id = "UsdUVTexture"
			asset inputs:file = @textures/Texture_${o}.png@
			float2 inputs:st.connect = </Materials/Material_${e.id}/Transform2d_${r}.outputs:result>
			${void 0!==n?"float4 inputs:scale = "+(a=n,`(${a.r}, ${a.g}, ${a.b}, 1.0)`):""}
			token inputs:sourceColorSpace = "${s.colorSpace===eu.aCh?"raw":"sRGB"}"
			token inputs:wrapS = "${l[s.wrapS]}"
			token inputs:wrapT = "${l[s.wrapT]}"
			float outputs:r
			float outputs:g
			float outputs:b
			float3 outputs:rgb
			${e.transparent||e.alphaTest>0?"float outputs:a":""}
		}`}return e.side===eu.ehD&&console.warn("THREE.USDZExporter: USDZ does not support double sided materials",e),null!==e.map?(s.push(`			color3f inputs:diffuseColor.connect = </Materials/Material_${e.id}/Texture_${e.map.id}_diffuse.outputs:rgb>`),e.transparent?s.push(`			float inputs:opacity.connect = </Materials/Material_${e.id}/Texture_${e.map.id}_diffuse.outputs:a>`):e.alphaTest>0&&(s.push(`			float inputs:opacity.connect = </Materials/Material_${e.id}/Texture_${e.map.id}_diffuse.outputs:a>`),s.push(`			float inputs:opacityThreshold = ${e.alphaTest}`)),r.push(n(e.map,"diffuse",e.color))):s.push(`			color3f inputs:diffuseColor = ${Aj(e.color)}`),null!==e.emissiveMap?(s.push(`			color3f inputs:emissiveColor.connect = </Materials/Material_${e.id}/Texture_${e.emissiveMap.id}_emissive.outputs:rgb>`),r.push(n(e.emissiveMap,"emissive"))):e.emissive.getHex()>0&&s.push(`			color3f inputs:emissiveColor = ${Aj(e.emissive)}`),null!==e.normalMap&&(s.push(`			normal3f inputs:normal.connect = </Materials/Material_${e.id}/Texture_${e.normalMap.id}_normal.outputs:rgb>`),r.push(n(e.normalMap,"normal"))),null!==e.aoMap&&(s.push(`			float inputs:occlusion.connect = </Materials/Material_${e.id}/Texture_${e.aoMap.id}_occlusion.outputs:r>`),r.push(n(e.aoMap,"occlusion"))),null!==e.roughnessMap&&1===e.roughness?(s.push(`			float inputs:roughness.connect = </Materials/Material_${e.id}/Texture_${e.roughnessMap.id}_roughness.outputs:g>`),r.push(n(e.roughnessMap,"roughness"))):s.push(`			float inputs:roughness = ${e.roughness}`),null!==e.metalnessMap&&1===e.metalness?(s.push(`			float inputs:metallic.connect = </Materials/Material_${e.id}/Texture_${e.metalnessMap.id}_metallic.outputs:b>`),r.push(n(e.metalnessMap,"metallic"))):s.push(`			float inputs:metallic = ${e.metalness}`),null!==e.alphaMap?(s.push(`			float inputs:opacity.connect = </Materials/Material_${e.id}/Texture_${e.alphaMap.id}_opacity.outputs:r>`),s.push(`			float inputs:opacityThreshold = 0.0001`),r.push(n(e.alphaMap,"opacity"))):s.push(`			float inputs:opacity = ${e.opacity}`),e.isMeshPhysicalMaterial&&(s.push(`			float inputs:clearcoat = ${e.clearcoat}`),s.push(`			float inputs:clearcoatRoughness = ${e.clearcoatRoughness}`),s.push(`			float inputs:ior = ${e.ior}`)),`
	def Material "Material_${e.id}"
	{
		def Shader "PreviewSurface"
		{
			uniform token info:id = "UsdPreviewSurface"
${s.join("\n")}
			int inputs:useSpecularWorkflow = 0
			token outputs:surface
		}

		token outputs:surface.connect = </Materials/Material_${e.id}/PreviewSurface.outputs:surface>

${r.join("\n")}

	}
`}(n,t,i))}return`def "Materials"
{
${s.join("")}
}

`}(a,o,t.quickLookCompatible),s[r]=AG(n),n=null,o){let e=o[i],t=function(e,t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){let i=1024/Math.max(e.width,e.height),s=document.createElement("canvas");s.width=e.width*Math.min(1,i),s.height=e.height*Math.min(1,i);let r=s.getContext("2d");return!0===t&&(r.translate(0,s.height),r.scale(1,-1)),r.drawImage(e,0,0,s.width,s.height),s}throw Error("THREE.USDZExporter: No valid image data found. Unable to process texture.")}(e.image,e.flipY),r=await new Promise(e=>t.toBlob(e,"image/png",1));s[`textures/Texture_${i}.png`]=new Uint8Array(await r.arrayBuffer())}let A=0;for(let e in s){let t=s[e],i=63&(A+=34+e.length);if(4!==i){let r=new Uint8Array(64-i);s[e]=[t,{extra:{12345:r}}]}A=t.length}return function(e,t){t||(t={});var i={},s=[];AU(e,"",i,t);var r=0,n=0;for(var a in i){var o=i[a],A=o[0],l=o[1],h=0==l.level?0:8,u=AG(a),c=u.length,g=l.comment,d=g&&AG(g),p=d&&d.length,m=AP(l.extra);if(c>65535)throw"filename too long";var f=h?function(e,t){var i;return AM(e,null==(i=t||{}).level?6:i.level,null==i.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+i.mem,0,0,!0)}(A,l):A,I=f.length,E=AL();E.p(A),s.push(AF(l,{size:A.length,crc:E.d(),c:f,f:u,m:d,u:c!=a.length||d&&g.length!=p,o:r,compression:h})),r+=30+c+m+I,n+=76+2*(c+m)+(p||0)+I}for(var C=new o4(n+22),B=r,y=n-r,w=0;w<s.length;++w){var u=s[w];AO(C,u.o,u,u.f,u.u,u.c.length);var Q=30+u.f.length+AP(u.extra);C.set(u.c,u.o+Q),AO(C,r,u,u.f,u.u,u.c.length,u.o,u.m),r+=16+Q+(u.m?u.m.length:0)}return AH(C,r,s.length,y,B),C}(s,{level:0})}}function AK(){return`#usda 1.0
(
	customLayerData = {
		string creator = "Three.js USDZExporter"
	}
	metersPerUnit = 1
	upAxis = "Y"
)

`}function AV(e){let t=e.elements;return`( ${AJ(t,0)}, ${AJ(t,4)}, ${AJ(t,8)}, ${AJ(t,12)} )`}function AJ(e,t){return`(${e[t+0]}, ${e[t+1]}, ${e[t+2]}, ${e[t+3]})`}function AY(e,t){if(void 0===e)return console.warn("USDZExporter: Normals missing."),Array(t).fill("(0, 0, 0)").join(", ");let i=[];for(let t=0;t<e.count;t++){let s=e.getX(t),r=e.getY(t),n=e.getZ(t);i.push(`(${s.toPrecision(7)}, ${r.toPrecision(7)}, ${n.toPrecision(7)})`)}return i.join(", ")}function Aj(e){return`(${e.r}, ${e.g}, ${e.b})`}function Az(e){return`(${e.x}, ${e.y})`}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var A$=function(e,t,i,s){var r,n=arguments.length,a=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,s);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let AW=!1,AX=!1,AZ="#model-viewer-no-ar-fallback",A0=(p=["quick-look","scene-viewer","webxr","none"],e=>{try{let t=sP(e),i=(t.length?t[0].terms:[]).filter(e=>e&&"ident"===e.type).map(e=>e.value).filter(e=>p.indexOf(e)>-1),s=new Set;for(let e of i)s.add(e);return s}catch(e){}return new Set}),A1={QUICK_LOOK:"quick-look",SCENE_VIEWER:"scene-viewer",WEBXR:"webxr",NONE:"none"},A2=Symbol("arButtonContainer"),A3=Symbol("enterARWithWebXR"),A8=Symbol("openSceneViewer"),A4=Symbol("openIOSARQuickLook"),A5=Symbol("canActivateAR"),A6=Symbol("arMode"),A9=Symbol("arModes"),A7=Symbol("arAnchor"),le=Symbol("preload"),lt=Symbol("onARButtonContainerClick"),li=Symbol("onARStatus"),ls=Symbol("onARTracking"),lr=Symbol("onARTap"),ln=Symbol("selectARMode"),la=Symbol("triggerLoad");/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lo=function(e,t,i,s){var r,n=arguments.length,a=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,s);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let lA={AUTO:"auto"},ll={AUTO:"auto",EAGER:"eager"},lh=Symbol("defaultProgressBarElement"),lu=Symbol("posterContainerElement"),lc=Symbol("defaultPosterElement"),lg=Symbol("shouldDismissPoster"),ld=Symbol("hidePoster"),lp=Symbol("modelIsRevealed"),lm=Symbol("updateProgressBar"),lf=Symbol("ariaLabelCallToAction"),lI=Symbol("onProgress");/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lE=function(e,t,i,s){var r,n=arguments.length,a=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,s);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(n<3?r(a):n>3?r(t,i,a):r(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};let lC={basis:[sz(sG(Math.PI/32,"rad"))],keywords:{auto:[null]}},lB=Symbol("autoRotateStartTime"),ly=Symbol("radiansPerSecond"),lw=Symbol("syncRotationRate"),lQ=Symbol("onCameraChange"),lv=(e=>{var t,i,s;class r extends e{constructor(){super(...arguments),this[t]=new Map,this[i]=e=>{e.forEach(e=>{e instanceof MutationRecord&&"childList"!==e.type||(e.addedNodes.forEach(e=>{this[oZ](e)}),e.removedNodes.forEach(e=>{this[o0](e)}),this[oF]())})},this[s]=new MutationObserver(this[oW])}connectedCallback(){super.connectedCallback();for(let e=0;e<this.children.length;++e)this[oZ](this.children[e]);let{ShadyDOM:e}=self;null==e?this[oX].observe(this,{childList:!0}):this[oX]=e.observeChildren(this,this[oW])}disconnectedCallback(){super.disconnectedCallback();let{ShadyDOM:e}=self;null==e?this[oX].disconnect():e.unobserveChildren(this[oX])}[(t=o$,i=oW,s=oX,ok)](e,t){super[ok](e,t);let i=this[oL],{annotationRenderer:s}=i,r=i.getCamera();i.shouldRender()&&(i.updateSurfaceHotspots(),i.updateHotspotsVisibility(r.position),s.domElement.style.display="",s.render(i,r))}updateHotspot(e){let t=this[o$].get(e.name);null!=t&&(t.updatePosition(e.position),t.updateNormal(e.normal),t.surface=e.surface,this[oF]())}queryHotspot(e){let t=this[o$].get(e);if(null==t)return null;let i=oq(t.position),s=oq(t.normal),r=t.facingCamera,n=this[oL],a=n.getCamera(),o=new eu.Pa4;o.setFromMatrixPosition(t.matrixWorld),o.project(a);let A=n.width/2,l=n.height/2;o.x=o.x*A+A,o.y=-(o.y*l)+l;let h=oq(new eu.Pa4(o.x,o.y,o.z));return Number.isFinite(h.x)&&Number.isFinite(h.y)?{position:i,normal:s,canvasPosition:h,facingCamera:r}:null}positionAndNormalFromPoint(e,t){let i=this[oL],s=i.getNDC(e,t),r=i.positionAndNormalFromPoint(s);if(null==r)return null;o1.copy(i.target.matrixWorld).invert();let n=oq(r.position.applyMatrix4(o1)),a=oq(r.normal.transformDirection(o1)),o=null;return null!=r.uv&&(o=oK(r.uv)),{position:n,normal:a,uv:o}}surfaceFromPoint(e,t){let i=this[oL],s=i.getNDC(e,t);return i.surfaceFromPoint(s)}[oZ](e){if(!(e instanceof HTMLElement&&0===e.slot.indexOf("hotspot")))return;let t=this[o$].get(e.slot);null!=t?t.increment():(t=new a5({name:e.slot,position:e.dataset.position,normal:e.dataset.normal,surface:e.dataset.surface}),this[o$].set(e.slot,t),this[oL].addHotspot(t)),this[oL].queueRender()}[o0](e){if(!(e instanceof HTMLElement))return;let t=this[o$].get(e.slot);t&&(t.decrement()&&(this[oL].removeHotspot(t),this[o$].delete(e.slot)),this[oL].queueRender())}}return r})((e=>{var t,i,s;class r extends e{constructor(){super(...arguments),this[t]=void 0,this[i]=null,this[s]=null,this.variantName=null,this.orientation="0 0 0",this.scale="1 1 1"}get model(){return this[aW]}get availableVariants(){return this.model?this.model[aq]():[]}get originalGltfJson(){return this[a$]}[(t=aW,i=az,s=a$,aX)](){return()=>{this[oF]()}}[aZ](e){return e.encoding=eu.knz,e.wrapS=eu.rpg,e.wrapT=eu.rpg,new n9(this[aX](),e)}async createTexture(e,t="image/png"){let{textureUtils:i}=this[oN],s=await i.loadImage(e);return s.userData.mimeType=t,this[aZ](s)}async createLottieTexture(e,t=1){let{textureUtils:i}=this[oN],s=await i.loadLottie(e,t);return this[aZ](s)}createVideoTexture(e){let t=document.createElement("video");t.src=e,t.muted=!0,t.playsInline=!0,t.loop=!0,t.play();let i=new eu.fO1(t);return this[aZ](i)}createCanvasTexture(){let e=document.createElement("canvas"),t=new eu.ROQ(e);return this[aZ](t)}async updated(e){if(super.updated(e),e.has("variantName")){let e=this[oG].beginActivity();e(.1);let t=this[aW],{variantName:i}=this;null!=t&&(await t[aN](i),this[oF](),this.dispatchEvent(new CustomEvent("variant-applied"))),e(1)}if(e.has("orientation")||e.has("scale")){if(!this.loaded)return;let e=this[oL];e.applyTransform(),e.updateBoundingBox(),e.updateShadow(),this[oN].arRenderer.onUpdateScene(),this[oF]()}}[oU](){super[oU]();let{currentGLTF:e}=this[oL];if(null!=e){let{correlatedSceneGraph:t}=e;null!=t&&e!==this[az]&&(this[aW]=new aY(t,this[aX]()),this[a$]=JSON.parse(JSON.stringify(t.gltf))),"variants"in e.userData&&this.requestUpdate("variantName")}this[az]=e}async exportScene(e){let t=this[oL];return new Promise(async(i,s)=>{let r={binary:!0,onlyVisible:!0,maxTextureSize:1/0,includeCustomExtensions:!1,forceIndices:!1};Object.assign(r,e),r.animations=t.animations,r.truncateDrawRange=!0;let n=t.shadow,a=!1;null!=n&&(a=n.visible,n.visible=!1),await this[aW][a_](),new sa().register(e=>new sM(e)).parse(t.model,e=>i(new Blob([r.binary?e:JSON.stringify(e)],{type:r.binary?"application/octet-stream":"application/json"})),()=>s("glTF export failed"),r),null!=n&&(n.visible=a)})}materialFromPoint(e,t){let i=this[aW];if(null==i)return null;let s=this[oL],r=s.getNDC(e,t),n=s.hitFromPoint(r);return null==n||null==n.face?null:i[aG](n)}}return aj([I({type:String,attribute:"variant-name"})],r.prototype,"variantName",void 0),aj([I({type:String,attribute:"orientation"})],r.prototype,"orientation",void 0),aj([I({type:String,attribute:"scale"})],r.prototype,"scale",void 0),r})((e=>{var t,i,s;class r extends e{constructor(){super(...arguments),this.autoRotate=!1,this.autoRotateDelay=3e3,this.rotationPerSecond="auto",this[t]=performance.now(),this[i]=0,this[s]=e=>{this.autoRotate&&"user-interaction"===e.detail.source&&(this[lB]=performance.now())}}connectedCallback(){super.connectedCallback(),this.addEventListener("camera-change",this[lQ]),this[lB]=performance.now()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("camera-change",this[lQ]),this[lB]=performance.now()}updated(e){super.updated(e),e.has("autoRotate")&&(this[lB]=performance.now())}[(t=lB,i=ly,lw)](e){this[ly]=e[0]}[ok](e,t){if(super[ok](e,t),!this.autoRotate||!this[oO]()||this[oN].isPresenting)return;let i=Math.min(t,e-this[lB]-this.autoRotateDelay);i>0&&(this[oL].yaw=this.turntableRotation+this[ly]*i*.001)}get turntableRotation(){return this[oL].yaw}resetTurntableRotation(e=0){this[oL].yaw=e}}return s=lQ,lE([I({type:Boolean,attribute:"auto-rotate"})],r.prototype,"autoRotate",void 0),lE([I({type:Number,attribute:"auto-rotate-delay"})],r.prototype,"autoRotateDelay",void 0),lE([rI({intrinsics:lC,updateHandler:lw}),I({type:String,attribute:"rotation-per-second"})],r.prototype,"rotationPerSecond",void 0),r})((e=>{var t,i,s;class r extends e{constructor(){super(...arguments),this.environmentImage=null,this.skyboxImage=null,this.shadowIntensity=0,this.shadowSoftness=1,this.exposure=1,this[t]=null,this[i]=null,this[s]=null}updated(e){super.updated(e),e.has("shadowIntensity")&&(this[oL].setShadowIntensity(.5*this.shadowIntensity),this[oF]()),e.has("shadowSoftness")&&(this[oL].setShadowSoftness(this.shadowSoftness),this[oF]()),e.has("exposure")&&(this[oL].exposure=this.exposure,this[oF]()),(e.has("environmentImage")||e.has("skyboxImage"))&&this[oH]()&&this[tM]()}hasBakedShadow(){return this[oL].bakedShadows.size>0}async [(t=tR,i=tT,s=tD,tM)](){let{skyboxImage:e,environmentImage:t}=this;null!=this[tD]&&(this[tD](),this[tD]=null);let{textureUtils:i}=this[oN];if(null==i)return;let s=this[oG].beginActivity();try{let{environmentMap:r,skybox:n}=await i.generateEnvironmentMapAndSkybox(tI(e),t,e=>s(tw(e,0,1)));this[tR]!==r&&(this[tR]=r,this.dispatchEvent(new CustomEvent("environment-change"))),null!=n?this[tT]=n.name===r.name?r:n:this[tT]=null,this[oL].setEnvironmentAndSkybox(this[tR],this[tT]),this[oL].dispatchEvent({type:"envmap-update"})}catch(e){if(e instanceof Error)throw this[oL].setEnvironmentAndSkybox(null,null),e}finally{s(1)}}}return tx([I({type:String,attribute:"environment-image"})],r.prototype,"environmentImage",void 0),tx([I({type:String,attribute:"skybox-image"})],r.prototype,"skyboxImage",void 0),tx([I({type:Number,attribute:"shadow-intensity"})],r.prototype,"shadowIntensity",void 0),tx([I({type:Number,attribute:"shadow-softness"})],r.prototype,"shadowSoftness",void 0),tx([I({type:Number})],r.prototype,"exposure",void 0),r})((e=>{var t,i,s,r,n,a,o,A,l,h,u,c,g,d,p,m,f;class E extends e{constructor(){super(...arguments),this.cameraControls=!1,this.cameraOrbit=rb,this.cameraTarget="auto auto auto",this.fieldOfView="auto",this.minCameraOrbit="auto",this.maxCameraOrbit="auto",this.minFieldOfView="auto",this.maxFieldOfView="auto",this.interactionPromptThreshold=3e3,this.interactionPrompt=rR.AUTO,this.interactionPromptStyle=rT.WIGGLE,this.orbitSensitivity=1,this.touchAction="none",this.disableZoom=!1,this.disablePan=!1,this.disableTap=!1,this.interpolationDecay=50,this[t]=this.shadowRoot.querySelector(".interaction-prompt"),this[i]=this.shadowRoot.querySelector("#prompt"),this[s]=[this.shadowRoot.querySelector("#finger0"),this.shadowRoot.querySelector("#finger1")],this[r]=this.shadowRoot.querySelector(".pan-target"),this[n]=0,this[a]=1/0,this[o]=!1,this[A]=!1,this[l]=nA.AUTOMATIC,this[h]=new nl(this[oL].camera,this[oM],this[oL]),this[u]=new eu.$V,this[c]=!1,this[g]=!1,this[d]=!1,this[p]=()=>{let e=this[rO].changeSource;this[r2]=e,e===nA.USER_INTERACTION&&(this[rZ]=!0,this[rJ]())},this[m]=()=>{this[rY](),this[oF]();let e=this[rO].changeSource;this.dispatchEvent(new CustomEvent("camera-change",{detail:{source:e}}))},this[f]=e=>{"pointer-change-start"===e.type?this[oT].classList.add("pointer-tumbling"):this[oT].classList.remove("pointer-tumbling")}}get inputSensitivity(){return this[rO].inputSensitivity}set inputSensitivity(e){this[rO].inputSensitivity=e}getCameraOrbit(){let{theta:e,phi:t,radius:i}=this[r3];return{theta:e,phi:t,radius:i,toString(){return`${this.theta}rad ${this.phi}rad ${this.radius}m`}}}getCameraTarget(){return oq(this[oN].isPresenting?this[oN].arRenderer.target:this[oL].getTarget())}getFieldOfView(){return this[rO].getFieldOfView()}getMinimumFieldOfView(){return this[rO].options.minimumFieldOfView}getMaximumFieldOfView(){return this[rO].options.maximumFieldOfView}getIdealAspect(){return this[oL].idealAspect}jumpCameraToGoal(){this[r8]=!0,this.requestUpdate(r8,!1)}resetInteractionPrompt(){this[r1]=0,this[r0]=1/0,this[rZ]=!1,this[rX]=this.interactionPrompt===rR.AUTO&&this.cameraControls}zoom(e){let t=new WheelEvent("wheel",{deltaY:-30*e});this[oM].dispatchEvent(t)}connectedCallback(){super.connectedCallback(),this[rO].addEventListener("user-interaction",this[rz]),this[rO].addEventListener("pointer-change-start",this[rW]),this[rO].addEventListener("pointer-change-end",this[rW])}disconnectedCallback(){super.disconnectedCallback(),this[rO].removeEventListener("user-interaction",this[rz]),this[rO].removeEventListener("pointer-change-start",this[rW]),this[rO].removeEventListener("pointer-change-end",this[rW])}updated(e){super.updated(e);let t=this[rO],i=this[oL];if(e.has("cameraControls")&&(this.cameraControls?(t.enableInteraction(),this.interactionPrompt===rR.AUTO&&(this[rX]=!0)):(t.disableInteraction(),this[rJ]()),this[oM].setAttribute("aria-label",this[ow])),e.has("disableZoom")&&(t.disableZoom=this.disableZoom),e.has("disablePan")&&(t.enablePan=!this.disablePan),e.has("disableTap")&&(t.enableTap=!this.disableTap),(e.has("interactionPrompt")||e.has("cameraControls")||e.has("src"))&&(this.interactionPrompt===rR.AUTO&&this.cameraControls&&!this[rZ]?this[rX]=!0:this[rJ]()),e.has("interactionPromptStyle")&&(this[rK].style.opacity=this.interactionPromptStyle==rT.BASIC?"1":"0"),e.has("touchAction")){let e=this.touchAction;t.applyOptions({touchAction:e}),t.updateTouchActionStyle()}e.has("orbitSensitivity")&&(t.orbitSensitivity=this.orbitSensitivity),e.has("interpolationDecay")&&(t.setDamperDecayTime(this.interpolationDecay),i.setTargetDamperDecayTime(this.interpolationDecay)),!0===this[r8]&&Promise.resolve().then(()=>{t.jumpToGoal(),i.jumpToGoal(),this[r$](),this[r8]=!1})}async updateFraming(){let e=this[oL],t=e.adjustedFoV(e.framedFoVDeg);await e.updateFraming();let i=e.adjustedFoV(e.framedFoVDeg),s=this[rO].getFieldOfView()/t;this[rO].setFieldOfView(i*s),this[r5]=!0,this.requestUpdate("maxFieldOfView"),this.requestUpdate("fieldOfView"),this.requestUpdate("minCameraOrbit"),this.requestUpdate("maxCameraOrbit"),this.requestUpdate("cameraOrbit"),await this.updateComplete}interact(e,t,i){let s=this[oM],r=this[rV];if("1"===r[0].style.opacity){console.warn("interact() failed because an existing interaction is running.");return}let n=[];n.push({x:ry(t.x),y:ry(t.y)});let a=[{x:n[0].x(0),y:n[0].y(0)}];null!=i&&(n.push({x:ry(i.x),y:ry(i.y)}),a.push({x:n[1].x(0),y:n[1].y(0)}));let o=performance.now(),{width:A,height:l}=this[oL],h=this.getBoundingClientRect(),u=e=>{for(let[t,i]of a.entries()){let{style:n}=r[t];n.transform=`translateX(${A*i.x}px) translateY(${l*i.y}px)`,"pointerdown"===e?n.opacity="1":"pointerup"===e&&(n.opacity="0");let a={pointerId:t-5678,pointerType:"touch",target:s,clientX:A*i.x+h.x,clientY:l*i.y+h.y,altKey:!0};s.dispatchEvent(new PointerEvent(e,a))}},c=()=>{let t=this[r2];if(t!==nA.AUTOMATIC||!s.isConnected){for(let e of this[rV])e.style.opacity="0";u("pointercancel"),this.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:t}})),document.removeEventListener("visibilitychange",g);return}let i=Math.min(1,(performance.now()-o)/e);for(let[e,t]of a.entries())t.x=n[e].x(i),t.y=n[e].y(i);u("pointermove"),i<1?requestAnimationFrame(c):(u("pointerup"),this.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:nA.AUTOMATIC}})),document.removeEventListener("visibilitychange",g))},g=()=>{let e=0;"hidden"===document.visibilityState?e=performance.now()-o:o=performance.now()-e};document.addEventListener("visibilitychange",g),u("pointerdown"),this[r2]=nA.AUTOMATIC,requestAnimationFrame(c)}[(t=rq,i=rK,s=rV,r=rH,n=r1,a=r0,o=rZ,A=rX,l=r2,h=rO,u=r3,c=r8,g=r4,d=r5,r9)](e){let t=this[rO],i=this[oL];i.framedFoVDeg=180*e[0]/Math.PI,t.changeSource=nA.NONE,t.setFieldOfView(i.adjustedFoV(i.framedFoVDeg)),this[rz]()}[r6](e){let t=this[rO];if(this[r5]){let{theta:t,phi:i}=this.getCameraOrbit();e[0]=t,e[1]=i,this[r5]=!1}t.changeSource=nA.NONE,t.setOrbit(e[0],e[1],e[2]),this[rz]()}[ne](e){this[rO].applyOptions({minimumAzimuthalAngle:e[0],minimumPolarAngle:e[1],minimumRadius:e[2]}),this.jumpCameraToGoal()}[nt](e){this[rO].applyOptions({maximumAzimuthalAngle:e[0],maximumPolarAngle:e[1],maximumRadius:e[2]}),this[rj](e[2]),this.jumpCameraToGoal()}[ni](e){this[rO].applyOptions({minimumFieldOfView:180*e[0]/Math.PI}),this.jumpCameraToGoal()}[ns](e){let t=this[oL].adjustedFoV(180*e[0]/Math.PI);this[rO].applyOptions({maximumFieldOfView:t}),this.jumpCameraToGoal()}[r7](e){let[t,i,s]=e;this[oN].arRenderer.isPresenting||this[oL].setTarget(t,i,s),this[rO].changeSource=nA.NONE,this[oN].arRenderer.updateTarget(),this[rz]()}[ok](e,t){if(super[ok](e,t),this[oN].isPresenting||!this[oO]())return;let i=this[rO],s=this[oL],r=performance.now();if(this[rX]&&this.loaded&&r>this[oS]+this.interactionPromptThreshold&&(this[rX]=!1,this[r0]=r,this[rq].classList.add("visible")),isFinite(this[r0])&&this.interactionPromptStyle===rT.WIGGLE){let e=(r-this[r0])/5e3%1,t=rQ(e),n=rv(e);if(this[rK].style.opacity=`${n}`,t!==this[r1]){let e=t*s.width*.05,r=(t-this[r1])*Math.PI/16;this[rK].style.transform=`translateX(${e}px)`,i.changeSource=nA.AUTOMATIC,i.adjustOrbit(r,0,0),this[r1]=t}}let n=i.update(e,t),a=s.updateTarget(t);(n||a)&&this[r$]()}[rJ](){this[rX]=!1,this[rq].classList.remove("visible"),this[r0]=1/0}[rj](e){let t=Math.max(this[oL].boundingSphere.radius,e);this[rO].updateNearFar(0,Math.abs(2*t))}[rY](){let{theta:e,phi:t}=this[rO].getCameraSpherical(this[r3]),i=rS[(4+Math.floor((e%rP+rG)/r_))%4],s=rx[Math.floor(t/rN)];this[ob](`View from stage ${s}${i}`)}get[ow](){return super[ow].replace(/\.$/,"")+(this.cameraControls?". Use mouse, touch or arrow keys to move.":"")}async [o_](e){let t=this[rO],i=this[oL],s=i.adjustedFoV(i.framedFoVDeg);super[o_](e);let r=i.adjustedFoV(i.framedFoVDeg)/s,n=t.getFieldOfView()*(isFinite(r)?r:1);t.updateAspect(this[oL].aspect),this.requestUpdate("maxFieldOfView",this.maxFieldOfView),await this.updateComplete,this[rO].setFieldOfView(n),this.jumpCameraToGoal()}[oU](){super[oU](),this[r4]?this[r5]=!0:this[r4]=!0,this.requestUpdate("maxFieldOfView",this.maxFieldOfView),this.requestUpdate("fieldOfView",this.fieldOfView),this.requestUpdate("minCameraOrbit",this.minCameraOrbit),this.requestUpdate("maxCameraOrbit",this.maxCameraOrbit),this.requestUpdate("cameraOrbit",this.cameraOrbit),this.requestUpdate("cameraTarget",this.cameraTarget),this.jumpCameraToGoal()}}return p=rz,m=r$,f=rW,rw([I({type:Boolean,attribute:"camera-controls"})],E.prototype,"cameraControls",void 0),rw([rI({intrinsics:rL,observeEffects:!0,updateHandler:r6}),I({type:String,attribute:"camera-orbit",hasChanged:()=>!0})],E.prototype,"cameraOrbit",void 0),rw([rI({intrinsics:rU,observeEffects:!0,updateHandler:r7}),I({type:String,attribute:"camera-target",hasChanged:()=>!0})],E.prototype,"cameraTarget",void 0),rw([rI({intrinsics:rM,observeEffects:!0,updateHandler:r9}),I({type:String,attribute:"field-of-view",hasChanged:()=>!0})],E.prototype,"fieldOfView",void 0),rw([rI({intrinsics:rF,updateHandler:ne}),I({type:String,attribute:"min-camera-orbit",hasChanged:()=>!0})],E.prototype,"minCameraOrbit",void 0),rw([rI({intrinsics:rk,updateHandler:nt}),I({type:String,attribute:"max-camera-orbit",hasChanged:()=>!0})],E.prototype,"maxCameraOrbit",void 0),rw([rI({intrinsics:rD,updateHandler:ni}),I({type:String,attribute:"min-field-of-view",hasChanged:()=>!0})],E.prototype,"minFieldOfView",void 0),rw([rI({intrinsics:rM,updateHandler:ns}),I({type:String,attribute:"max-field-of-view",hasChanged:()=>!0})],E.prototype,"maxFieldOfView",void 0),rw([I({type:Number,attribute:"interaction-prompt-threshold"})],E.prototype,"interactionPromptThreshold",void 0),rw([I({type:String,attribute:"interaction-prompt"})],E.prototype,"interactionPrompt",void 0),rw([I({type:String,attribute:"interaction-prompt-style"})],E.prototype,"interactionPromptStyle",void 0),rw([I({type:Number,attribute:"orbit-sensitivity"})],E.prototype,"orbitSensitivity",void 0),rw([I({type:String,attribute:"touch-action"})],E.prototype,"touchAction",void 0),rw([I({type:Boolean,attribute:"disable-zoom"})],E.prototype,"disableZoom",void 0),rw([I({type:Boolean,attribute:"disable-pan"})],E.prototype,"disablePan",void 0),rw([I({type:Boolean,attribute:"disable-tap"})],E.prototype,"disableTap",void 0),rw([I({type:Number,attribute:"interpolation-decay"})],E.prototype,"interpolationDecay",void 0),E})((e=>{var t,i,s,r,n,a,o,A,l,h;class u extends e{constructor(){super(...arguments),this.ar=!1,this.arScale="auto",this.arPlacement="floor",this.arModes="webxr scene-viewer quick-look",this.iosSrc=null,this.xrEnvironment=!1,this[t]=!1,this[i]=this.shadowRoot.querySelector(".ar-button"),this[s]=document.createElement("a"),this[r]=new Set,this[n]=A1.NONE,this[a]=!1,this[o]=e=>{e.preventDefault(),this.activateAR()},this[A]=({status:e})=>{(e===nh.NOT_PRESENTING||this[oN].arRenderer.presentedScene===this[oL])&&(this.setAttribute("ar-status",e),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:e}})),e===nh.NOT_PRESENTING?this.removeAttribute("ar-tracking"):e===nh.SESSION_STARTED&&this.setAttribute("ar-tracking",nu.TRACKING))},this[l]=({status:e})=>{this.setAttribute("ar-tracking",e),this.dispatchEvent(new CustomEvent("ar-tracking",{detail:{status:e}}))},this[h]=e=>{"_apple_ar_quicklook_button_tapped"==e.data&&this.dispatchEvent(new CustomEvent("quick-look-button-tapped"))}}get canActivateAR(){return this[A6]!==A1.NONE}connectedCallback(){super.connectedCallback(),this[oN].arRenderer.addEventListener("status",this[li]),this.setAttribute("ar-status",nh.NOT_PRESENTING),this[oN].arRenderer.addEventListener("tracking",this[ls]),this[A7].addEventListener("message",this[lr])}disconnectedCallback(){super.disconnectedCallback(),this[oN].arRenderer.removeEventListener("status",this[li]),this[oN].arRenderer.removeEventListener("tracking",this[ls]),this[A7].removeEventListener("message",this[lr])}update(e){super.update(e),e.has("arScale")&&(this[oL].canScale="fixed"!==this.arScale),e.has("arPlacement")&&(this[oL].updateShadow(),this[oF]()),e.has("arModes")&&(this[A9]=A0(this.arModes)),(e.has("ar")||e.has("arModes")||e.has("src")||e.has("iosSrc"))&&this[ln]()}async activateAR(){switch(this[A6]){case A1.QUICK_LOOK:await this[A4]();break;case A1.WEBXR:await this[A3]();break;case A1.SCENE_VIEWER:this[A8]();break;default:console.warn("No AR Mode can be activated. This is probably due to missing configuration or device capabilities")}}async [(t=A5,i=A2,s=A7,r=A9,n=A6,a=le,o=lt,A=li,l=ls,h=lr,ln)](){let e=A1.NONE;if(this.ar){if(null!=this.src)for(let t of this[A9]){if("webxr"===t&&tA&&!AW&&await this[oN].arRenderer.supportsPresentation()){e=A1.WEBXR;break}if("scene-viewer"===t&&tp&&!AX){e=A1.SCENE_VIEWER;break}if("quick-look"===t&&tf){e=A1.QUICK_LOOK;break}}e===A1.NONE&&null!=this.iosSrc&&tf&&(e=A1.QUICK_LOOK)}if(e!==A1.NONE)this[A2].classList.add("enabled"),this[A2].addEventListener("click",this[lt]);else if(this[A2].classList.contains("enabled")){this[A2].removeEventListener("click",this[lt]),this[A2].classList.remove("enabled");let e=nh.FAILED;this.setAttribute("ar-status",e),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:e}}))}this[A6]=e}async [A3](){console.log("Attempting to present in AR with WebXR..."),await this[la]();try{this[A2].removeEventListener("click",this[lt]);let{arRenderer:e}=this[oN];e.placeOnWall="wall"===this.arPlacement,await e.present(this[oL],this.xrEnvironment)}catch(e){console.warn("Error while trying to present in AR with WebXR"),console.error(e),await this[oN].arRenderer.stopPresenting(),AW=!0,console.warn("Falling back to next ar-mode"),await this[ln](),this.activateAR()}finally{this[ln]()}}async [la](){this.loaded||(this[le]=!0,this[ox](),await tS(this,"load"),this[le]=!1)}[oH](){return super[oH]()||this[le]}[A8](){let e=self.location.toString(),t=new URL(e),i=new URL(this.src,e);i.hash&&(i.hash="");let s=new URLSearchParams(i.search);if(t.hash=AZ,s.set("mode","ar_preferred"),s.has("disable_occlusion")||s.set("disable_occlusion","true"),"fixed"===this.arScale&&s.set("resizable","false"),"wall"===this.arPlacement&&s.set("enable_vertical_placement","true"),s.has("sound")){let t=new URL(s.get("sound"),e);s.set("sound",t.toString())}if(s.has("link")){let t=new URL(s.get("link"),e);s.set("link",t.toString())}let r=`intent://arvr.google.com/scene-viewer/1.0?${s.toString()+"&file="+encodeURIComponent(i.toString())}#Intent;scheme=https;package=com.google.ar.core;action=android.intent.action.VIEW;S.browser_fallback_url=${encodeURIComponent(t.toString())};end;`;self.addEventListener("hashchange",()=>{self.location.hash===AZ&&(AX=!0,self.history.back(),console.warn("Error while trying to present in AR with Scene Viewer"),console.warn("Falling back to next ar-mode"),this[ln]())},{once:!0}),this[A7].setAttribute("href",r),console.log("Attempting to present in AR with Scene Viewer..."),this[A7].click()}async [A4](){let e=!this.iosSrc;this[A2].classList.remove("enabled");let t=e?await this.prepareUSDZ():this.iosSrc,i=new URL(t,self.location.toString());if(e){let e=new URL(self.location.toString()),t=new URL(this.src,e);t.hash&&(i.hash=t.hash)}"fixed"===this.arScale&&(i.hash&&(i.hash+="&"),i.hash+="allowsContentScaling=0");let s=this[A7];s.setAttribute("rel","ar");let r=document.createElement("img");s.appendChild(r),s.setAttribute("href",i.toString()),e&&s.setAttribute("download","model.usdz"),s.style.display="none",s.isConnected||this.shadowRoot.appendChild(s),console.log("Attempting to present in AR with Quick Look..."),s.click(),s.removeChild(r),e&&URL.revokeObjectURL(t),this[A2].classList.add("enabled")}async prepareUSDZ(){let e=this[oG].beginActivity();await this[la]();let{model:t,shadow:i}=this[oL];if(null==t)return"";let s=!1;null!=i&&(s=i.visible,i.visible=!1),e(.2);let r=new Aq,n=new Blob([await r.parse(t)],{type:"model/vnd.usdz+zip"}),a=URL.createObjectURL(n);return e(1),null!=i&&(i.visible=s),a}}return A$([I({type:Boolean,attribute:"ar"})],u.prototype,"ar",void 0),A$([I({type:String,attribute:"ar-scale"})],u.prototype,"arScale",void 0),A$([I({type:String,attribute:"ar-placement"})],u.prototype,"arPlacement",void 0),A$([I({type:String,attribute:"ar-modes"})],u.prototype,"arModes",void 0),A$([I({type:String,attribute:"ios-src"})],u.prototype,"iosSrc",void 0),A$([I({type:Boolean,attribute:"xr-environment"})],u.prototype,"xrEnvironment",void 0),u})((e=>{var t,i,s,r,n,a,o,A;class l extends e{constructor(...e){super(...e),this.poster=null,this.reveal=lA.AUTO,this.loading=ll.AUTO,this[t]=!1,this[i]=!1,this[s]=this.shadowRoot.querySelector(".slot.poster"),this[r]=this.shadowRoot.querySelector("#default-poster"),this[n]=this.shadowRoot.querySelector("#default-progress-bar > .bar"),this[a]=this[lc].getAttribute("aria-label"),this[o]=tB(e=>{let t=this[lh].parentNode;requestAnimationFrame(()=>{this[lh].style.transform=`scaleX(${e})`,0===e&&(t.removeChild(this[lh]),t.appendChild(this[lh])),1===e?this[lh].classList.add("hide"):this[lh].classList.remove("hide")})},100),this[A]=e=>{let t=e.detail.totalProgress;1===t&&(this[lm].flush(),this.loaded&&(this[lg]||this.reveal===lA.AUTO)&&this[ld]()),this[lm](t),this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:t}}))};let l=self.ModelViewerElement||{},h=l.dracoDecoderLocation||"https://www.gstatic.com/draco/versioned/decoders/1.5.6/";i4.setDRACODecoderLocation(h);let u=l.ktx2TranscoderLocation||"https://www.gstatic.com/basis-universal/versioned/2021-04-15-ba1c3e4/";i4.setKTX2TranscoderLocation(u),l.meshoptDecoderLocation&&i4.setMeshoptDecoderLocation(l.meshoptDecoderLocation);let c=l.lottieLoaderLocation||"https://cdn.jsdelivr.net/npm/three@0.149.0/examples/jsm/loaders/LottieLoader.js";nO.singleton.textureUtils.lottieLoaderUrl=c}static set dracoDecoderLocation(e){i4.setDRACODecoderLocation(e)}static get dracoDecoderLocation(){return i4.getDRACODecoderLocation()}static set ktx2TranscoderLocation(e){i4.setKTX2TranscoderLocation(e)}static get ktx2TranscoderLocation(){return i4.getKTX2TranscoderLocation()}static set meshoptDecoderLocation(e){i4.setMeshoptDecoderLocation(e)}static get meshoptDecoderLocation(){return i4.getMeshoptDecoderLocation()}static set lottieLoaderLocation(e){nO.singleton.textureUtils.lottieLoaderUrl=e}static get lottieLoaderLocation(){return nO.singleton.textureUtils.lottieLoaderUrl}static mapURLs(e){nO.singleton.loader[i2].manager.setURLModifier(e)}dismissPoster(){this.loaded?this[ld]():(this[lg]=!0,this[ox]())}showPoster(){let e=this[lu];if(e.classList.contains("show"))return;e.classList.add("show"),this[oM].classList.remove("show");let t=this[lc];t.removeAttribute("tabindex"),t.removeAttribute("aria-hidden");let i=this.modelIsVisible;this[lp]=!1,this[oy](i)}getDimensions(){return oq(this[oL].size)}getBoundingBoxCenter(){return oq(this[oL].boundingBox.getCenter(new eu.Pa4))}connectedCallback(){super.connectedCallback(),this.loaded||this.showPoster(),this[oG].addEventListener("progress",this[lI])}disconnectedCallback(){super.disconnectedCallback(),this[oG].removeEventListener("progress",this[lI])}async updated(e){super.updated(e),e.has("poster")&&null!=this.poster&&(this[lc].style.backgroundImage=`url(${this.poster})`),e.has("alt")&&this[lc].setAttribute("aria-label",this[oQ]),(e.has("reveal")||e.has("loading"))&&this[ox]()}[(t=lp,i=lg,s=lu,r=lc,n=lh,a=lf,o=lm,A=lI,oH)](){return!!this.src&&(this[lg]||this.loading===ll.EAGER||this.reveal===lA.AUTO&&this[oB])}[ld](){this[lg]=!1;let e=this[lu];if(!e.classList.contains("show"))return;e.classList.remove("show"),this[oM].classList.add("show");let t=this.modelIsVisible;this[lp]=!0,this[oy](t);let i=this.getRootNode();i&&i.activeElement===this&&this[oM].focus();let s=this[lc];s.setAttribute("aria-hidden","true"),s.tabIndex=-1,this.dispatchEvent(new CustomEvent("poster-dismissed"))}[oO](){return super[oO]()&&this[lp]}}return lo([I({type:String})],l.prototype,"poster",void 0),lo([I({type:String})],l.prototype,"reveal",void 0),lo([I({type:String})],l.prototype,"loading",void 0),l})((e=>{var t;class i extends e{constructor(...e){super(e),this.autoplay=!1,this.animationName=void 0,this.animationCrossfadeDuration=300,this[t]=!0,this[oL].subscribeMixerEvent("loop",e=>{let t=e.action._loopCount;this.dispatchEvent(new CustomEvent("loop",{detail:{count:t}}))}),this[oL].subscribeMixerEvent("finished",()=>{this[oj]=!0,this.dispatchEvent(new CustomEvent("finished"))})}get availableAnimations(){return this.loaded?this[oL].animationNames:[]}get duration(){return this[oL].duration}get paused(){return this[oj]}get currentTime(){return this[oL].animationTime}set currentTime(e){this[oL].animationTime=e,this[oF]()}get timeScale(){return this[oL].animationTimeScale}set timeScale(e){this[oL].animationTimeScale=e}pause(){this[oj]||(this[oj]=!0,this.dispatchEvent(new CustomEvent("pause")))}play(e){this.availableAnimations.length>0&&(this[oj]=!1,this[oY](e),this.dispatchEvent(new CustomEvent("play")))}[(t=oj,oU)](){super[oU](),this[oj]=!0,null!=this.animationName&&this[oY](),this.autoplay&&this.play()}[ok](e,t){super[ok](e,t),!this[oj]&&(this[oO]()||this[oN].isPresenting)&&(this[oL].updateAnimation(t/1e3),this[oF]())}updated(e){super.updated(e),e.has("autoplay")&&this.autoplay&&this.play(),e.has("animationName")&&this[oY]()}[oY](e=oz){var t;let i=null!==(t=e.repetitions)&&void 0!==t?t:1/0,s=e.pingpong?eu.uEv:1===i?eu.jAl:eu.YKA;this[oL].playAnimation(this.animationName,this.animationCrossfadeDuration/1e3,s,i),this[oj]&&(this[oL].updateAnimation(0),this[oF]())}}return oJ([I({type:Boolean})],i.prototype,"autoplay",void 0),oJ([I({type:String,attribute:"animation-name"})],i.prototype,"animationName",void 0),oJ([I({type:Number,attribute:"animation-crossfade-duration"})],i.prototype,"animationCrossfadeDuration",void 0),i})(oV))))))));customElements.define("model-viewer",lv)}}]);